"use strict";var _createClass=function(){function a(s,l){for(var n,o=0;o<l.length;o++)n=l[o],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,n.key,n)}return function(s,l,o){return l&&a(s.prototype,l),o&&a(s,o),s}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")}var __decorate=function(a,s,l,o){var y,n=arguments.length,u=3>n?s:null===o?o=Object.getOwnPropertyDescriptor(s,l):o;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)u=Reflect.decorate(a,s,l,o);else for(var m=a.length-1;0<=m;m--)(y=a[m])&&(u=(3>n?y(u):3<n?y(s,l,u):y(s,l))||u);return 3<n&&u&&Object.defineProperty(s,l,u),u},__metadata=function(a,s){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,s)},__awaiter=function(a,s,l,o){return new(l||(l=Promise))(function(n,u){function y(S){try{g(o.next(S))}catch(h){u(h)}}function m(S){try{g(o["throw"](S))}catch(h){u(h)}}function g(S){S.done?n(S.value):new l(function(h){h(S.value)}).then(y,m)}g((o=o.apply(a,s)).next())})},core_1=require("@angular/core"),differs_1=require("app/differs"),errisy_completer_1=require("errisy-completer"),clipboardjs=require("errisy-copy"),shop_client_1=require("app/shop.client"),util=require("errisy-util"),rental_util_1=require("app/rental.util"),realestate_util_1=require("app/realestate.util"),AppComponent=function(){function a(s,l,o,n,u,y,m,g,S,h,f,R,b,E,x){var C=this;_classCallCheck(this,a),this.shop=s,this.fruit=l,this.meat=o,this.seafood=n,this.fastfood=u,this.grocery=y,this.vehicle=m,this.packedfood=g,this.fuel=S,this.houseservice=h,this.carservice=f,this.realestate=R,this.rental=b,this.changeDetectorRef=E,this.completerService=x,this.HoursLimit=1,this.Mode="None",this.ShowAlert=!1,this.ShopListTypes=["FruitVegetableShop","MeatShop","SeaFoodShop","FastFoodShop","GroceryShop","FuelShop","VehicleShop","PackedFoodShop","HouseServiceRepairShop","CarServiceRepairShop"],this.EntryListTypes=["RealEstateShop","RentalShop"],this.SMS={number:"",message:""},this.SMSValid=!1,this.buildSMS=function(M,w){C.SMS={number:M,message:w},C.SMSValid=!0,C.changeDetectorRef.detectChanges()},this.GalleryIndex=0,this.ShowGallery=function(M,w){console.log("show gallery",M,w),C.GalleryIndex=M,C.Gallery=w,C.changeDetectorRef.detectChanges()},this.ShowGalleryImage=function(M){C.GalleryIndex=M,C.changeDetectorRef.detectChanges()},this.SelectAdjacent=function(M){if(M.target){var w=M.target;M.clientX>w.clientWidth/2?(C.GalleryIndex+=1,C.GalleryIndex>=C.Gallery.length&&(C.GalleryIndex=0)):(C.GalleryIndex-=1,0>C.GalleryIndex&&(C.GalleryIndex=C.Gallery.length-1))}C.changeDetectorRef.detectChanges()},this.closeGallery=function(M){C.Gallery=void 0,M.stopPropagation(),C.changeDetectorRef.detectChanges()},this.RentalEntireProperty=["Unit","Apartment","Townhouse","House","Entire Propery"],this.RentalEntirePropertyTypes=["Unit","Apartment","Townhouse","House"],this.RentalQuery={Category:"All",PriceFrom:0,PriceTo:5e3,KeyLock:!1,HasPrivateToilet:!1,HasPrivateBathroom:!1,HasPrivateGarageOrCarPort:!1,HasPrivateKitchen:!1,HasPrivateLaundry:!1,RoomSizeFrom:10,RoomSizeTo:40,BedroomFrom:1,BedroomTo:5,BathroomFrom:1,BathroomTo:5,ToiletFrom:1,ToiletTo:5,IsQuiteStreet:!1},this.RealEstateBuilding=["Unit","Apartment","Multiple Units","Townhouse","House","All Buildings"],this.RealEstateWithLand=["Townhouse","House","Land"],this.RealEstateWithPrivateYard=["Townhouse","House"],this.RealEstateQuery={Category:"All",PriceStrategy:"Explicit",IncludeInexplicit:!0,PriceFrom:1.5e5,PriceTo:2e6,BedroomFrom:1,BedroomTo:5,BathroomFrom:1,BathroomTo:5,ToiletFrom:1,ToiletTo:5,IsQuiteStreet:!1,LandSizeFrom:200,LandSizeTo:2e3,HasPool:!1,WallOrFence:"Any",StructuralMaterial:"Any",NumberOfStoriesFrom:1,NumberOfStoriesTo:3,HasGrannyFlat:!1},this.ExplicitPriceStrategies=["Explicit","Exact Price","Plus","Offers Over"],this.InexplicitPriceStrategies=["Any","Inexplicit","POA","Submit Your Offer","Auction"],this.ExplicitPriceStrategyQuery=["Exact Price","Plus","Offers Over"],this.InexplicitPriceStrategyQuery=["POA","Submit Your Offer","Auction"],this.onSuburbClick=function(M,w,I){"RealEstateShop"==C.SelectedShopType.Name||"RentalShop"==C.SelectedShopType.Name?(C.Map.setCenter(new google.maps.LatLng(w,I)),C.Map.setZoom(13)):(C.Map.setCenter(new google.maps.LatLng(w,I)),C.Map.setZoom(11))},this.onRegionClick=function(M,w,I){"RealEstateShop"==C.SelectedShopType.Name||"RentalShop"==C.SelectedShopType.Name?(C.Map.setCenter(new google.maps.LatLng(w,I)),C.Map.setZoom(9)):(C.Map.setCenter(new google.maps.LatLng(w,I)),C.Map.setZoom(9))},this.onMapClickOrMouseDown=function(){C.isKeywordsEditing=!1},this.onMapBoundsChanged=function(){C.MapBoundsChangedTimeout&&clearTimeout(C.MapBoundsChangedTimeout),C.MapBoundsChangedTimeout=setTimeout(C.onBoundsChangedTimeout,200)},this.onBoundsChangedTimeout=function(){C.loadShops()},this.NoDateShopTypes=["GroceryShop","VehicleShop","CarServiceRepairShop","HouseServiceRepairShop"],this.isKeywordsEditing=!1,this.ItemsDiffer=new differs_1.IDDiffers([]),this.Markers={},this.PreviousFilters={},this.location={x:153.028036,y:-27.4761628},this.initPosition(),this.loadGeoPosition()}return _createClass(a,[{key:"initPosition",value:function(){var l=util.cookie.get("lng"),o=util.cookie.get("lat");"string"==typeof o&&/^[\+\-]?(\d+|\d+\.\d*|\.\d+)$/ig.test(o)&&"string"==typeof l&&/^[\+\-]?(\d+|\d+\.\d*|\.\d+)$/ig.test(l)&&(this.location.x=+l,this.location.y=+o)}},{key:"loadGeoPosition",value:function(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function l(){var o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,util.GetGeoLocation();case 2:o=u.sent,this.Location={x:o.coords.longitude,y:o.coords.latitude};case 4:case"end":return u.stop();}},l,this)}))}},{key:"formatAddress",value:function(l){if(!l)return"Unknow Adress";var o=[];return l.BuildingDetail&&o.push(l.BuildingDetail),l.StreetNumber&&l.Street?o.push(l.StreetNumber+" "+l.Street):l.StreetNumber?o.push(l.StreetNumber):l.Street&&o.push(l.Street),l.Suburb&&o.push(l.Suburb),l.State&&l.Postcode?o.push(l.State+" "+l.Postcode):l.State?o.push(l.State):l.Postcode&&o.push(l.Postcode),o.join(", ")}},{key:"ngAfterContentInit",value:function(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function l(){var o,n;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:o=void 0,n=util.getURLParameters(),this.TypeIDFromParameter=n.t,this.ShopIDFromParameter=n.s,clipboardjs.button(this.CopyMessageButton.nativeElement,this.MessageTextArea.nativeElement);case 5:case"end":return y.stop();}},l,this)}))}},{key:"RentalCategoryChange",value:function(l){this.SelectedCategory=this.Categories.find(function(o){return o.Name==l})}},{key:"RealEstateCategoryChange",value:function(l){this.SelectedCategory=this.Categories.find(function(o){return o.Name==l})}},{key:"AddNumber",value:function(l,o,n,u,y){"number"!=typeof l[o]&&(l[o]=0),l[o]+=n,"number"==typeof u&&l[o]<u&&(l[o]=u),"number"==typeof y&&l[o]>y&&(l[o]=y)}},{key:"onResize",value:function(){this.changeDetectorRef.detectChanges()}},{key:"onMapReady",value:function(l){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function o(){var u,y,n=this;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.Map=l,g.next=3,SystemJS.import("app/markers");case 3:return this.MarkerExtension=g.sent,this.MarkerExtension.ShopWindowMarker.setupGoogleMapShopWindowClickHost(this),this.MarkerExtension.ShopWindowMarker.titleClick="onMapWindowTitleClick",this.MarkerExtension.ShopWindowMarker.itemClick="onMapWindowItemClick",this.MarkerExtension.RentalWindowMarker.setupGoogleMapRentalWindowClickHost(this),this.MarkerExtension.RentalWindowMarker.titleClick="onMapWindowRentalClick",this.MarkerExtension.RealEstateWindowMarker.setupGoogleMapRealEstateWindowClickHost(this),this.MarkerExtension.RealEstateWindowMarker.titleClick="onMapWindowRealEstateClick",this.MarkerExtension.SuburbMarker.onSuburbClick=this.onSuburbClick,this.MarkerExtension.RegionMarker.onRegionClick=this.onRegionClick,g.next=15,this.shop.ReadGeneralSetting();case 15:if(this.GeneralSetting=g.sent,u=util.getURLParameters(),y=void 0,u.t&&function(){var S=u.t;y=n.GeneralSetting.ShopTypes.find(function(h){return h.ID==S})}(),!y){g.next=34;break}if(!u.s){g.next=25;break}return g.next=23,this.loadShopFromParameter(y,u.s);case 23:g.next=32;break;case 25:if(!u.e){g.next=30;break}return g.next=28,this.loadEntryFromParameter(y,u.e);case 28:g.next=32;break;case 30:return g.next=32,this.selectShopType(y);case 32:g.next=36;break;case 34:return g.next=36,this.selectShopType(this.GeneralSetting.ShopTypes[0]);case 36:this.Map.addListener("bounds_changed",this.onMapBoundsChanged),this.Map.addListener("mousedown",this.onMapClickOrMouseDown);case 38:case"end":return g.stop();}},o,this)}))}},{key:"CloseFloatingView",value:function(){this.Mode="None",this.SelectedShop=void 0,this.SelectedEntry=void 0,this.SelectedAgent=void 0,this.SelectedContacts=void 0,this.SelectedRealEstateEntry=void 0,this.SelectedRentalEntry=void 0,this.ProductShowDetailIndex=void 0,this.HoursLimit=1,this.setLink(),this.changeDetectorRef.detectChanges()}},{key:"ShowMoreHours",value:function(){this.HoursLimit=void 0,this.changeDetectorRef.detectChanges()}},{key:"clearLink",value:function(){util.setURL(window.location.pathname)}},{key:"setLink",value:function(){this.SelectedShopType&&(this.SelectedShopType.GeoEntry?this.SelectedEntry?util.setURL(window.location.pathname+("?t="+this.SelectedShopType.ID+"&e="+this.SelectedEntry._id)):util.setURL(window.location.pathname+("?t="+this.SelectedShopType.ID)):this.SelectedShop?util.setURL(window.location.pathname+("?t="+this.SelectedShopType.ID+"&s="+this.SelectedShop._id)):util.setURL(window.location.pathname+("?t="+this.SelectedShopType.ID)))}},{key:"onMapWindowTitleClick",value:function(l,o){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:this.SelectedShop=this.Markers[l]&&this.Markers[l].Shop,this.SelectedItemID=null,this.SelectedShop&&(this.Mode="Detail",this.setLink(),o&&this.changeDetectorRef.detectChanges());case 3:case"end":return y.stop();}},n,this)}))}},{key:"SelectShopProductEntry",value:function(l){if(this.ProductShowDetailIndex=l,this.SelectedShop.CanQuery&&this.SelectedShop.Products[l]){var o=this.SelectedShop.Products[l];o.selected=!o.selected}if(this.SelectedShop.CanOrder&&this.SelectedShop.Products[l]){var n=this.SelectedShop.Products[l];"number"!=typeof n.count&&(n.count=0),n.count+=1}this.changeDetectorRef.detectChanges()}},{key:"ReduceSelectShopProductEntryCount",value:function(l,o){if(this.SelectedShop.CanOrder&&this.SelectedShop.Products[l]){var n=this.SelectedShop.Products[l];"number"!=typeof n.count&&(n.count=0),0<n.count&&(n.count-=1)}o.stopPropagation(),this.changeDetectorRef.detectChanges()}},{key:"SelectedShopQueryMessage",value:function(l){var o=[],n=[];return this.SelectedShop.CanQuery&&(o.push("Hi, "+(l?"%0A%0D":"")+"I am interested in "),this.SelectedShop.Products.forEach(function(u){u.selected&&n.push(u.Description)}),0<n.length?o.push(n.join(", ")):o.push("your products"),o.push(". Please contact me."+(l?"%0A%0D":"")+"Thank you!")),this.SelectedShop.CanOrder&&(o.push("Hi, "+(l?"%0A%0D":"")+"I want to order "),this.SelectedShop.Products.forEach(function(u){var y=u;y.count&&n.push(y.count+" x ["+u.Description+"]")}),o.push(n.join(", ")),o.push(". Please confirm."+(l?"%0A%0D":"")+" Thank you!")),o.join("")}},{key:"onMapWindowItemClick",value:function(l,o,n){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function u(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:this.SelectedShop=this.Markers[l]&&this.Markers[l].Shop,this.SelectedItemID=o,this.SelectedShop&&(this.Mode="Detail",this.setLink(),n&&this.changeDetectorRef.detectChanges());case 3:case"end":return m.stop();}},u,this)}))}},{key:"onMapWindowRentalClick",value:function(l,o){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function n(){var u,y;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.SelectedRentalEntry=void 0,u=this.Markers[l]&&this.Markers[l].Entry,this.SelectedEntry=u,!u){g.next=18;break}return this.Mode="Rental",this.SelectedAgent=void 0,this.SelectedContacts=[],o&&this.changeDetectorRef.detectChanges(),g.next=10,this.rental.FetchEntry(l);case 10:return this.SelectedRentalEntry=g.sent,g.next=13,this.rental.Fetch(u.Shop);case 13:y=g.sent,this.SelectedAgent=y.Agent,this.SelectedContacts=y.Contacts,this.setLink(),o&&this.changeDetectorRef.detectChanges();case 18:case"end":return g.stop();}},n,this)}))}},{key:"onMapWindowRealEstateClick",value:function(l,o){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function n(){var u,y;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.SelectedRealEstateEntry=void 0,u=this.Markers[l]&&this.Markers[l].Entry,this.SelectedEntry=u,!u){g.next=18;break}return this.Mode="RealEstate",this.SelectedAgent=void 0,this.SelectedContacts=[],o&&this.changeDetectorRef.detectChanges(),g.next=10,this.realestate.FetchEntry(l);case 10:return this.SelectedRealEstateEntry=g.sent,g.next=13,this.realestate.Fetch(u.Shop);case 13:y=g.sent,this.SelectedAgent=y.Agent,this.SelectedContacts=y.Contacts,this.setLink(),o&&this.changeDetectorRef.detectChanges();case 18:case"end":return g.stop();}},n,this)}))}},{key:"selectShopType",value:function(l,o){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.Mode="None",this.SelectedShopType==l){y.next=106;break}this.SelectedShopType=l,this.removeAllShops(),this.Categories=[],this.Products=[],this.CategoryProducts=[],this.setLink(),y.t0=this.SelectedShopType.Name,y.next="FruitVegetableShop"===y.t0?11:"MeatShop"===y.t0?18:"SeaFoodShop"===y.t0?25:"FastFoodShop"===y.t0?32:"PackedFoodShop"===y.t0?39:"GroceryShop"===y.t0?46:"FuelShop"===y.t0?53:"VehicleShop"===y.t0?60:"RealEstateShop"===y.t0?67:"RentalShop"===y.t0?74:"CarServiceRepairShop"===y.t0?81:"HouseServiceRepairShop"===y.t0?88:95;break;case 11:return y.next=13,this.fruit.Categories();case 13:return this.Categories=y.sent,y.next=16,this.fruit.Products();case 16:return this.Products=y.sent,y.abrupt("break",95);case 18:return y.next=20,this.meat.Categories();case 20:return this.Categories=y.sent,y.next=23,this.meat.Products();case 23:return this.Products=y.sent,y.abrupt("break",95);case 25:return y.next=27,this.seafood.Categories();case 27:return this.Categories=y.sent,y.next=30,this.seafood.Products();case 30:return this.Products=y.sent,y.abrupt("break",95);case 32:return y.next=34,this.fastfood.Categories();case 34:return this.Categories=y.sent,y.next=37,this.fastfood.Products();case 37:return this.Products=y.sent,y.abrupt("break",95);case 39:return y.next=41,this.packedfood.Categories();case 41:return this.Categories=y.sent,y.next=44,this.packedfood.Products();case 44:return this.Products=y.sent,y.abrupt("break",95);case 46:return y.next=48,this.grocery.Categories();case 48:return this.Categories=y.sent,y.next=51,this.grocery.Products();case 51:return this.Products=y.sent,y.abrupt("break",95);case 53:return y.next=55,this.fuel.Categories();case 55:return this.Categories=y.sent,y.next=58,this.fuel.Products();case 58:return this.Products=y.sent,y.abrupt("break",95);case 60:return y.next=62,this.vehicle.Categories();case 62:return this.Categories=y.sent,y.next=65,this.vehicle.Products();case 65:return this.Products=y.sent,y.abrupt("break",95);case 67:return y.next=69,this.realestate.Categories();case 69:return this.Categories=y.sent,y.next=72,this.realestate.Products();case 72:return this.Products=y.sent,y.abrupt("break",95);case 74:return y.next=76,this.rental.Categories();case 76:return this.Categories=y.sent,y.next=79,this.rental.Products();case 79:return this.Products=y.sent,y.abrupt("break",95);case 81:return y.next=83,this.carservice.Categories();case 83:return this.Categories=y.sent,y.next=86,this.carservice.Products();case 86:return this.Products=y.sent,y.abrupt("break",95);case 88:return y.next=90,this.houseservice.Categories();case 90:return this.Categories=y.sent,y.next=93,this.houseservice.Products();case 93:return this.Products=y.sent,y.abrupt("break",95);case 95:if(this.Categories.sort(this.MarkerExtension.IndexSorter),this.Products.sort(this.MarkerExtension.IndexSorter),this.Categories.splice(0,0,{_id:"All",Name:"All",Image:"https://rawgit.com/errisy/deploy/master/svg/allico.svg",Index:0,Products:[]}),this.Products.splice(0,0,{_id:"All",Name:"All",Image:"https://rawgit.com/errisy/deploy/master/svg/allico.svg",Index:0,Primary:void 0,Secondaries:[]}),this.CategoryProducts=this.Products.filter(function(){return!0}),this.SelectedCategory=this.Categories[0],this.SelectedProduct=this.Products[0],this.KeywordsService=this.completerService.local(this.CategoryProducts,"Name","Name"),o){y.next=106;break}return y.next=106,this.loadShops();case 106:case"end":return y.stop();}},n,this)}))}},{key:"loadShopFromParameter",value:function(l,o){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function n(){var u;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:u=void 0,this.selectShopType(l,!0),m.t0=l.Name,m.next="FruitVegetableShop"===m.t0?5:"MeatShop"===m.t0?9:"SeaFoodShop"===m.t0?13:"FastFoodShop"===m.t0?17:"PackedFoodShop"===m.t0?21:"GroceryShop"===m.t0?25:"FuelShop"===m.t0?29:"VehicleShop"===m.t0?33:"CarServiceRepairShop"===m.t0?37:"HouseServiceRepairShop"===m.t0?41:45;break;case 5:return m.next=7,this.fruit.Fetch(o);case 7:return u=m.sent,m.abrupt("break",45);case 9:return m.next=11,this.meat.Fetch(o);case 11:return u=m.sent,m.abrupt("break",45);case 13:return m.next=15,this.seafood.Fetch(o);case 15:return u=m.sent,m.abrupt("break",45);case 17:return m.next=19,this.fastfood.Fetch(o);case 19:return u=m.sent,m.abrupt("break",45);case 21:return m.next=23,this.packedfood.Fetch(o);case 23:return u=m.sent,m.abrupt("break",45);case 25:return m.next=27,this.grocery.Fetch(o);case 27:return u=m.sent,m.abrupt("break",45);case 29:return m.next=31,this.fuel.Fetch(o);case 31:return u=m.sent,m.abrupt("break",45);case 33:return m.next=35,this.vehicle.Fetch(o);case 35:return u=m.sent,m.abrupt("break",45);case 37:return m.next=39,this.carservice.Fetch(o);case 39:return u=m.sent,m.abrupt("break",45);case 41:return m.next=43,this.houseservice.Fetch(o);case 43:return u=m.sent,m.abrupt("break",45);case 45:u&&(this.SelectedShop=u,this.Mode="Detail",this.Map.setCenter(new google.maps.LatLng(u.Location.coordinates[1],u.Location.coordinates[0])),this.setLink());case 46:case"end":return m.stop();}},n,this)}))}},{key:"loadEntryFromParameter",value:function(l,o){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function n(){var u,y,m;return regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:u=void 0,this.selectShopType(l,!0),S.t0=l.Name,S.next="RealEstateShop"===S.t0?5:"RentalShop"===S.t0?17:29;break;case 5:return S.next=7,this.realestate.FetchEntry(o);case 7:return this.SelectedRealEstateEntry=S.sent,u=this.SelectedRealEstateEntry,this.SelectedEntry=u,S.next=12,this.realestate.Fetch(u.Shop);case 12:return y=S.sent,this.SelectedAgent=y.Agent,this.SelectedContacts=y.Contacts,this.Mode="RealEstate",S.abrupt("break",29);case 17:return S.next=19,this.rental.FetchEntry(o);case 19:return this.SelectedRentalEntry=S.sent,u=this.SelectedRentalEntry,this.SelectedEntry=u,S.next=24,this.rental.Fetch(u.Shop);case 24:return m=S.sent,this.SelectedAgent=m.Agent,this.SelectedContacts=m.Contacts,this.Mode="Rental",S.abrupt("break",29);case 29:u&&(this.Map.setCenter(new google.maps.LatLng(u.Location.coordinates[1],u.Location.coordinates[0])),this.setLink());case 30:case"end":return S.stop();}},n,this)}))}},{key:"loadShops",value:function(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function l(){var o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.SelectedShopType&&this.Map){u.next=2;break}return u.abrupt("return");case 2:o=this.Map.getZoom(),u.t0=this.SelectedShopType.Name,u.next="FruitVegetableShop"===u.t0?6:"MeatShop"===u.t0?28:"SeaFoodShop"===u.t0?50:"FastFoodShop"===u.t0?72:"PackedFoodShop"===u.t0?94:"GroceryShop"===u.t0?116:"FuelShop"===u.t0?138:"VehicleShop"===u.t0?160:"RealEstateShop"===u.t0?182:"RentalShop"===u.t0?204:"CarServiceRepairShop"===u.t0?226:"HouseServiceRepairShop"===u.t0?248:270;break;case 6:if(!(8>=o)){u.next=14;break}return u.t1=this,u.next=10,this.fruit.Regions(this.MapBoundaryQuery);case 10:u.t2=u.sent,u.t1.displayRegions.call(u.t1,u.t2),u.next=27;break;case 14:if(!(10>=o)){u.next=22;break}return u.t3=this,u.next=18,this.fruit.Suburbs(this.MapBoundaryQuery);case 18:u.t4=u.sent,u.t3.displaySuburbs.call(u.t3,u.t4),u.next=27;break;case 22:return u.t5=this,u.next=25,this.fruit.Shops(this.MapBoundaryQuery);case 25:u.t6=u.sent,u.t5.displayShops.call(u.t5,u.t6);case 27:return u.abrupt("break",270);case 28:if(!(8>=o)){u.next=36;break}return u.t7=this,u.next=32,this.meat.Regions(this.MapBoundaryQuery);case 32:u.t8=u.sent,u.t7.displayRegions.call(u.t7,u.t8),u.next=49;break;case 36:if(!(10>=o)){u.next=44;break}return u.t9=this,u.next=40,this.meat.Suburbs(this.MapBoundaryQuery);case 40:u.t10=u.sent,u.t9.displaySuburbs.call(u.t9,u.t10),u.next=49;break;case 44:return u.t11=this,u.next=47,this.meat.Shops(this.MapBoundaryQuery);case 47:u.t12=u.sent,u.t11.displayShops.call(u.t11,u.t12);case 49:return u.abrupt("break",270);case 50:if(!(8>=o)){u.next=58;break}return u.t13=this,u.next=54,this.seafood.Regions(this.MapBoundaryQuery);case 54:u.t14=u.sent,u.t13.displayRegions.call(u.t13,u.t14),u.next=71;break;case 58:if(!(10>=o)){u.next=66;break}return u.t15=this,u.next=62,this.seafood.Suburbs(this.MapBoundaryQuery);case 62:u.t16=u.sent,u.t15.displaySuburbs.call(u.t15,u.t16),u.next=71;break;case 66:return u.t17=this,u.next=69,this.seafood.Shops(this.MapBoundaryQuery);case 69:u.t18=u.sent,u.t17.displayShops.call(u.t17,u.t18);case 71:return u.abrupt("break",270);case 72:if(!(8>=o)){u.next=80;break}return u.t19=this,u.next=76,this.fastfood.Regions(this.MapBoundaryQuery);case 76:u.t20=u.sent,u.t19.displayRegions.call(u.t19,u.t20),u.next=93;break;case 80:if(!(10>=o)){u.next=88;break}return u.t21=this,u.next=84,this.fastfood.Suburbs(this.MapBoundaryQuery);case 84:u.t22=u.sent,u.t21.displaySuburbs.call(u.t21,u.t22),u.next=93;break;case 88:return u.t23=this,u.next=91,this.fastfood.Shops(this.MapBoundaryQuery);case 91:u.t24=u.sent,u.t23.displayShops.call(u.t23,u.t24);case 93:return u.abrupt("break",270);case 94:if(!(8>=o)){u.next=102;break}return u.t25=this,u.next=98,this.packedfood.Regions(this.MapBoundaryQuery);case 98:u.t26=u.sent,u.t25.displayRegions.call(u.t25,u.t26),u.next=115;break;case 102:if(!(10>=o)){u.next=110;break}return u.t27=this,u.next=106,this.packedfood.Suburbs(this.MapBoundaryQuery);case 106:u.t28=u.sent,u.t27.displaySuburbs.call(u.t27,u.t28),u.next=115;break;case 110:return u.t29=this,u.next=113,this.packedfood.Shops(this.MapBoundaryQuery);case 113:u.t30=u.sent,u.t29.displayShops.call(u.t29,u.t30);case 115:return u.abrupt("break",270);case 116:if(!(8>=o)){u.next=124;break}return u.t31=this,u.next=120,this.grocery.Regions(this.MapBoundaryQuery);case 120:u.t32=u.sent,u.t31.displayRegions.call(u.t31,u.t32),u.next=137;break;case 124:if(!(10>=o)){u.next=132;break}return u.t33=this,u.next=128,this.grocery.Suburbs(this.MapBoundaryQuery);case 128:u.t34=u.sent,u.t33.displaySuburbs.call(u.t33,u.t34),u.next=137;break;case 132:return u.t35=this,u.next=135,this.grocery.Shops(this.MapBoundaryQuery);case 135:u.t36=u.sent,u.t35.displayShops.call(u.t35,u.t36);case 137:return u.abrupt("break",270);case 138:if(!(8>=o)){u.next=146;break}return u.t37=this,u.next=142,this.fuel.Regions(this.MapBoundaryQuery);case 142:u.t38=u.sent,u.t37.displayRegions.call(u.t37,u.t38),u.next=159;break;case 146:if(!(10>=o)){u.next=154;break}return u.t39=this,u.next=150,this.fuel.Suburbs(this.MapBoundaryQuery);case 150:u.t40=u.sent,u.t39.displaySuburbs.call(u.t39,u.t40),u.next=159;break;case 154:return u.t41=this,u.next=157,this.fuel.Shops(this.MapBoundaryQuery);case 157:u.t42=u.sent,u.t41.displayShops.call(u.t41,u.t42);case 159:return u.abrupt("break",270);case 160:if(!(8>=o)){u.next=168;break}return u.t43=this,u.next=164,this.vehicle.Regions(this.MapBoundaryQuery);case 164:u.t44=u.sent,u.t43.displayRegions.call(u.t43,u.t44),u.next=181;break;case 168:if(!(10>=o)){u.next=176;break}return u.t45=this,u.next=172,this.vehicle.Suburbs(this.MapBoundaryQuery);case 172:u.t46=u.sent,u.t45.displaySuburbs.call(u.t45,u.t46),u.next=181;break;case 176:return u.t47=this,u.next=179,this.vehicle.Shops(this.MapBoundaryQuery);case 179:u.t48=u.sent,u.t47.displayShops.call(u.t47,u.t48);case 181:return u.abrupt("break",270);case 182:if(!(8>=o)){u.next=190;break}return u.t49=this,u.next=186,this.realestate.Regions(this.MapBoundaryQuery);case 186:u.t50=u.sent,u.t49.displayRegions.call(u.t49,u.t50),u.next=203;break;case 190:if(!(12>=o)){u.next=198;break}return u.t51=this,u.next=194,this.realestate.Suburbs(this.MapBoundaryQuery);case 194:u.t52=u.sent,u.t51.displaySuburbs.call(u.t51,u.t52),u.next=203;break;case 198:return u.t53=this,u.next=201,this.realestate.EntriesOnMap(this.RealEstateDetailQuery);case 201:u.t54=u.sent,u.t53.displayRealEstates.call(u.t53,u.t54);case 203:return u.abrupt("break",270);case 204:if(!(8>=o)){u.next=212;break}return u.t55=this,u.next=208,this.rental.Regions(this.MapBoundaryQuery);case 208:u.t56=u.sent,u.t55.displayRegions.call(u.t55,u.t56),u.next=225;break;case 212:if(!(12>=o)){u.next=220;break}return u.t57=this,u.next=216,this.rental.Suburbs(this.MapBoundaryQuery);case 216:u.t58=u.sent,u.t57.displaySuburbs.call(u.t57,u.t58),u.next=225;break;case 220:return u.t59=this,u.next=223,this.rental.EntriesOnMap(this.RentalDetailQuery);case 223:u.t60=u.sent,u.t59.displayRentals.call(u.t59,u.t60);case 225:return u.abrupt("break",270);case 226:if(!(8>=o)){u.next=234;break}return u.t61=this,u.next=230,this.carservice.Regions(this.MapBoundaryQuery);case 230:u.t62=u.sent,u.t61.displayRegions.call(u.t61,u.t62),u.next=247;break;case 234:if(!(10>=o)){u.next=242;break}return u.t63=this,u.next=238,this.carservice.Suburbs(this.MapBoundaryQuery);case 238:u.t64=u.sent,u.t63.displaySuburbs.call(u.t63,u.t64),u.next=247;break;case 242:return u.t65=this,u.next=245,this.carservice.Shops(this.MapBoundaryQuery);case 245:u.t66=u.sent,u.t65.displayShops.call(u.t65,u.t66);case 247:return u.abrupt("break",270);case 248:if(!(8>=o)){u.next=256;break}return u.t67=this,u.next=252,this.houseservice.Regions(this.MapBoundaryQuery);case 252:u.t68=u.sent,u.t67.displayRegions.call(u.t67,u.t68),u.next=269;break;case 256:if(!(10>=o)){u.next=264;break}return u.t69=this,u.next=260,this.houseservice.Suburbs(this.MapBoundaryQuery);case 260:u.t70=u.sent,u.t69.displaySuburbs.call(u.t69,u.t70),u.next=269;break;case 264:return u.t71=this,u.next=267,this.houseservice.Shops(this.MapBoundaryQuery);case 267:u.t72=u.sent,u.t71.displayShops.call(u.t71,u.t72);case 269:return u.abrupt("break",270);case 270:case"end":return u.stop();}},l,this)}))}},{key:"selectCategory",value:function(l){var o=this;switch(this.SelectedCategory=l,this.Mode="None",this.SelectedShopType.Name){case"RentalShop":this.RentalQuery.Category=this.SelectedCategory.Name;break;case"RealEstateShop":this.RealEstateQuery.Category=this.SelectedCategory.Name;break;case"VehicleShop":break;default:"All"==l._id?this.CategoryProducts=this.Products.filter(function(){return!0}):(this.CategoryProducts=l.Products?this.Products.filter(function(n){return l.Products.some(function(u){return u==n._id})}):[],this.CategoryProducts.splice(0,0,this.Products[0]));}this.SelectedProduct&&!this.CategoryProducts.some(function(n){return n._id==o.SelectedProduct._id})&&(this.SelectedProduct=this.CategoryProducts[0]),this.KeywordsService=this.completerService.local(this.CategoryProducts,"Name","Name"),this.updateFilter()}},{key:"selectProduct",value:function(l){var o=this;switch(this.SelectedShopType.Name){case"RentalShop":(function(){var n=rental_util_1.RentalProductQuery(l);"Entire Propery"!=n.Category||o.RentalEntireProperty.some(function(u){return u==o.RentalQuery.Category})?o.SelectedCategory=o.Categories.find(function(u){return u.Name==n.Category}):(o.RentalQuery.Category=n.Category,o.SelectedCategory=o.Categories.find(function(u){return u.Name==n.Category}),delete n.Category),util.setField(o.RentalQuery,n)})();break;case"RealEstateShop":(function(){var n=realestate_util_1.RealEstateProductQuery(l);"All Buildings"!=n.Category||o.RealEstateBuilding.some(function(u){return u==o.RealEstateQuery.Category})?o.SelectedCategory=o.Categories.find(function(u){return u.Name==n.Category}):(o.RealEstateQuery.Category=n.Category,o.SelectedCategory=o.Categories.find(function(u){return u.Name==n.Category}),delete n.Category),util.setField(o.RealEstateQuery,n)})();break;default:}this.SelectedProduct=l,this.Mode="None",this.updateFilter()}},{key:"enableKeywords",value:function(){this.isKeywordsEditing=!0,this.changeDetectorRef.detectChanges(),this.autocomplete.SetFocus()}},{key:"onKeywordsFocused",value:function(){this.isKeywordsEditing=!0}},{key:"onKeywordsKeydown",value:function(l){"Enter"==l.key&&this.updateFilter()}},{key:"applyKeywords",value:function(){this.isKeywordsEditing=!1,this.updateFilter()}},{key:"cancelKeywords",value:function(){this.isKeywordsEditing=!1,this.Keywords="",this.updateFilter()}},{key:"removeAllShops",value:function(){for(var l in this.Markers){var o=this.Markers[l];o.setMap(void 0)}this.ItemsDiffer.clear(),this.Markers={}}},{key:"recordPrevious",value:function(){this.PreviousFilters.SelectedCategory=this.SelectedCategory,this.PreviousFilters.SelectedProduct=this.SelectedProduct,this.PreviousFilters.Keywords=this.Keywords,this.PreviousFilters.Products=this.CategoryProducts}},{key:"displaySuburbs",value:function(l){var o=this,n=this.ItemsDiffer.diff(l);this.ItemsDiffer.arr=l,n.added.forEach(function(u){var y=new o.MarkerExtension.SuburbMarker({map:o.Map,icon:{url:"/app/svglabel.rpc.js?svg-label&"+u.Count,size:new google.maps.Size(32,48),scaledSize:new google.maps.Size(32,48),anchor:new google.maps.Point(16,48)},animation:google.maps.Animation.DROP,clickable:!0,position:new google.maps.LatLng(u.Location.coordinates[1],u.Location.coordinates[0])});y.Suburb=u,o.Markers[u._id]=y}),n.removed.forEach(function(u){var y=o.Markers[u._id];y.destroy(),delete o.Markers[u._id]}),this.recordPrevious()}},{key:"displayRegions",value:function(l){var o=this,n=this.ItemsDiffer.diff(l);this.ItemsDiffer.arr=l,n.added.forEach(function(u){var y=new o.MarkerExtension.RegionMarker({map:o.Map,icon:{url:"/app/svglabel.rpc.js?svg-label&"+u.Count,size:new google.maps.Size(32,48),scaledSize:new google.maps.Size(32,48),anchor:new google.maps.Point(16,48)},animation:google.maps.Animation.DROP,clickable:!0,position:new google.maps.LatLng(u.Location.coordinates[1],u.Location.coordinates[0])});y.Region=u,o.Markers[u._id]=y}),n.removed.forEach(function(u){var y=o.Markers[u._id];y.destroy(),delete o.Markers[u._id]}),this.recordPrevious()}},{key:"displayShops",value:function(l){var o=this,n=this.ItemsDiffer.diff(l);this.ItemsDiffer.arr=l,n.added.forEach(function(u){var y=new o.MarkerExtension.ShopWindowMarker({map:o.Map,icon:o.MarkerExtension.ShopIcon,animation:google.maps.Animation.DROP,clickable:!0,position:new google.maps.LatLng(u.Location.coordinates[1],u.Location.coordinates[0])});y.Shop=u,y.BuildShop(o.SelectedCategory,o.SelectedProduct,o.Keywords,o.CategoryProducts),y.hasEntries&&y.showInfoWindow(),o.Markers[u._id]=y}),n.removed.forEach(function(u){var y=o.Markers[u._id];y.destroy(),delete o.Markers[u._id]}),this.isFiltersChanged&&n.retained.forEach(function(u){var y=o.Markers[u._id];y.BuildShop(o.SelectedCategory,o.SelectedProduct,o.Keywords,o.CategoryProducts),y.hasEntries&&y.showInfoWindow()}),this.recordPrevious()}},{key:"displayRealEstates",value:function(l){var o=this,n=this.ItemsDiffer.diff(l);this.ItemsDiffer.arr=l,n.added.forEach(function(u){var y=new o.MarkerExtension.RealEstateWindowMarker({map:o.Map,icon:o.MarkerExtension.HouseIcon,animation:google.maps.Animation.DROP,clickable:!0,position:new google.maps.LatLng(u.Location.coordinates[1],u.Location.coordinates[0])});y.Entry=u,y.BuildEntry(o.SelectedCategory,o.SelectedProduct,o.Keywords,o.CategoryProducts),o.Markers[u._id]=y}),n.removed.forEach(function(u){var y=o.Markers[u._id];y.destroy(),delete o.Markers[u._id]}),this.recordPrevious()}},{key:"displayRentals",value:function(l){var o=this,n=this.ItemsDiffer.diff(l);this.ItemsDiffer.arr=l,n.added.forEach(function(u){var y=new o.MarkerExtension.RentalWindowMarker({map:o.Map,icon:o.MarkerExtension.HouseIcon,animation:google.maps.Animation.DROP,clickable:!0,position:new google.maps.LatLng(u.Location.coordinates[1],u.Location.coordinates[0])});y.Entry=u,y.BuildEntry(o.SelectedCategory,o.SelectedProduct,o.Keywords,o.CategoryProducts),o.Markers[u._id]=y}),n.removed.forEach(function(u){var y=o.Markers[u._id];y.destroy(),delete o.Markers[u._id]}),this.recordPrevious()}},{key:"updateFilter",value:function(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function l(){var o,n;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(this.SelectedShopType&&this.Map){y.next=2;break}return y.abrupt("return");case 2:y.t0=this.SelectedShopType.Name,y.next="RealEstateShop"===y.t0?5:"RentalShop"===y.t0?12:19;break;case 5:if(!(12<this.Map.getZoom())){y.next=11;break}return y.t1=this,y.next=9,this.realestate.EntriesOnMap(this.RealEstateDetailQuery);case 9:y.t2=y.sent,y.t1.displayRealEstates.call(y.t1,y.t2);case 11:return y.abrupt("break",21);case 12:if(!(12<this.Map.getZoom())){y.next=18;break}return y.t3=this,y.next=16,this.rental.EntriesOnMap(this.RentalDetailQuery);case 16:y.t4=y.sent,y.t3.displayRentals.call(y.t3,y.t4);case 18:return y.abrupt("break",21);case 19:if(this.isFiltersChanged){for(o in this.Markers)n=this.Markers[o],n.BuildShop(this.SelectedCategory,this.SelectedProduct,this.Keywords,this.CategoryProducts),n.hasEntries&&n.showInfoWindow();this.PreviousFilters.SelectedCategory=this.SelectedCategory,this.PreviousFilters.SelectedProduct=this.SelectedProduct,this.PreviousFilters.Keywords=this.Keywords,this.PreviousFilters.Products=this.CategoryProducts}else;return y.abrupt("break",21);case 21:case"end":return y.stop();}},l,this)}))}},{key:"MapBoundaryQuery",get:function(){if(this.Map){var l=this.Map.getBounds(),o=l.getNorthEast(),n=l.getSouthWest(),u=o.lng(),y=o.lat(),m=n.lng(),g=n.lat(),S=this.Map.getBounds().toSpan();return 360<=S.lng()?{$geoWithin:{$box:[[-180,g],[180,y]]}}:u>=m?{$geoWithin:{$box:[[m,g],[u,y]]}}:0>m?{$geoWithin:{$geometry:{type:"MultiPolygon",coordinates:[util.geometryBox(-180,u,y,g),util.geometryBox(m,20,y,g),util.geometryBox(20,180,y,g)]}}}:0<u?{$geoWithin:{$geometry:{type:"MultiPolygon",coordinates:[util.geometryBox(-180,-20,y,g),util.geometryBox(-20,u,y,g),util.geometryBox(m,180,y,g)]}}}:{$geoWithin:{$geometry:{type:"MultiPolygon",coordinates:[util.geometryBox(-180,u,y,g),util.geometryBox(m,180,y,g)]}}}}}},{key:"Location",get:function(){return this.location},set:function(l){util.cookie.set("lng",l.x+""),util.cookie.set("lat",l.y+""),this.location=l}},{key:"AdditionalPanelHeight",get:function(){return window.innerHeight-88+"px"}},{key:"AdditionalPanelWidth",get:function(){return window.innerWidth-12+"px"}},{key:"RentalDetailQuery",get:function(){var l={Price:{$gte:this.RentalQuery.PriceFrom,$lte:this.RentalQuery.PriceTo},Location:this.MapBoundaryQuery};switch("All"==this.RentalQuery.Category||("Entire Propery"==this.RentalQuery.Category?l.Category={$in:this.RentalEntirePropertyTypes}:l.Category=this.RentalQuery.Category),this.RentalQuery.Category){case"Room":this.RentalQuery.KeyLock&&(l["RentalRoom.CanLock"]=!0),this.RentalQuery.IsQuiteStreet&&(l.IsQuiteStreet=!0),this.RentalQuery.HasPrivateBathroom&&(l["RentalRoom.Bathroom"]="Private"),this.RentalQuery.HasPrivateToilet&&(l["RentalRoom.Toilet"]="Private"),this.RentalQuery.HasPrivateKitchen&&(l["RentalRoom.Kitchen"]="Private"),this.RentalQuery.HasPrivateLaundry&&(l["RentalRoom.Laundry"]="Private"),this.RentalQuery.HasPrivateGarageOrCarPort&&(l.CarParking={$in:["Private Carport","Private Garage"]}),l["RentalRoom.RoomSizeInSquareMeter"]={$gte:this.RentalQuery.RoomSizeFrom,$lte:this.RentalQuery.RoomSizeTo};break;case"Unit":case"Apartment":case"Townhouse":case"House":l["Building.NumberOfBedrooms"]={$gte:this.RentalQuery.BedroomFrom,$lte:this.RentalQuery.BedroomTo},l["Building.NumberOfToilets"]={$gte:this.RentalQuery.ToiletFrom,$lte:this.RentalQuery.ToiletTo},l["Building.NumberOfBathrooms"]={$gte:this.RentalQuery.BathroomFrom,$lte:this.RentalQuery.BathroomTo};break;case"All":case"Bedroom Share":}return l}},{key:"RealEstateDetailQuery",get:function(){var l=this,o={Location:this.MapBoundaryQuery};if("All"==this.RealEstateQuery.Category||("All Buildings"==this.RealEstateQuery.Category?o.Category={$in:["Unit","Apartment","Multiple Units","Townhouse","House"]}:o.Category=this.RealEstateQuery.Category),this.RealEstateQuery.IsQuiteStreet&&(o.IsQuiteStreet=!0),this.RealEstateBuilding.some(function(n){return n==l.RealEstateQuery.Category}))switch(o["MainBuilding.NumberOfBedrooms"]={$gte:this.RealEstateQuery.BedroomFrom,$lte:this.RealEstateQuery.BedroomTo},o["MainBuilding.NumberOfToilets"]={$gte:this.RealEstateQuery.ToiletFrom,$lte:this.RealEstateQuery.ToiletTo},o["MainBuilding.NumberOfBathrooms"]={$gte:this.RealEstateQuery.BathroomFrom,$lte:this.RealEstateQuery.BathroomTo},o["MainBuilding.NumberOfStories"]={$gte:this.RealEstateQuery.NumberOfStoriesFrom,$lte:this.RealEstateQuery.NumberOfStoriesTo},this.RealEstateQuery.StructuralMaterial){case"Any":break;case"Non-Timber":o["MainBuilding.StructuralMaterials"]={$nin:"Timber"};break;default:o["MainBuilding.StructuralMaterials"]={$in:this.RealEstateQuery.StructuralMaterial};}switch(this.RealEstateWithPrivateYard.some(function(n){return n==l.RealEstateQuery.Category})&&(this.RealEstateQuery.HasPool&&(o.HasGrannyFlat=!0),this.RealEstateQuery.HasGrannyFlat&&(o["Land.NumberOfPool"]={$gt:0}),"Any"!=this.RealEstateQuery.WallOrFence&&(o["Land.WallOrFenceCoverage"]=this.RealEstateQuery.WallOrFence)),this.RealEstateWithLand.some(function(n){return n==l.RealEstateQuery.Category})&&(o["Land.LandSize"]={$gte:this.RealEstateQuery.LandSizeFrom,$lte:this.RealEstateQuery.LandSizeTo}),this.RealEstateQuery.PriceStrategy){case"Any":break;case"Explicit":this.RealEstateQuery.IncludeInexplicit?o={$and:[{$or:[{$and:[{Price:{$gte:this.RealEstateQuery.PriceFrom,$lte:this.RealEstateQuery.PriceTo}},{PriceStrategy:{$in:this.ExplicitPriceStrategyQuery}}]},{PriceStrategy:{$in:this.InexplicitPriceStrategyQuery}}]},o]}:(o.Price={$gte:this.RealEstateQuery.PriceFrom,$lte:this.RealEstateQuery.PriceTo},o.PriceStrategy={$in:this.ExplicitPriceStrategyQuery});break;case"Inexplicit":o.PriceStrategy={$in:this.InexplicitPriceStrategyQuery};break;case"Exact Price":case"Plus":case"Offers Over":this.RealEstateQuery.IncludeInexplicit?o={$and:[{$or:[{$and:[{Price:{$gte:this.RealEstateQuery.PriceFrom,$lte:this.RealEstateQuery.PriceTo}},{PriceStrategy:this.RealEstateQuery.PriceStrategy}]},{PriceStrategy:{$in:this.InexplicitPriceStrategyQuery}}]},o]}:(o.Price={$gte:this.RealEstateQuery.PriceFrom,$lte:this.RealEstateQuery.PriceTo},o.PriceStrategy=this.RealEstateQuery.PriceStrategy);break;case"POA":case"Submit Your Offer":case"Auction":o.PriceStrategy=this.RealEstateQuery.PriceStrategy;}return o}},{key:"isFiltersChanged",get:function(){return this.PreviousFilters.SelectedCategory!=this.SelectedCategory||this.PreviousFilters.SelectedProduct!=this.SelectedProduct||this.PreviousFilters.Keywords!=this.Keywords||this.PreviousFilters.Products!=this.CategoryProducts}}]),a}();__decorate([core_1.ViewChild("CopyMessageButton"),__metadata("design:type",core_1.ElementRef)],AppComponent.prototype,"CopyMessageButton",void 0),__decorate([core_1.ViewChild("MessageTextArea"),__metadata("design:type",core_1.ElementRef)],AppComponent.prototype,"MessageTextArea",void 0),__decorate([core_1.HostListener("window:resize",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AppComponent.prototype,"onResize",null),__decorate([core_1.ViewChild("autocomplete"),__metadata("design:type",errisy_completer_1.CompleterCmp)],AppComponent.prototype,"autocomplete",void 0),AppComponent=__decorate([core_1.Component({selector:"my-app",template:" <!--This page is the framework for the app--> <div class=\"app-frame\"> <div google-map [Lng]=\"location.x\" [Lat]=\"location.y\" [Zoom]=\"14\" (MapInit)=\"onMapReady($event);\" class=\"app-map\"> </div> <div class=\"app-nav\"> <div class=\"app-img-btn btn-border\" (click)=\"Mode='Type'\" *ngIf=\"!isKeywordsEditing\"> <img [src]=\"SelectedShopType.Image\" [title]=\"SelectedShopType.Title\" *ngIf=\"SelectedShopType\"> </div> <div class=\"app-img-btn btn-border\" (click)=\"Mode='Category'\" *ngIf=\"!isKeywordsEditing\"> <img [src]=\"SelectedCategory.Image\" [title]=\"SelectedCategory.Name\" *ngIf=\"SelectedCategory\"> </div> <div class=\"app-img-btn btn-border\" (click)=\"Mode='Product'\" *ngIf=\"!isKeywordsEditing\"> <img [src]=\"SelectedProduct.Image\" [title]=\"SelectedProduct.Name\" *ngIf=\"SelectedProduct\"> </div> <!--input class=\"keywords\" type=\"text\" [(ngModel)]=\"Keywords\" (focus)=\"onKeywordsFocused();\"/>--> <div class=\"input\" (click)=\"enableKeywords();\" [class.placeholder]=\"!Keywords\" *ngIf=\"!isKeywordsEditing\"> {{Keywords?Keywords:'Keywords'}} </div> <auto-completer #autocomplete class=\"keywords\" [(ngModel)]=\"Keywords\" (keydown)=\"onKeywordsKeydown($event)\" (focus)=\"onKeywordsFocused();\" searchFields=\"Name\" [dataService]=\"KeywordsService\" minSearchLength=\"1\" *ngIf=\"isKeywordsEditing\"></auto-completer> <div class=\"app-img-btn btn-border\" (click)=\"applyKeywords();\" *ngIf=\"isKeywordsEditing\"> <svg height=\"64\" width=\"64\" viewBox=\"0 0 64 64\"> <path d=\"M 6,38 l 20,20 l 30,-50\" stroke=\"black\" stroke-width=\"6\" fill-opacity=\"0\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/> </svg> </div> <div class=\"app-img-btn btn-border\" (click)=\"cancelKeywords();\" *ngIf=\"isKeywordsEditing\"> <svg height=\"64\" width=\"64\" viewBox=\"0 0 64 64\"> <path d=\"M 6,6 l 52,52 M 6,58 l 52,-52\" stroke=\"black\" stroke-width=\"6\" fill-opacity=\"0\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/> </svg> </div> <div class=\"app-img-btn btn-border list\" (click)=\"Mode='List'\" *ngIf=\"!isKeywordsEditing\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/list.svg\"> </div> </div> <div class=\"app-selector\" *ngIf=\"Mode=='Type'\"> <div class=\"selector-header\"> <span>Select Shop Type</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"Mode='None'\"></svg> </div> <div class=\"selector-body\"> <div *ngFor=\"let shoptype of GeneralSetting.ShopTypes;\" class=\"body-item\" (click)=\"selectShopType(shoptype);\"> <img src=\"{{shoptype.Image}}\"> <span>{{shoptype.Title}}</span> </div> </div> <div class=\"selector-footer\"> </div> </div> <div class=\"app-selector\" *ngIf=\"Mode=='Category'\"> <div class=\"selector-header\"> <span>Select Category</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"Mode='None'\"></svg> </div> <div class=\"selector-body\"> <div *ngFor=\"let category of Categories;\" class=\"body-item\" (click)=\"selectCategory(category);\"> <img src=\"{{category.Image}}\"> <span>{{category.Name}}</span> </div> </div> <div class=\"selector-footer\"> </div> </div> <div class=\"app-selector\" *ngIf=\"Mode=='Product'\"> <div class=\"selector-header\"> <span>Select Product</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"Mode='None'\"></svg> </div> <div class=\"selector-filter\"> <span class=\"filter-label\">Filter:</span> <input class=\"filter-value\" type=\"text\" [(ngModel)]=\"ProductFilter\"> <div class=\"filter-clear btn-border\" (click)=\"ProductFilter='';\"> <svg height=\"30\" width=\"30\" viewBox=\"0 0 64 64\"> <path d=\"M 6,6 l 52,52 M 6,58 l 52,-52\" stroke=\"black\" stroke-width=\"6\" fill-opacity=\"0\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/> </svg> </div> </div> <div class=\"selector-body\"> <div *ngFor=\"let product of CategoryProducts|filter:'Name':ProductFilter;\" class=\"body-item\" (click)=\"selectProduct(product);\"> <img src=\"{{product.Image}}\"> <span>{{product.Name}}</span> </div> </div> <div class=\"selector-footer\"> </div> </div> <!--Rental Query--> <div class=\"rental-query\" [style.height]=\"AdditionalPanelHeight\" [style.width]=\"AdditionalPanelWidth\" *ngIf=\"isKeywordsEditing && SelectedShopType && SelectedShopType.Name=='RentalShop'\"> <div class=\"select\"> <span>Category</span> <select [(ngModel)]=\"RentalQuery.Category\" (ngModelChange)=\"RentalCategoryChange($event)\"> <option value=\"All\">All</option> <option value=\"Room\">Room</option> <option value=\"Unit\">Unit</option> <option value=\"Apartment\">Apartment</option> <option value=\"Townhouse\">Townhouse</option> <option value=\"House\">House</option> <option value=\"Entire Propery\">All Entire Propery</option> <option value=\"Bedroom Share\">Bedroom Share</option> </select> </div> <div class=\"range\"> <span>Price</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'PriceFrom',-10, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RentalQuery.PriceFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'PriceFrom',10, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'PriceTo',-10, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RentalQuery.PriceTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'PriceTo',10, 0)\">+</div> </div> </div> </div> <div *ngIf=\"RentalQuery.Category=='Room'\"> <div checkbox [(Value)]=\"RentalQuery.KeyLock\" label=\"Key Lock\"></div> <div checkbox [(Value)]=\"RentalQuery.HasPrivateToilet\" label=\"Private Toilet\"></div> <div checkbox [(Value)]=\"RentalQuery.HasPrivateBathroom\" label=\"Private Bathroom\"></div> <div checkbox [(Value)]=\"RentalQuery.HasPrivateKitchen\" label=\"Private Kitchen\"></div> <div checkbox [(Value)]=\"RentalQuery.HasPrivateLaundry\" label=\"Private Laundry\"></div> <div checkbox [(Value)]=\"RentalQuery.HasPrivateGarageOrCarPort\" label=\"Private Car Park\"></div> </div> <div class=\"range\" *ngIf=\"RentalQuery.Category=='Room'\"> <span>Room Size</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'RoomSizeFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RentalQuery.RoomSizeFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'RoomSizeFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'RoomSizeTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RentalQuery.RoomSizeTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'RoomSizeTo',1, 0)\">+</div> </div> </div> </div> <div *ngIf=\"RentalQuery.Category|in:RentalEntireProperty\"> <div class=\"range\"> <span>Bedroom</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BedroomFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RentalQuery.BedroomFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BedroomFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BedroomTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RentalQuery.BedroomTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BedroomTo',1, 0)\">+</div> </div> </div> </div> <div class=\"range\"> <span>Toilet</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'ToiletFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RentalQuery.ToiletFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'ToiletFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'ToiletTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RentalQuery.ToiletTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'ToiletTo',1, 0)\">+</div> </div> </div> </div> <div class=\"range\"> <span>Bathroom</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BathroomFrom',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RentalQuery.BathroomFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BathroomFrom',1)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BathroomTo',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RentalQuery.BathroomTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BathroomTo',1)\">+</div> </div> </div> </div> </div> <div> <div checkbox [(Value)]=\"RentalQuery.IsQuiteStreet\" label=\"Quite Street\"></div> </div> </div> <!--Real Estate Query--> <div class=\"realestate-query\" [style.height]=\"AdditionalPanelHeight\" [style.width]=\"AdditionalPanelWidth\" *ngIf=\"isKeywordsEditing && SelectedShopType && SelectedShopType.Name=='RealEstateShop'\"> <div class=\"select\"> <span>Category</span> <select [(ngModel)]=\"RealEstateQuery.Category\" (ngModelChange)=\"RealEstateCategoryChange($event)\"> <option value=\"All\">All</option> <option value=\"Unit\">Unit</option> <option value=\"Apartment\">Apartment</option> <option value=\"Multiple Units\">Multiple Units</option> <option value=\"Townhouse\">Townhouse</option> <option value=\"House\">House</option> <option value=\"All Buildings\">All Buildings</option> <option value=\"Land\">Land</option> </select> </div> <div class=\"select\"> <span>Price Type</span> <select [(ngModel)]=\"RealEstateQuery.PriceStrategy\"> <option value=\"Any\">Any</option> <option value=\"Explicit\">Explicit</option> <option value=\"Inexplicit\">Inexplicit</option> <option value=\"Exact Price\">Exact Price</option> <option value=\"Plus\">Plus</option> <option value=\"Offers Over\">Offers Over</option> <option value=\"POA\">POA</option> <option value=\"Submit Your Offer\">Submit Your Offer</option> <option value=\"Auction\">Auction</option> </select> </div> <div *ngIf=\"RealEstateQuery.PriceStrategy|in:ExplicitPriceStrategies\"> <div checkbox [(Value)]=\"RealEstateQuery.IncludeInexplicit\" label=\"Include Inexplicit Prices\"></div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.PriceStrategy|in:ExplicitPriceStrategies\"> <span>Price</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'PriceFrom',-10000, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.PriceFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'PriceFrom',10000, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'PriceTo',-10000, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.PriceTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'PriceTo',10000, 0)\">+</div> </div> </div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateBuilding\"> <span>Bedroom</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BedroomFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BedroomTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomTo',1, 0)\">+</div> </div> </div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateBuilding\"> <span>Toilet</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'ToiletFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.ToiletFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'ToiletFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'ToiletTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.ToiletTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'ToiletTo',1, 0)\">+</div> </div> </div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateBuilding\"> <span>Bathroom</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BathroomFrom',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BathroomFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BathroomFrom',1)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BathroomTo',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BathroomTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BathroomTo',1)\">+</div> </div> </div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateBuilding\"> <span>Stories</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'NumberOfStoriesFrom',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.NumberOfStoriesFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'NumberOfStoriesFrom',1)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'NumberOfStoriesTo',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.NumberOfStoriesTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'NumberOfStoriesTo',1)\">+</div> </div> </div> </div> <div> <div checkbox [(Value)]=\"RealEstateQuery.IsQuiteStreet\" label=\"Quite Street\"></div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateWithPrivateYard\"> <span>Stories</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BedroomFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BedroomTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomTo',1, 0)\">+</div> </div> </div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateWithLand\"> <span>Land Size</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'LandSizeFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.LandSizeFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'LandSizeFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'LandSizeTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.LandSizeTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'LandSizeTo',1, 0)\">+</div> </div> </div> </div> <div *ngIf=\"RealEstateQuery.Category|in:RealEstateWithPrivateYard\"> <div checkbox [(Value)]=\"RealEstateQuery.HasPool\" label=\"Swimming Pool\"></div> </div> <div *ngIf=\"RealEstateQuery.Category|in:RealEstateWithPrivateYard\"> <div checkbox [(Value)]=\"RealEstateQuery.HasGrannyFlat\" label=\"Has Granny Flat\"></div> </div> <div class=\"select\" *ngIf=\"RealEstateQuery.Category|in:RealEstateWithPrivateYard\"> <span>Fence/Wall</span> <select [(ngModel)]=\"RealEstateQuery.WallOrFence\"> <option value=\"Any\">Any</option> <option value=\"All Sides\">All Sides</option> <option value=\"Only Between Neighbours\">Only Between Neighbours</option> <option value=\"Two Sides or Less\">Two Sides or Less</option> <option value=\"None\">None</option> </select> </div> <div class=\"select\"> <span>Structural Material</span> <select [(ngModel)]=\"RealEstateQuery.StructuralMaterial\"> <option value=\"Any\">Any</option> <option value=\"Timber\">Timber</option> <option value=\"Non-Timber\">Non-Timber</option> <option value=\"Concrete\">Concrete</option> <option value=\"Steel\">Steel</option> <option value=\"Bricks\">Bricks</option> </select> </div> </div> <!--Shop Details--> <div class=\"app-selector\" *ngIf=\"Mode=='Detail'\"> <!-- show the details of shop--> <div class=\"selector-header\"> <span>{{SelectedShop.Name}}</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"CloseFloatingView();\"></svg> </div> <div class=\"body\"> <div class=\"address\"> {{SelectedShop.StreetNumber}} {{SelectedShop.Street}}, {{SelectedShop.Suburb}}, {{SelectedShop.Region}}, {{SelectedShop.State}} {{SelectedShop.Postcode}}, {{SelectedShop.Country}} </div> <div class=\"opening-hours\"> <table cellspacing=\"0\" cellpadding=\"0\"> <tr *ngFor=\"let day of (SelectedShop|openninghours:HoursLimit); let Index = index;\" class=\"day-hours\" [class.selected]=\"Index==0\"> <td class=\"date\">{{day.Day}}</td> <td class=\"weekday\">{{day.Day | weekday}}</td> <td class=\"hours\" *ngIf=\"!day.Closed\"> <span *ngFor=\"let hours of day.OpeningHour\">{{hours.From}}-{{hours.To}}</span> </td> <td class=\"closed\" *ngIf=\"day.Closed\"> Closed </td> </tr> </table> <div class=\"more\" (click)=\"ShowMoreHours();\" *ngIf=\"HoursLimit\">more...</div> </div> <div class=\"section-title\" *ngIf=\"SelectedShop.CanQuery || SelectedShop.CanOrder\"> Products </div> <div class=\"instructions\" *ngIf=\"SelectedShop.CanQuery\"> <div class=\"holder\"> <div class=\"instruction\">Click or Tap product to select.</div> <div class=\"instruction\">Use the contact below to send query.</div> </div> </div> <div class=\"instructions\" *ngIf=\"SelectedShop.CanOrder\"> <div class=\"holder\"> <div class=\"instruction\">Click or Tap product to increase number to order.</div> <div class=\"instruction\">Use the SMS below to send order.</div> </div> </div> <div class=\"products\" *ngIf=\"SelectedShop.Products\"> <div *ngFor=\"let entry of SelectedShop.Products; let Index = index;\" class=\"item\" [class.showdetail]=\"entry.DetailDescription && Index==ProductShowDetailIndex\" [class.selected]=\"entry._id==SelectedItemID\" (click)=\"SelectShopProductEntry(Index);\"> <div class=\"info\"> <div class=\"image\" [style.background-image]=\"(entry.Images && entry.Images[0])?'url('+entry.Images[0]+')':''\"> <div class=\"selected\" *ngIf=\"entry.selected\"> <svg viewBox=\"0 0 512 512\"> <path fill=\"#f00\" d=\"M498.817,35.097C343.065,130.587,230.05,251.069,179.272,311.53L54.915,214.1L0,258.371l214.88,218.532  C251.863,382.177,368.985,197.04,512,65.499L498.817,35.097z\"/> </svg> </div> <div class=\"count\" *ngIf=\"entry.count\"> {{entry.count}} </div> <div class=\"reduce\" *ngIf=\"entry.count\" (click)=\"ReduceSelectShopProductEntryCount(Index, $event)\"> - </div> </div> <div class=\"detail\"> <div class=\"vehicle\" *ngIf=\"SelectedShopType.Name=='VehicleShop'\"> <div class=\"brand\">{{entry.Category}}</div> &nbsp; <div class=\"model\">{{entry.Model}}</div> </div> <div class=\"vehicle\" *ngIf=\"SelectedShopType.Name=='VehicleShop'\"> <div class=\"year\">({{entry.Year}})</div> &nbsp; <div class=\"odo\">{{entry.Odometer}}Km</div> </div> <span class=\"price\">${{entry.Price}}{{entry.Unit?('/'+entry.Unit):''}}</span> <span class=\"desc\">{{entry.Description}}</span> <div class=\"dates\" *ngIf=\"SelectedShopType.Name|nin:NoDateShopTypes\"><span class=\"operator\">From:</span> <span class=\"date\">{{entry.StartTime|datetime12}}</span></div> <div class=\"dates\" *ngIf=\"SelectedShopType.Name|nin:NoDateShopTypes\"><span class=\"operator\">To:</span><span class=\"date\">{{entry.EndTime|datetime12}}</span></div> </div> </div> <div class=\"detail\" *ngIf=\"entry.DetailDescription && Index==ProductShowDetailIndex\"> <div class=\"title\"> Detail Description </div> <div class=\"content\"> {{entry.DetailDescription}} </div> </div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedShop.CanQuery\"> Query </div> <div class=\"section-title\" *ngIf=\"SelectedShop.CanOrder\"> Order </div> <div class=\"instructions\" *ngIf=\"SelectedShop.CanOrder\"> <div class=\"holder\"> <div class=\"instruction\">Click or Tap Links to send email, make phone call, or send SMS.</div> </div> </div> <div class=\"contacts\" *ngIf=\"SelectedShop.CanQuery || SelectedShop.CanOrder\"> <!-- for query and order via email, phone, sms --> <div class=\"contact\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/email.svg\"> <a href=\"mailto:{{SelectedShop.Email}}?subject={{SelectedShop.CanQuery?'Query':'Order'}} from Smart Koala&body={{SelectedShopQueryMessage(true)}}\">{{SelectedShop.Email}}</a> </div> <div class=\"contact\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/phone.svg\"> <a href=\"tel:{{SelectedShop.Telephone}}\">{{SelectedShop.Telephone}}</a> </div> <div class=\"contact\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/mobile.svg\"> <a href=\"tel:{{SelectedShop.Mobile}}\">{{SelectedShop.Mobile}}</a> </div> <div class=\"contact\" (click)=\"buildSMS(SelectedShop.Mobile, SelectedShopQueryMessage())\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\"> <div>Send SMS</div> </div> </div> </div> </div> <!-- lists --> <div class=\"app-selector\" *ngIf=\"Mode=='List'\"> <div class=\"selector-header\"> <a class=\"join\" target=\"_managerment\" href=\"/management.html\">Show your products at Smart Koala</a> <svg btn-close width=\"36\" height=\"36\" (click)=\"Mode='None'\"></svg> </div> <div class=\"selector-list\" *ngIf=\"(SelectedShopType.Name|in:ShopListTypes) && ItemsDiffer.arr\"> <div class=\"shop\" *ngFor=\"let shop of ItemsDiffer.arr;\"> <span (click)=\"onMapWindowTitleClick(shop._id);\">{{shop.Name}}</span> <div> <div *ngFor=\"let entry of shop.Products\" (click)=\"onMapWindowItemClick(shop._id, entry._id);\"> <div class=\"image\" [style.background-image]=\"(entry.Images && entry.Images[0])?'url('+entry.Images[0]+')':''\"></div> <div> <div class=\"vehicle\" *ngIf=\"SelectedShopType.Name=='VehicleShop'\"> <div class=\"brand\">{{entry.Category}}</div> &nbsp; <div class=\"model\">{{entry.Model}}</div> </div> <div class=\"vehicle\" *ngIf=\"SelectedShopType.Name=='VehicleShop'\"> <div class=\"year\">({{entry.Year}})</div> &nbsp; <div class=\"odo\">{{entry.Odometer}}Km</div> </div> <span class=\"price\">${{entry.Price}}/{{entry.Unit}}</span> <span class=\"desc\">{{entry.Description}}</span> <div class=\"dates\" *ngIf=\"SelectedShopType.Name|nin:NoDateShopTypes\"><span class=\"operator\">From:</span> <span class=\"date\">{{entry.StartTime|datetime12}}</span></div> <div class=\"dates\" *ngIf=\"SelectedShopType.Name|nin:NoDateShopTypes\"><span class=\"operator\">To:</span><span class=\"date\">{{entry.EndTime|datetime12}}</span></div> </div> </div> </div> </div> </div> <div class=\"goe-list\" *ngIf=\"SelectedShopType.Name=='RealEstateShop' && Markers\"> <div class=\"marker\" *ngFor=\"let marker of (Markers|each)\" (click)=\"onMapWindowRealEstateClick(marker.Entry._id);\"> <div class=\"title\">{{marker.Entry|address}}</div> <div class=\"detail\"> <div class=\"image\" *ngIf=\"marker.Entry.Images && marker.Entry.Images[0]\" [style.background-image]=\"'url('+marker.Entry.Images[0]+')'\"></div> <div class=\"holder\"> <div class=\"section\"> <div class=\"field title\">{{marker.Entry.Category}}</div> <div class=\"field\">{{marker.Entry|realestateprice}}</div> <div class=\"field\" *ngIf=\"marker.Entry.Category=='Land'\">Size: {{marker.Entry.Land.LandSize}}M<sup>2</sup></div> <div class=\"field\" *ngIf=\"marker.Entry.Category!='Land'\"> <img class=\"unit\" title=\"Number of Stories\" src=\"https://rawgit.com/errisy/deploy/master/svg/stairs.svg\"> <span class=\"number\">{{marker.Entry.MainBuilding.NumberOfStories}}</span> <img class=\"unit\" title=\"Number of Bedrooms\" src=\"https://rawgit.com/errisy/deploy/master/svg/bedroom.svg\"> <span class=\"number\">{{marker.Entry.MainBuilding.NumberOfBedrooms}}</span> <img class=\"unit\" title=\"Number of Bathrooms\" src=\"https://rawgit.com/errisy/deploy/master/svg/bathroom.svg\"> <span class=\"number\">{{marker.Entry.MainBuilding.NumberOfBathrooms}}</span> <img class=\"unit\" title=\"Number of Toilets\" src=\"https://rawgit.com/errisy/deploy/master/svg/toilet.svg\"> <span class=\"number\">{{marker.Entry.MainBuilding.NumberOfToilets}}</span> </div> </div> </div> </div> </div> </div> <div class=\"goe-list\" *ngIf=\"SelectedShopType.Name=='RentalShop' && Markers\"> <div class=\"marker\" *ngFor=\"let marker of (Markers|each)\" (click)=\"onMapWindowRentalClick(marker.Entry._id);\"> <div class=\"title\">{{marker.Entry|address}}</div> <div class=\"detail\"> <div class=\"image\" *ngIf=\"marker.Entry.Images && marker.Entry.Images[0]\" [style.background-image]=\"'url('+marker.Entry.Images[0]+')'\"></div> <div class=\"holder\"> <div class=\"section\"> <div class=\"field title\">{{marker.Entry.Category}}</div> <div class=\"field\">${{marker.Entry.Price}}/Week</div> <div class=\"field\" *ngIf=\"marker.Entry.Category=='Room'\"> <img class=\"unit\" title=\"Key Lock\" *ngIf=\"marker.Entry.RentalRoom.CanLock\" src=\"https://rawgit.com/errisy/deploy/master/svg/lock.svg\"> <img class=\"unit\" title=\"Toilet\" src=\"https://rawgit.com/errisy/deploy/master/svg/toilet.svg\"> <span class=\"number\" [title]=\"marker.Entry.RentalRoom.Toilet\" [class.private]=\"marker.Entry.RentalRoom.Toilet=='Private'\">{{marker.Entry.RentalRoom.Toilet|privateshared}}</span> <img class=\"unit\" title=\"Bathroom\" src=\"https://rawgit.com/errisy/deploy/master/svg/bathroom.svg\"> <span class=\"number\" [title]=\"marker.Entry.RentalRoom.Bathroom\" [class.private]=\"marker.Entry.RentalRoom.Bathroom=='Private'\">{{marker.Entry.RentalRoom.Bathroom|privateshared}}</span> <img class=\"unit\" title=\"Laundry\" *ngIf=\"marker.Entry.RentalRoom.Laundry|in:['Private','Shared']\" src=\"https://rawgit.com/errisy/deploy/master/svg/laundry.svg\"> <span class=\"number\" [title]=\"marker.Entry.RentalRoom.Laundry\" [class.private]=\"marker.Entry.RentalRoom.Laundry=='Private'\" *ngIf=\"marker.Entry.RentalRoom.Laundry|in:['Private','Shared']\">{{marker.Entry.RentalRoom.Laundry|privateshared}}</span> <img class=\"unit\" title=\"Kitchen\" *ngIf=\"marker.Entry.RentalRoom.Kitchen|in:['Private','Shared']\" src=\"https://rawgit.com/errisy/deploy/master/svg/kitchen.svg\"> <span class=\"number\" [title]=\"marker.Entry.RentalRoom.Kitchen\" [class.private]=\"marker.Entry.RentalRoom.Kitchen=='Private'\" *ngIf=\"marker.Entry.RentalRoom.Kitchen|in:['Private','Shared']\">{{marker.Entry.RentalRoom.Kitchen|privateshared}}</span> </div> <div class=\"field\" *ngIf=\"marker.Entry.Category|in:RentalEntirePropertyTypes\"> <img class=\"unit\" title=\"Number of Stories\" src=\"https://rawgit.com/errisy/deploy/master/svg/stairs.svg\"> <span class=\"number\">{{marker.Entry.Building.NumberOfStories}}</span> <img class=\"unit\" title=\"Number of Bedrooms\" src=\"https://rawgit.com/errisy/deploy/master/svg/bedroom.svg\"> <span class=\"number\">{{marker.Entry.Building.NumberOfBedrooms}}</span> <img class=\"unit\" title=\"Number of Bathrooms\" src=\"https://rawgit.com/errisy/deploy/master/svg/bathroom.svg\"> <span class=\"number\">{{marker.Entry.Building.NumberOfBathrooms}}</span> <img class=\"unit\" title=\"Number of Toilets\" src=\"https://rawgit.com/errisy/deploy/master/svg/toilet.svg\"> <span class=\"number\">{{marker.Entry.Building.NumberOfToilets}}</span> </div> </div> </div> </div> </div> </div> </div> <!--detail for rental--> <div class=\"app-selector\" *ngIf=\"Mode=='Rental'\"> <!-- show the details for rental --> <div class=\"selector-header\"> <span>{{SelectedRentalEntry?(SelectedRentalEntry|address):'Loading...'}}</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"CloseFloatingView();\"></svg> </div> <div class=\"section-title\"> Price </div> <div class=\"facility-row\" *ngIf=\"SelectedRentalEntry\"> <div class=\"name\">Price</div> <div class=\"value\">${{SelectedRentalEntry.Price}}/Week</div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.RentalTerm\"> Price Terms </div> <div class=\"price-terms\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.RentalTerm\"> <div class=\"term\" *ngFor=\"let term of SelectedRentalEntry.RentalTerm.RentalPrices\"> <div class=\"range\"> {{term.TermMinDays}}-{{term.TermMaxDays}} Days </div> <div class=\"field\"> <div class=\"name\">Price</div> <div class=\"value\">${{term.PricePerDay}}/Day</div> </div> <div class=\"field\"> <div class=\"name\">Bond</div> <div class=\"value\">${{term.Bond}}</div> </div> <div class=\"field\"> <div class=\"name\">Tenant</div> <div class=\"value\">${{term.Tenant}}</div> </div> <div class=\"field\"> <div class=\"name\">Exit Cleaning</div> <div class=\"value\">{{term.ExitCleaning}}</div> </div> <div class=\"field\"> <div class=\"name\">Exit Fee</div> <div class=\"value\">{{term.ExitCleaningFee}}</div> </div> </div> </div> <div class=\"section-title\"> Images </div> <div class=\"selector-images\" *ngIf=\"SelectedRentalEntry\"> <div class=\"image\" [style.background-image]=\"image?'url('+image+')':''\" *ngFor=\"let image of SelectedRentalEntry.Images; let Index = index;\" (click)=\"ShowGallery(Index,SelectedRentalEntry.Images)\"> </div> </div> <div class=\"section-title\"> General Facilities </div> <div class=\"facility-row\" *ngIf=\"SelectedRentalEntry\"> <div class=\"name\">Car Parking</div> <div class=\"value\">{{SelectedRentalEntry.CarParking|join}}</div> </div> <div class=\"facility-row\" *ngIf=\"SelectedRentalEntry\"> <div class=\"name\">Quite Street</div> <div class=\"value\">{{SelectedRentalEntry.IsQuiteStreet}}</div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && (SelectedRentalEntry.Category|in:['Room','Bedroom Share'])\"> Room Rental </div> <div class=\"rental-room\" *ngIf=\"SelectedRentalEntry && (SelectedRentalEntry.Category|in:['Room','Bedroom Share'])\"> <!-- content for room --> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Room Size</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.RoomSizeInSquareMeter}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Window Size</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.WindowSizeInSquareMeter}}M<sup>2</sup></div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Beds</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.Beds|join}}</div> </div> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Key Lock</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.CanLock?'Yes':'No'}}</div> </div> <div class=\"facility\"> <div class=\"name\">Toilet</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.Toilet}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bathroom</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.Bathroom}}</div> </div> <div class=\"facility\"> <div class=\"name\">Kitchen</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.Kitchen}}</div> </div> <div class=\"facility\"> <div class=\"name\">Laundry</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.Laundry}}</div> </div> <div class=\"facility\"> <div class=\"name\">Living Room</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.LivingRoom}}</div> </div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && (SelectedRentalEntry.Category|in:['Room','Bedroom Share'])\"> Fees </div> <div class=\"rental-fees\" *ngIf=\"SelectedRentalEntry && (SelectedRentalEntry.Category|in:['Room','Bedroom Share'])\"> <div class=\"fee\"> <div class=\"name\">Electricity</div> <div class=\"value\">{{SelectedRentalEntry.Electricity}}</div> </div> <div class=\"fee\"> <div class=\"name\">Water</div> <div class=\"value\">{{SelectedRentalEntry.Water}}</div> </div> <div class=\"fee\"> <div class=\"name\">Gas</div> <div class=\"value\">{{SelectedRentalEntry.Gas}}</div> </div> <div class=\"fee\"> <div class=\"name\">Internet</div> <div class=\"value\">{{SelectedRentalEntry.Internet}}</div> </div> <div class=\"fee\"> <div class=\"name\">Telephone</div> <div class=\"value\">{{SelectedRentalEntry.Telephone}}</div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.Land && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Yard or Land </div> <div class=\"rental-property\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.Land && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <!-- rental property land --> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Land Size</div> <div class=\"value\">{{SelectedRentalEntry.Land.LandSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Paved Yard</div> <div class=\"value\">{{SelectedRentalEntry.Land.BuildingFloorArea}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Lawn Area</div> <div class=\"value\">{{SelectedRentalEntry.Land.YardLawnSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Pool Size</div> <div class=\"value\">{{SelectedRentalEntry.Land.TotalPoolSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Floor Area</div> <div class=\"value\">{{SelectedRentalEntry.Land.BuildingFloorArea}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRentalEntry.Land.NumberOfCarport}}</div> </div> <div class=\"facility\"> <div class=\"name\">Car Spaces</div> <div class=\"value\">{{SelectedRentalEntry.Land.NumberOfCarSpace}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Yard Pavement</div> <div class=\"value\">{{SelectedRentalEntry.Land.YardPavementType}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Enclose</div> <div class=\"value\">{{SelectedRentalEntry.Land.WallOrFenceType}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Fence/Wall</div> <div class=\"value\">{{SelectedRentalEntry.Land.WallOrFenceCoverage}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Lock Gate</div> <div class=\"value\">{{SelectedRentalEntry.Land.HasLockableGate}}</div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.Building && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Main Building </div> <div class=\"building\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.Building && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Year Built</div> <div class=\"value\">{{SelectedRentalEntry.Building.YearOfConstruction}}</div> </div> <div class=\"facility\"> <div class=\"name\">Stories</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfStories}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bedrooms</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfBedrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bathrooms</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfBathrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Toilets</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfToilets}}</div> </div> <div class=\"facility\"> <div class=\"name\">Kitchens</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfKitchens}}</div> </div> <div class=\"facility\"> <div class=\"name\">Living Rooms</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfLivingRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Dining Rooms</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfDiningRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Storages</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfStorageRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfCarports}}</div> </div> <div class=\"facility\"> <div class=\"name\">Pool</div> <div class=\"value\">{{SelectedRentalEntry.Building.HasSwimmingPool}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Outer Wall</div> <div class=\"value\">{{SelectedRentalEntry.Building.OuterWallMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Structure</div> <div class=\"value\">{{SelectedRentalEntry.Building.StructuralMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Roof</div> <div class=\"value\">{{SelectedRentalEntry.Building.RoofMaterial|join}}</div> </div> <div class=\"floors\"> <div class=\"title\"> Floor Plan </div> <div class=\"floor\" *ngFor=\"let floor of SelectedRentalEntry.Building.Floors\"> <div class=\"title\"> Level {{floor.Level}} </div> <div class=\"rooms\"> <div class=\"room\" *ngFor=\"let room of floor.Rooms\"> <div class=\"type\"> {{room.RoomType}} </div> <div class=\"field\"> <div class=\"name\">Floor Material</div> <div class=\"value\">{{room.FloorMaterial}}</div> </div> <div class=\"field\"> <div class=\"name\">Floor Color</div> <div class=\"value\">{{room.FloorColors}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Material</div> <div class=\"value\">{{room.InteriorWallMaterials|join}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Color</div> <div class=\"value\">{{room.InteriorWallColors}}</div> </div> </div> </div> </div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.GrannyFlat && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Granny Flat </div> <div class=\"building\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.GrannyFlat && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Year Built</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.YearOfConstruction}}</div> </div> <div class=\"facility\"> <div class=\"name\">Stories</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfStories}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bedrooms</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfBedrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bathrooms</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfBathrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Toilets</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfToilets}}</div> </div> <div class=\"facility\"> <div class=\"name\">Kitchens</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfKitchens}}</div> </div> <div class=\"facility\"> <div class=\"name\">Living Rooms</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfLivingRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Dining Rooms</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfDiningRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Storages</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfStorageRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfCarports}}</div> </div> <div class=\"facility\"> <div class=\"name\">Pool</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.HasSwimmingPool}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Outer Wall</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.OuterWallMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Structure</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.StructuralMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Roof</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.RoofMaterial|join}}</div> </div> <div class=\"floors\"> <div class=\"title\"> Floor Plan </div> <div class=\"floor\" *ngFor=\"let floor of SelectedRentalEntry.GrannyFlat.Floors\"> <div class=\"title\"> Level {{floor.Level}} </div> <div class=\"rooms\"> <div class=\"room\" *ngFor=\"let room of floor.Rooms\"> <div class=\"type\"> {{room.RoomType}} </div> <div class=\"field\"> <div class=\"name\">Floor Material</div> <div class=\"value\">{{room.FloorMaterial}}</div> </div> <div class=\"field\"> <div class=\"name\">Floor Color</div> <div class=\"value\">{{room.FloorColors}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Material</div> <div class=\"value\">{{room.InteriorWallMaterials|join}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Color</div> <div class=\"value\">{{room.InteriorWallColors}}</div> </div> </div> </div> </div> </div> </div> <div class=\"section-title\"> Instructions </div> <div class=\"instructions\"> <div class=\"title\">In the following sections:</div> <div class=\"holder\"> <div class=\"instruction\">Click or Tap Links to send email, make phone call, or send SMS.</div> <!--<div class=\"instruction\">Click or Tap phone links to call.</div>\r\n                <div class=\"instruction\">Click or Tap <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\" /> to send SMS.</div>--> </div> </div> <div class=\"section-title\"> {{SelectedAgent?'Agent':'Loading Agent...'}} </div> <div class=\"agent\" *ngIf=\"SelectedAgent\"> <div class=\"card\"> <div class=\"name\"> {{SelectedAgent.Name}} </div> <div class=\"detail\"> <div class=\"fields\"> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/link.svg\"> <div class=\"link\"> <a href=\"{{SelectedAgent.Link}}\" target=\"_agent_link_{{SelectedAgent.Name}}\">{{SelectedAgent.Link}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/phone.svg\"> <div class=\"link\"> <a href=\"tel:{{SelectedAgent.Phone}}\">{{SelectedAgent.Phone}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/mobile.svg\"> <div class=\"link\"> <a href=\"tel:{{SelectedAgent.Mobile}}\">{{SelectedAgent.Mobile}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\"> <div class=\"sms\" (click)=\"buildSMS(SelectedAgent.Mobile, 'I am interested in '+formatAddress(SelectedRentalEntry)+'. Please contact me.')\">Send SMS</div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/email.svg\"> <div class=\"link\"> <a href=\"mailto:{{SelectedAgent.Email}}?subject=Query from Smart Koala - {{SelectedRentalEntry|address}}&body=Hi {{SelectedAgent.Name}}, %0A%0DI am interested in {{SelectedRentalEntry|address}}, please contact me.%0A%0DThank you!%0A%0D\" target=\"_agent_email_{{SelectedAgent.Name}}\">{{SelectedAgent.Email}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/address.svg\"> <a href=\"{{'https://www.google.com.au/maps/?q='+SelectedAgent.Address}}\" target=\"_agent_address_{{SelectedAgent.Name}}\">{{SelectedAgent.Address}}</a> </div> </div> <div class=\"image\" [style.background-image]=\"SelectedAgent.Image?'url('+SelectedAgent.Image+')':''\"> </div> </div> </div> </div> <div class=\"section-title\"> {{SelectedContacts?'Contacts':'Loading Contacts...'}} </div> <div class=\"contacts\" *ngIf=\"SelectedContacts\"> <div class=\"card\" *ngFor=\"let contact of SelectedContacts\"> <div class=\"name\"> {{contact.Name}} </div> <div class=\"detail\"> <div class=\"fields\"> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/phone.svg\"> <div class=\"link\"> <a href=\"tel:{{contact.Phone}}\">{{contact.Phone}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/mobile.svg\"> <div class=\"link\"> <a href=\"tel:{{contact.Mobile}}\">{{contact.Mobile}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\"> <div class=\"sms\" (click)=\"buildSMS(contact.Mobile, 'I am interested in '+formatAddress(SelectedRentalEntry)+'. Please contact me.')\">Send SMS</div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/email.svg\"> <div class=\"link\"> <a href=\"mailto:{{contact.Email}}?subject=Query from Smart Koala - {{SelectedRentalEntry|address}}&body=Hi {{contact.Name}}, %0A%0DI am interested in {{SelectedRentalEntry|address}}, please contact me.%0A%0DThank you!%0A%0D\" target=\"_agent_link_{{contact.Name}}\">{{contact.Email}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/address.svg\"> <a href=\"{{'https://www.google.com.au/maps/?q='+contact.Address}}\" target=\"_agent_address_{{contact.Name}}\">{{contact.Address}}</a> </div> </div> <div class=\"image\" [style.background-image]=\"contact.Image?'url('+contact.Image+')':''\"> </div> </div> </div> </div> </div> <!--detail for real estate--> <div class=\"app-selector\" *ngIf=\"Mode=='RealEstate'\"> <!-- show the details for real estate --> <div class=\"selector-header\"> <span>{{SelectedRealEstateEntry?(SelectedRealEstateEntry|address):'Loading...'}}</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"CloseFloatingView();\"></svg> </div> <div class=\"section-title\"> Price </div> <div class=\"facility-row\" *ngIf=\"SelectedRealEstateEntry\"> <div class=\"name\">Price Type</div> <div class=\"value\">{{SelectedRealEstateEntry.PriceStrategy}}</div> </div> <div class=\"facility-row\" *ngIf=\"SelectedRealEstateEntry\"> <div class=\"name\">Price</div> <div class=\"value\">${{SelectedRealEstateEntry.Price}}</div> </div> <div class=\"section-title\"> Images </div> <div class=\"selector-images\" *ngIf=\"SelectedRealEstateEntry\"> <div class=\"image\" [style.background-image]=\"image?'url('+image+')':''\" *ngFor=\"let image of SelectedRealEstateEntry.Images; let Index = index;\" (click)=\"ShowGallery(Index,SelectedRealEstateEntry.Images)\"> </div> </div> <div class=\"section-title\"> Inspection Hours </div> <div class=\"opening-hours\" *ngIf=\"SelectedRealEstateEntry\"> <table cellspacing=\"0\" cellpadding=\"0\"> <tr *ngFor=\"let day of (SelectedRealEstateEntry|inspectionhours:HoursLimit); let Index = index;\" class=\"day-hours\" [class.selected]=\"Index==0\"> <td class=\"date\">{{day.Day}}</td> <td class=\"weekday\">{{day.Day | weekday}}</td> <td class=\"hours\" *ngIf=\"!day.Closed\"> <span *ngFor=\"let hours of day.OpeningHour\">{{hours.From}}-{{hours.To}}</span> </td> <td class=\"closed\" *ngIf=\"day.Closed\"> Closed </td> </tr> </table> <div class=\"more\" (click)=\"ShowMoreHours();\" *ngIf=\"HoursLimit\">more...</div> </div> <div class=\"section-title\"> General Facilities </div> <div class=\"facility-row\" *ngIf=\"SelectedRealEstateEntry\"> <div class=\"name\">Car Parking</div> <div class=\"value\">{{SelectedRealEstateEntry.CarParking|join}}</div> </div> <div class=\"facility-row\" *ngIf=\"SelectedRealEstateEntry\"> <div class=\"name\">Quite Street</div> <div class=\"value\">{{SelectedRealEstateEntry.IsQuiteStreet}}</div> </div> <div class=\"section-title\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.Land && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Yard or Land </div> <div class=\"building\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.Land && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <!-- rental property land --> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Land Size</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.LandSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Paved Yard</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.BuildingFloorArea}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Lawn Area</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.YardLawnSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Pool Size</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.TotalPoolSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Floor Area</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.BuildingFloorArea}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.NumberOfCarport}}</div> </div> <div class=\"facility\"> <div class=\"name\">Car Spaces</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.NumberOfCarSpace}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Yard Pavement</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.YardPavementType}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Enclose</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.WallOrFenceType}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Fence/Wall</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.WallOrFenceCoverage}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Lock Gate</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.HasLockableGate}}</div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.MainBuilding && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Main Building </div> <div class=\"building\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.MainBuilding && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Year Built</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.YearOfConstruction}}</div> </div> <div class=\"facility\"> <div class=\"name\">Stories</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfStories}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bedrooms</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfBedrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bathrooms</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfBathrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Toilets</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfToilets}}</div> </div> <div class=\"facility\"> <div class=\"name\">Kitchens</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfKitchens}}</div> </div> <div class=\"facility\"> <div class=\"name\">Living Rooms</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfLivingRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Dining Rooms</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfDiningRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Storages</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfStorageRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfCarports}}</div> </div> <div class=\"facility\"> <div class=\"name\">Pool</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.HasSwimmingPool}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Outer Wall</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.OuterWallMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Structure</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.StructuralMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Roof</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.RoofMaterial|join}}</div> </div> <div class=\"floors\"> <div class=\"title\"> Floor Plan </div> <div class=\"floor\" *ngFor=\"let floor of SelectedRealEstateEntry.MainBuilding.Floors\"> <div class=\"title\"> Level {{floor.Level}} </div> <div class=\"rooms\"> <div class=\"room\" *ngFor=\"let room of floor.Rooms\"> <div class=\"type\"> {{room.RoomType}} </div> <div class=\"field\"> <div class=\"name\">Floor Material</div> <div class=\"value\">{{room.FloorMaterial}}</div> </div> <div class=\"field\"> <div class=\"name\">Floor Color</div> <div class=\"value\">{{room.FloorColors}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Material</div> <div class=\"value\">{{room.InteriorWallMaterials|join}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Color</div> <div class=\"value\">{{room.InteriorWallColors}}</div> </div> </div> </div> </div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.GrannyFlat && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Granny Flat </div> <div class=\"building\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.GrannyFlat && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Year Built</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.YearOfConstruction}}</div> </div> <div class=\"facility\"> <div class=\"name\">Stories</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfStories}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bedrooms</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfBedrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bathrooms</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfBathrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Toilets</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfToilets}}</div> </div> <div class=\"facility\"> <div class=\"name\">Kitchens</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfKitchens}}</div> </div> <div class=\"facility\"> <div class=\"name\">Living Rooms</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfLivingRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Dining Rooms</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfDiningRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Storages</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfStorageRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfCarports}}</div> </div> <div class=\"facility\"> <div class=\"name\">Pool</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.HasSwimmingPool}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Outer Wall</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.OuterWallMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Structure</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.StructuralMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Roof</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.RoofMaterial|join}}</div> </div> <div class=\"floors\"> <div class=\"title\"> Floor Plan </div> <div class=\"floor\" *ngFor=\"let floor of SelectedRealEstateEntry.GrannyFlat.Floors\"> <div class=\"title\"> Level {{floor.Level}} </div> <div class=\"rooms\"> <div class=\"room\" *ngFor=\"let room of floor.Rooms\"> <div class=\"type\"> {{room.RoomType}} </div> <div class=\"field\"> <div class=\"name\">Floor Material</div> <div class=\"value\">{{room.FloorMaterial}}</div> </div> <div class=\"field\"> <div class=\"name\">Floor Color</div> <div class=\"value\">{{room.FloorColors}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Material</div> <div class=\"value\">{{room.InteriorWallMaterials|join}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Color</div> <div class=\"value\">{{room.InteriorWallColors}}</div> </div> </div> </div> </div> </div> </div> <div class=\"section-title\"> Instructions </div> <div class=\"instructions\"> <div class=\"title\">In the following sections:</div> <div class=\"holder\"> <div class=\"instruction\">Click or Tap Links to send email, make phone call, or send SMS.</div> <!--<div class=\"instruction\">Click or Tap phone links to call.</div>\r\n                <div class=\"instruction\">Click or Tap SMS link to send SMS.</div>--> </div> </div> <div class=\"section-title\"> {{SelectedAgent?'Agent':'Loading Agent...'}} </div> <div class=\"agent\" *ngIf=\"SelectedAgent\"> <div class=\"card\"> <div class=\"name\"> {{SelectedAgent.Name}} </div> <div class=\"detail\"> <div class=\"fields\"> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/link.svg\"> <div class=\"link\"> <a href=\"{{SelectedAgent.Link}}\" target=\"_agent_link_{{SelectedAgent.Name}}\">{{SelectedAgent.Link}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/phone.svg\"> <div class=\"link\"> <a href=\"tel:{{SelectedAgent.Phone}}\">{{SelectedAgent.Phone}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/mobile.svg\"> <div class=\"link\"> <a href=\"tel:{{SelectedAgent.Mobile}}\">{{SelectedAgent.Mobile}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\"> <div class=\"sms\" (click)=\"buildSMS(SelectedAgent.Mobile, 'I am interested in '+formatAddress(SelectedRealEstateEntry)+'. Please contact me.')\">Send SMS</div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/email.svg\"> <div class=\"link\"> <a href=\"mailto:{{SelectedAgent.Email}}?subject=Query from Smart Koala - {{SelectedRealEstateEntry|address}}&body=Hi {{SelectedAgent.Name}}, %0A%0DI am interested in {{SelectedRentalEntry|address}}, please contact me.%0A%0DThank you!%0A%0D\" target=\"_agent_email_{{SelectedAgent.Name}}\" target=\"_agent_email_{{SelectedAgent.Name}}\">{{SelectedAgent.Email}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/address.svg\"> <a href=\"{{'https://www.google.com.au/maps/?q='+SelectedAgent.Address}}\" target=\"_agent_address_{{SelectedAgent.Name}}\">{{SelectedAgent.Address}}</a> </div> </div> <div class=\"image\" [style.background-image]=\"SelectedAgent.Image?'url('+SelectedAgent.Image+')':''\"> </div> </div> </div> </div> <div class=\"section-title\"> {{SelectedContacts?'Contacts':'Loading Contacts...'}} </div> <div class=\"contacts\" *ngIf=\"SelectedContacts\"> <div class=\"card\" *ngFor=\"let contact of SelectedContacts\"> <div class=\"name\"> {{contact.Name}} </div> <div class=\"detail\"> <div class=\"fields\"> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/phone.svg\"> <div class=\"link\"> <a href=\"tel:{{contact.Phone}}\">{{contact.Phone}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/mobile.svg\"> <div class=\"link\"> <a href=\"tel:{{contact.Mobile}}\">{{contact.Mobile}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\"> <div class=\"sms\" (click)=\"buildSMS(contact.Mobile, 'I am interested in '+formatAddress(SelectedRealEstateEntry)+'. Please contact me.')\">Send SMS</div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/email.svg\"> <div class=\"link\"> <a href=\"mailto:{{contact.Email}}?subject=Query from Smart Koala - {{SelectedRealEstateEntry|address}}&body=Hi {{contact.Name}}, %0A%0DI am interested in {{SelectedRentalEntry|address}}, please contact me.%0A%0DThank you!%0A%0D\" target=\"_agent_email_{{SelectedAgent.Name}}\" target=\"_agent_link_{{contact.Name}}\">{{contact.Email}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/address.svg\"> <a href=\"{{'https://www.google.com.au/maps/?q='+contact.Address}}\" target=\"_agent_address_{{contact.Name}}\">{{contact.Address}}</a> </div> </div> <div class=\"image\" [style.background-image]=\"contact.Image?'url('+contact.Image+')':''\"> </div> </div> </div> </div> </div> <div class=\"sms-frame\" (click)=\"SMSValid=false;\" *ngIf=\"SMSValid\"> </div> <div class=\"sms-body\" (click)=\"SMSValid=false;\" [class.hidden]=\"!SMSValid\"> <div class=\"body\" (click)=\"$event.stopPropagation();\"> <div class=\"title\">SMS to {{SMS.number}}</div> <textarea #MessageTextArea [(ngModel)]=\"SMS.message\"></textarea> <div class=\"description\">Click the button below to copy this message into clipboard and navigate to SMS service of your device. Then you can paste the message and send.</div> <a #CopyMessageButton class=\"btn-sms\" [href]=\"SMS.number|sms\">Copy &amp; Send</a> </div> </div> <div class=\"image-gallery-frame\" *ngIf=\"Gallery\"> </div> <div class=\"image-gallery\" *ngIf=\"Gallery\"> <!-- Gallery[GalleryIndex]|backgroundimage --> <div class=\"image\" (click)=\"SelectAdjacent($event)\" [style.background-image]=\"'url('+Gallery[GalleryIndex]+')'\"> </div> <div class=\"image-list\"> <div class=\"image\" [style.background-image]=\"image?'url('+image+')':''\" [class.selected]=\"GalleryIndex==Index\" *ngFor=\"let image of Gallery; let Index = index;\" (click)=\"ShowGalleryImage(Index)\"> </div> </div> <svg btn-close width=\"36\" height=\"36\" (click)=\"closeGallery($event);\"></svg> </div> <div class=\"DevelopmentAlert\" (click)=\"ShowAlert=false;\" *ngIf=\"ShowAlert\"> </div> <div class=\"DevelopmentAlertFrame\" (click)=\"ShowAlert=false;\" *ngIf=\"ShowAlert\"> <div class=\"AlertMessage\" (click)=\"$event.stopPropagation();\"> <div class=\"AlertTitle\"> <div class=\"title\">Notice</div> <div class=\"spaceholder\"></div> <svg btn-close width=\"36\" height=\"36\" (click)=\"ShowAlert=false;\"></svg> </div> <div class=\"AlterContent\"> <div class=\"content\"> <h4>Smart Koala is Currently in Demonstration Mode</h4> <p> To share Smart Koala Services with everyone on every device, espcially mobile devices, we are currently developing Android and iOS Apps of Smart Koala. Those apps will be ready by the end Feb 2017. </p> <p> The data currently shown in this app is demonstrative only. Real data will be available after the launch of mobile apps. </p> <p> Thank you for your interest in Smart Koala! </p> <p> - Jack, 2017-01-18 </p> </div> </div> </div> </div> </div> ",entryComponents:[],providers:[shop_client_1.ShopCore,shop_client_1.FruitVegetableCore,shop_client_1.MeatCore,shop_client_1.SeaFoodCore,shop_client_1.CarServiceRepairCore,shop_client_1.FastFoodCore,shop_client_1.GroceryCore,shop_client_1.VehicleCore,shop_client_1.PackedFoodCore,shop_client_1.FuelCore,shop_client_1.HouseServiceRepairCore,shop_client_1.RealEstateCore,shop_client_1.RentalCore],changeDetection:core_1.ChangeDetectionStrategy.Default}),__metadata("design:paramtypes",[shop_client_1.ShopCore,shop_client_1.FruitVegetableCore,shop_client_1.MeatCore,shop_client_1.SeaFoodCore,shop_client_1.FastFoodCore,shop_client_1.GroceryCore,shop_client_1.VehicleCore,shop_client_1.PackedFoodCore,shop_client_1.FuelCore,shop_client_1.HouseServiceRepairCore,shop_client_1.CarServiceRepairCore,shop_client_1.RealEstateCore,shop_client_1.RentalCore,core_1.ChangeDetectorRef,errisy_completer_1.CompleterService])],AppComponent),exports.AppComponent=AppComponent;