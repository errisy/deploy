"use strict";var __decorate=this&&this.__decorate||function(a,s,l,o){var y,n=arguments.length,u=3>n?s:null===o?o=Object.getOwnPropertyDescriptor(s,l):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(a,s,l,o);else for(var m=a.length-1;0<=m;m--)(y=a[m])&&(u=(3>n?y(u):3<n?y(s,l,u):y(s,l))||u);return 3<n&&u&&Object.defineProperty(s,l,u),u},__metadata=this&&this.__metadata||function(a,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,s)},__awaiter=this&&this.__awaiter||function(a,s,l,o){return new(l||(l=Promise))(function(n,u){function y(S){try{g(o.next(S))}catch(h){u(h)}}function m(S){try{g(o["throw"](S))}catch(h){u(h)}}function g(S){S.done?n(S.value):new l(function(h){h(S.value)}).then(y,m)}g((o=o.apply(a,s)).next())})};const core_1=require("@angular/core"),differs_1=require("./differs"),errisy_completer_1=require("errisy-completer"),clipboardjs=require("errisy-copy"),shop_client_1=require("./shop.client"),util=require("errisy-util"),rental_util_1=require("./rental.util"),realestate_util_1=require("./realestate.util");let AppComponent=class{constructor(s,l,o,n,u,y,m,g,S,h,f,R,E,b,C){this.shop=s,this.fruit=l,this.meat=o,this.seafood=n,this.fastfood=u,this.grocery=y,this.vehicle=m,this.packedfood=g,this.fuel=S,this.houseservice=h,this.carservice=f,this.realestate=R,this.rental=E,this.changeDetectorRef=b,this.completerService=C,this.HoursLimit=1,this.Mode="None",this.ShowAlert=!0,this.ShopListTypes=["FruitVegetableShop","MeatShop","SeaFoodShop","FastFoodShop","GroceryShop","FuelShop","VehicleShop","PackedFoodShop","HouseServiceRepairShop","CarServiceRepairShop"],this.EntryListTypes=["RealEstateShop","RentalShop"],this.SMS={number:"",message:""},this.SMSValid=!1,this.buildSMS=(M,x)=>{this.SMS={number:M,message:x},this.SMSValid=!0,this.changeDetectorRef.detectChanges()},this.GalleryIndex=0,this.ShowGallery=(M,x)=>{console.log("show gallery",M,x),this.GalleryIndex=M,this.Gallery=x,this.changeDetectorRef.detectChanges()},this.ShowGalleryImage=M=>{this.GalleryIndex=M,this.changeDetectorRef.detectChanges()},this.SelectAdjacent=M=>{if(M.target){let x=M.target;M.clientX>x.clientWidth/2?(this.GalleryIndex+=1,this.GalleryIndex>=this.Gallery.length&&(this.GalleryIndex=0)):(this.GalleryIndex-=1,0>this.GalleryIndex&&(this.GalleryIndex=this.Gallery.length-1))}this.changeDetectorRef.detectChanges()},this.closeGallery=M=>{this.Gallery=void 0,M.stopPropagation(),this.changeDetectorRef.detectChanges()},this.RentalEntireProperty=["Unit","Apartment","Townhouse","House","Entire Propery"],this.RentalEntirePropertyTypes=["Unit","Apartment","Townhouse","House"],this.RentalQuery={Category:"All",PriceFrom:0,PriceTo:5e3,KeyLock:!1,HasPrivateToilet:!1,HasPrivateBathroom:!1,HasPrivateGarageOrCarPort:!1,HasPrivateKitchen:!1,HasPrivateLaundry:!1,RoomSizeFrom:10,RoomSizeTo:40,BedroomFrom:1,BedroomTo:5,BathroomFrom:1,BathroomTo:5,ToiletFrom:1,ToiletTo:5,IsQuiteStreet:!1},this.RealEstateBuilding=["Unit","Apartment","Multiple Units","Townhouse","House","All Buildings"],this.RealEstateWithLand=["Townhouse","House","Land"],this.RealEstateWithPrivateYard=["Townhouse","House"],this.RealEstateQuery={Category:"All",PriceStrategy:"Explicit",IncludeInexplicit:!0,PriceFrom:1.5e5,PriceTo:2e6,BedroomFrom:1,BedroomTo:5,BathroomFrom:1,BathroomTo:5,ToiletFrom:1,ToiletTo:5,IsQuiteStreet:!1,LandSizeFrom:200,LandSizeTo:2e3,HasPool:!1,WallOrFence:"Any",StructuralMaterial:"Any",NumberOfStoriesFrom:1,NumberOfStoriesTo:3,HasGrannyFlat:!1},this.ExplicitPriceStrategies=["Explicit","Exact Price","Plus","Offers Over"],this.InexplicitPriceStrategies=["Any","Inexplicit","POA","Submit Your Offer","Auction"],this.ExplicitPriceStrategyQuery=["Exact Price","Plus","Offers Over"],this.InexplicitPriceStrategyQuery=["POA","Submit Your Offer","Auction"],this.onSuburbClick=(M,x,w)=>{"RealEstateShop"==this.SelectedShopType.Name||"RentalShop"==this.SelectedShopType.Name?(this.Map.setCenter(new google.maps.LatLng(x,w)),this.Map.setZoom(13)):(this.Map.setCenter(new google.maps.LatLng(x,w)),this.Map.setZoom(11))},this.onRegionClick=(M,x,w)=>{"RealEstateShop"==this.SelectedShopType.Name||"RentalShop"==this.SelectedShopType.Name?(this.Map.setCenter(new google.maps.LatLng(x,w)),this.Map.setZoom(9)):(this.Map.setCenter(new google.maps.LatLng(x,w)),this.Map.setZoom(9))},this.onMapClickOrMouseDown=()=>{this.isKeywordsEditing=!1},this.onMapBoundsChanged=()=>{this.MapBoundsChangedTimeout&&clearTimeout(this.MapBoundsChangedTimeout),this.MapBoundsChangedTimeout=setTimeout(this.onBoundsChangedTimeout,200)},this.onBoundsChangedTimeout=()=>{this.loadShops()},this.NoDateShopTypes=["GroceryShop","VehicleShop","CarServiceRepairShop","HouseServiceRepairShop"],this.isKeywordsEditing=!1,this.ItemsDiffer=new differs_1.IDDiffers([]),this.Markers={},this.PreviousFilters={},this.location={x:153.028036,y:-27.4761628},this.initPosition(),this.loadGeoPosition()}initPosition(){let s=util.cookie.get("lng"),l=util.cookie.get("lat");"string"==typeof l&&/^[\+\-]?(\d+|\d+\.\d*|\.\d+)$/ig.test(l)&&"string"==typeof s&&/^[\+\-]?(\d+|\d+\.\d*|\.\d+)$/ig.test(s)&&(this.location.x=+s,this.location.y=+l)}loadGeoPosition(){return __awaiter(this,void 0,void 0,function*(){let s=yield util.GetGeoLocation();this.Location={x:s.coords.longitude,y:s.coords.latitude}})}formatAddress(s){if(!s)return"Unknow Adress";let l=[];return s.BuildingDetail&&l.push(s.BuildingDetail),s.StreetNumber&&s.Street?l.push(`${s.StreetNumber} ${s.Street}`):s.StreetNumber?l.push(s.StreetNumber):s.Street&&l.push(s.Street),s.Suburb&&l.push(s.Suburb),s.State&&s.Postcode?l.push(`${s.State} ${s.Postcode}`):s.State?l.push(s.State):s.Postcode&&l.push(s.Postcode),l.join(", ")}copy(s){let l=document.createElement("textarea");l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.width="2em",l.style.height="2em",l.style.padding="0",l.style.border="none",l.style.outline="none",l.style.boxShadow="none",l.style.background="transparent",l.value=s,document.body.appendChild(l),l.select();try{var o=document.execCommand("copy"),n=o?"successful":"unsuccessful";console.log("Copying text command was "+n)}catch(u){console.log("Oops, unable to copy")}document.body.removeChild(l)}get MapBoundaryQuery(){if(this.Map){let s=this.Map.getBounds(),l=s.getNorthEast(),o=s.getSouthWest(),n=l.lng(),u=l.lat(),y=o.lng(),m=o.lat(),g=this.Map.getBounds().toSpan();return 360<=g.lng()?{$geoWithin:{$box:[[-180,m],[180,u]]}}:n>=y?{$geoWithin:{$box:[[y,m],[n,u]]}}:0>y?{$geoWithin:{$geometry:{type:"MultiPolygon",coordinates:[util.geometryBox(-180,n,u,m),util.geometryBox(y,20,u,m),util.geometryBox(20,180,u,m)]}}}:0<n?{$geoWithin:{$geometry:{type:"MultiPolygon",coordinates:[util.geometryBox(-180,-20,u,m),util.geometryBox(-20,n,u,m),util.geometryBox(y,180,u,m)]}}}:{$geoWithin:{$geometry:{type:"MultiPolygon",coordinates:[util.geometryBox(-180,n,u,m),util.geometryBox(y,180,u,m)]}}}}}get Location(){return this.location}set Location(s){util.cookie.set("lng",s.x+""),util.cookie.set("lat",s.y+""),this.location=s}ngAfterContentInit(){return __awaiter(this,void 0,void 0,function*(){let l=util.getURLParameters();this.TypeIDFromParameter=l.t,this.ShopIDFromParameter=l.s,clipboardjs.button(this.CopyMessageButton.nativeElement,this.MessageTextArea.nativeElement)})}get AdditionalPanelHeight(){return`${window.innerHeight-88}px`}get AdditionalPanelWidth(){return`${window.innerWidth-12}px`}RentalCategoryChange(s){this.SelectedCategory=this.Categories.find(l=>l.Name==s)}get RentalDetailQuery(){let s={Price:{$gte:this.RentalQuery.PriceFrom,$lte:this.RentalQuery.PriceTo},Location:this.MapBoundaryQuery};switch("All"==this.RentalQuery.Category||("Entire Propery"==this.RentalQuery.Category?s.Category={$in:this.RentalEntirePropertyTypes}:s.Category=this.RentalQuery.Category),this.RentalQuery.Category){case"Room":this.RentalQuery.KeyLock&&(s["RentalRoom.CanLock"]=!0),this.RentalQuery.IsQuiteStreet&&(s.IsQuiteStreet=!0),this.RentalQuery.HasPrivateBathroom&&(s["RentalRoom.Bathroom"]="Private"),this.RentalQuery.HasPrivateToilet&&(s["RentalRoom.Toilet"]="Private"),this.RentalQuery.HasPrivateKitchen&&(s["RentalRoom.Kitchen"]="Private"),this.RentalQuery.HasPrivateLaundry&&(s["RentalRoom.Laundry"]="Private"),this.RentalQuery.HasPrivateGarageOrCarPort&&(s.CarParking={$in:["Private Carport","Private Garage"]}),s["RentalRoom.RoomSizeInSquareMeter"]={$gte:this.RentalQuery.RoomSizeFrom,$lte:this.RentalQuery.RoomSizeTo};break;case"Unit":case"Apartment":case"Townhouse":case"House":s["Building.NumberOfBedrooms"]={$gte:this.RentalQuery.BedroomFrom,$lte:this.RentalQuery.BedroomTo},s["Building.NumberOfToilets"]={$gte:this.RentalQuery.ToiletFrom,$lte:this.RentalQuery.ToiletTo},s["Building.NumberOfBathrooms"]={$gte:this.RentalQuery.BathroomFrom,$lte:this.RentalQuery.BathroomTo};break;case"All":case"Bedroom Share":}return s}RealEstateCategoryChange(s){this.SelectedCategory=this.Categories.find(l=>l.Name==s)}get RealEstateDetailQuery(){let s={Location:this.MapBoundaryQuery};if("All"==this.RealEstateQuery.Category||("All Buildings"==this.RealEstateQuery.Category?s.Category={$in:["Unit","Apartment","Multiple Units","Townhouse","House"]}:s.Category=this.RealEstateQuery.Category),this.RealEstateQuery.IsQuiteStreet&&(s.IsQuiteStreet=!0),this.RealEstateBuilding.some(l=>l==this.RealEstateQuery.Category))switch(s["MainBuilding.NumberOfBedrooms"]={$gte:this.RealEstateQuery.BedroomFrom,$lte:this.RealEstateQuery.BedroomTo},s["MainBuilding.NumberOfToilets"]={$gte:this.RealEstateQuery.ToiletFrom,$lte:this.RealEstateQuery.ToiletTo},s["MainBuilding.NumberOfBathrooms"]={$gte:this.RealEstateQuery.BathroomFrom,$lte:this.RealEstateQuery.BathroomTo},s["MainBuilding.NumberOfStories"]={$gte:this.RealEstateQuery.NumberOfStoriesFrom,$lte:this.RealEstateQuery.NumberOfStoriesTo},this.RealEstateQuery.StructuralMaterial){case"Any":break;case"Non-Timber":s["MainBuilding.StructuralMaterials"]={$nin:"Timber"};break;default:s["MainBuilding.StructuralMaterials"]={$in:this.RealEstateQuery.StructuralMaterial};}switch(this.RealEstateWithPrivateYard.some(l=>l==this.RealEstateQuery.Category)&&(this.RealEstateQuery.HasPool&&(s.HasGrannyFlat=!0),this.RealEstateQuery.HasGrannyFlat&&(s["Land.NumberOfPool"]={$gt:0}),"Any"!=this.RealEstateQuery.WallOrFence&&(s["Land.WallOrFenceCoverage"]=this.RealEstateQuery.WallOrFence)),this.RealEstateWithLand.some(l=>l==this.RealEstateQuery.Category)&&(s["Land.LandSize"]={$gte:this.RealEstateQuery.LandSizeFrom,$lte:this.RealEstateQuery.LandSizeTo}),this.RealEstateQuery.PriceStrategy){case"Any":break;case"Explicit":this.RealEstateQuery.IncludeInexplicit?s={$and:[{$or:[{$and:[{Price:{$gte:this.RealEstateQuery.PriceFrom,$lte:this.RealEstateQuery.PriceTo}},{PriceStrategy:{$in:this.ExplicitPriceStrategyQuery}}]},{PriceStrategy:{$in:this.InexplicitPriceStrategyQuery}}]},s]}:(s.Price={$gte:this.RealEstateQuery.PriceFrom,$lte:this.RealEstateQuery.PriceTo},s.PriceStrategy={$in:this.ExplicitPriceStrategyQuery});break;case"Inexplicit":s.PriceStrategy={$in:this.InexplicitPriceStrategyQuery};break;case"Exact Price":case"Plus":case"Offers Over":this.RealEstateQuery.IncludeInexplicit?s={$and:[{$or:[{$and:[{Price:{$gte:this.RealEstateQuery.PriceFrom,$lte:this.RealEstateQuery.PriceTo}},{PriceStrategy:this.RealEstateQuery.PriceStrategy}]},{PriceStrategy:{$in:this.InexplicitPriceStrategyQuery}}]},s]}:(s.Price={$gte:this.RealEstateQuery.PriceFrom,$lte:this.RealEstateQuery.PriceTo},s.PriceStrategy=this.RealEstateQuery.PriceStrategy);break;case"POA":case"Submit Your Offer":case"Auction":s.PriceStrategy=this.RealEstateQuery.PriceStrategy;}return s}AddNumber(s,l,o,n,u){"number"!=typeof s[l]&&(s[l]=0),s[l]+=o,"number"==typeof n&&s[l]<n&&(s[l]=n),"number"==typeof u&&s[l]>u&&(s[l]=u)}onResize(){this.changeDetectorRef.detectChanges()}onMapReady(s){return __awaiter(this,void 0,void 0,function*(){this.Map=s,this.MarkerExtension=yield SystemJS.import("/app/markers.js"),this.MarkerExtension.ShopWindowMarker.setupGoogleMapShopWindowClickHost(this),this.MarkerExtension.ShopWindowMarker.titleClick="onMapWindowTitleClick",this.MarkerExtension.ShopWindowMarker.itemClick="onMapWindowItemClick",this.MarkerExtension.RentalWindowMarker.setupGoogleMapRentalWindowClickHost(this),this.MarkerExtension.RentalWindowMarker.titleClick="onMapWindowRentalClick",this.MarkerExtension.RealEstateWindowMarker.setupGoogleMapRealEstateWindowClickHost(this),this.MarkerExtension.RealEstateWindowMarker.titleClick="onMapWindowRealEstateClick",this.MarkerExtension.SuburbMarker.onSuburbClick=this.onSuburbClick,this.MarkerExtension.RegionMarker.onRegionClick=this.onRegionClick,this.GeneralSetting=yield this.shop.ReadGeneralSetting();let l=util.getURLParameters(),o;if(l.t){let n=l.t;o=this.GeneralSetting.ShopTypes.find(u=>u.ID==n)}o?l.s?yield this.loadShopFromParameter(o,l.s):l.e?yield this.loadEntryFromParameter(o,l.e):yield this.selectShopType(o):yield this.selectShopType(this.GeneralSetting.ShopTypes[0]),this.Map.addListener("bounds_changed",this.onMapBoundsChanged),this.Map.addListener("mousedown",this.onMapClickOrMouseDown)})}CloseFloatingView(){this.Mode="None",this.SelectedShop=void 0,this.SelectedEntry=void 0,this.SelectedAgent=void 0,this.SelectedContacts=void 0,this.SelectedRealEstateEntry=void 0,this.SelectedRentalEntry=void 0,this.ProductShowDetailIndex=void 0,this.HoursLimit=1,this.setLink(),this.changeDetectorRef.detectChanges()}ShowMoreHours(){this.HoursLimit=void 0,this.changeDetectorRef.detectChanges()}clearLink(){util.setURL(window.location.pathname)}setLink(){this.SelectedShopType&&(this.SelectedShopType.GeoEntry?this.SelectedEntry?util.setURL(window.location.pathname+`?t=${this.SelectedShopType.ID}&e=${this.SelectedEntry._id}`):util.setURL(window.location.pathname+`?t=${this.SelectedShopType.ID}`):this.SelectedShop?util.setURL(window.location.pathname+`?t=${this.SelectedShopType.ID}&s=${this.SelectedShop._id}`):util.setURL(window.location.pathname+`?t=${this.SelectedShopType.ID}`))}onMapWindowTitleClick(s,l){return __awaiter(this,void 0,void 0,function*(){this.SelectedShop=this.Markers[s]&&this.Markers[s].Shop,this.SelectedItemID=null,this.SelectedShop&&(this.Mode="Detail",this.setLink(),l&&this.changeDetectorRef.detectChanges())})}SelectShopProductEntry(s){if(this.ProductShowDetailIndex=s,this.SelectedShop.CanQuery&&this.SelectedShop.Products[s]){let l=this.SelectedShop.Products[s];l.selected=!l.selected}if(this.SelectedShop.CanOrder&&this.SelectedShop.Products[s]){let l=this.SelectedShop.Products[s];"number"!=typeof l.count&&(l.count=0),l.count+=1}this.changeDetectorRef.detectChanges()}ReduceSelectShopProductEntryCount(s,l){if(this.SelectedShop.CanOrder&&this.SelectedShop.Products[s]){let o=this.SelectedShop.Products[s];"number"!=typeof o.count&&(o.count=0),0<o.count&&(o.count-=1)}l.stopPropagation(),this.changeDetectorRef.detectChanges()}SelectedShopQueryMessage(s){let l=[],o=[];return this.SelectedShop.CanQuery&&(l.push(`Hi, ${s?"%0A%0D":""}I am interested in `),this.SelectedShop.Products.forEach(n=>{n.selected&&o.push(n.Description)}),0<o.length?l.push(o.join(", ")):l.push("your products"),l.push(`. Please contact me.${s?"%0A%0D":""}Thank you!`)),this.SelectedShop.CanOrder&&(l.push(`Hi, ${s?"%0A%0D":""}I want to order `),this.SelectedShop.Products.forEach(n=>{let u=n;u.count&&o.push(`${u.count} x [${n.Description}]`)}),l.push(o.join(", ")),l.push(`. Please confirm.${s?"%0A%0D":""} Thank you!`)),l.join("")}onMapWindowItemClick(s,l,o){return __awaiter(this,void 0,void 0,function*(){this.SelectedShop=this.Markers[s]&&this.Markers[s].Shop,this.SelectedItemID=l,this.SelectedShop&&(this.Mode="Detail",this.setLink(),o&&this.changeDetectorRef.detectChanges())})}onMapWindowRentalClick(s,l){return __awaiter(this,void 0,void 0,function*(){this.SelectedRentalEntry=void 0;let o=this.Markers[s]&&this.Markers[s].Entry;if(this.SelectedEntry=o,o){this.Mode="Rental",this.SelectedAgent=void 0,this.SelectedContacts=[],l&&this.changeDetectorRef.detectChanges(),this.SelectedRentalEntry=yield this.rental.FetchEntry(s);let n=yield this.rental.Fetch(o.Shop);this.SelectedAgent=n.Agent,this.SelectedContacts=n.Contacts,this.setLink(),l&&this.changeDetectorRef.detectChanges()}})}onMapWindowRealEstateClick(s,l){return __awaiter(this,void 0,void 0,function*(){this.SelectedRealEstateEntry=void 0;let o=this.Markers[s]&&this.Markers[s].Entry;if(this.SelectedEntry=o,console.log("entry: ",o),o){this.Mode="RealEstate",this.SelectedAgent=void 0,this.SelectedContacts=[],l&&this.changeDetectorRef.detectChanges(),this.SelectedRealEstateEntry=yield this.realestate.FetchEntry(s),console.log("fetched: ",this.SelectedRealEstateEntry);let n=yield this.realestate.Fetch(o.Shop);this.SelectedAgent=n.Agent,this.SelectedContacts=n.Contacts,this.setLink(),l&&this.changeDetectorRef.detectChanges()}})}selectShopType(s,l){return __awaiter(this,void 0,void 0,function*(){if(this.Mode="None",this.SelectedShopType!=s){switch(this.SelectedShopType=s,this.removeAllShops(),this.Categories=[],this.Products=[],this.CategoryProducts=[],this.setLink(),this.SelectedShopType.Name){case"FruitVegetableShop":this.Categories=yield this.fruit.Categories(),this.Products=yield this.fruit.Products();break;case"MeatShop":this.Categories=yield this.meat.Categories(),this.Products=yield this.meat.Products();break;case"SeaFoodShop":this.Categories=yield this.seafood.Categories(),this.Products=yield this.seafood.Products();break;case"FastFoodShop":this.Categories=yield this.fastfood.Categories(),this.Products=yield this.fastfood.Products();break;case"PackedFoodShop":this.Categories=yield this.packedfood.Categories(),this.Products=yield this.packedfood.Products();break;case"GroceryShop":this.Categories=yield this.grocery.Categories(),this.Products=yield this.grocery.Products();break;case"FuelShop":this.Categories=yield this.fuel.Categories(),this.Products=yield this.fuel.Products();break;case"VehicleShop":this.Categories=yield this.vehicle.Categories(),this.Products=yield this.vehicle.Products();break;case"RealEstateShop":this.Categories=yield this.realestate.Categories(),this.Products=yield this.realestate.Products();break;case"RentalShop":this.Categories=yield this.rental.Categories(),this.Products=yield this.rental.Products();break;case"CarServiceRepairShop":this.Categories=yield this.carservice.Categories(),this.Products=yield this.carservice.Products();break;case"HouseServiceRepairShop":this.Categories=yield this.houseservice.Categories(),this.Products=yield this.houseservice.Products();}this.Categories.sort(this.MarkerExtension.IndexSorter),this.Products.sort(this.MarkerExtension.IndexSorter),this.Categories.splice(0,0,{_id:"All",Name:"All",Image:"/svg/allico.svg",Index:0,Products:[]}),this.Products.splice(0,0,{_id:"All",Name:"All",Image:"/svg/allico.svg",Index:0,Primary:void 0,Secondaries:[]}),this.CategoryProducts=this.Products.filter(()=>!0),this.SelectedCategory=this.Categories[0],this.SelectedProduct=this.Products[0],this.KeywordsService=this.completerService.local(this.CategoryProducts,"Name","Name"),l||(yield this.loadShops())}})}loadShopFromParameter(s,l){return __awaiter(this,void 0,void 0,function*(){let o;switch(this.selectShopType(s,!0),s.Name){case"FruitVegetableShop":o=yield this.fruit.Fetch(l);break;case"MeatShop":o=yield this.meat.Fetch(l);break;case"SeaFoodShop":o=yield this.seafood.Fetch(l);break;case"FastFoodShop":o=yield this.fastfood.Fetch(l);break;case"PackedFoodShop":o=yield this.packedfood.Fetch(l);break;case"GroceryShop":o=yield this.grocery.Fetch(l);break;case"FuelShop":o=yield this.fuel.Fetch(l);break;case"VehicleShop":o=yield this.vehicle.Fetch(l);break;case"CarServiceRepairShop":o=yield this.carservice.Fetch(l);break;case"HouseServiceRepairShop":o=yield this.houseservice.Fetch(l);}o&&(this.SelectedShop=o,this.Mode="Detail",this.Map.setCenter(new google.maps.LatLng(o.Location.coordinates[1],o.Location.coordinates[0])),this.setLink())})}loadEntryFromParameter(s,l){return __awaiter(this,void 0,void 0,function*(){console.log("loadEntryFromParameter",s,l);let o;switch(this.selectShopType(s,!0),s.Name){case"RealEstateShop":{this.SelectedRealEstateEntry=yield this.realestate.FetchEntry(l),o=this.SelectedRealEstateEntry,this.SelectedEntry=o;let n=yield this.realestate.Fetch(o.Shop);this.SelectedAgent=n.Agent,this.SelectedContacts=n.Contacts,this.Mode="RealEstate"}break;case"RentalShop":{this.SelectedRentalEntry=yield this.rental.FetchEntry(l),o=this.SelectedRentalEntry,this.SelectedEntry=o;let n=yield this.rental.Fetch(o.Shop);this.SelectedAgent=n.Agent,this.SelectedContacts=n.Contacts,this.Mode="Rental"}}o&&(this.Map.setCenter(new google.maps.LatLng(o.Location.coordinates[1],o.Location.coordinates[0])),this.setLink())})}loadShops(){return __awaiter(this,void 0,void 0,function*(){if(this.SelectedShopType&&this.Map){let s=this.Map.getZoom();switch(this.SelectedShopType.Name){case"FruitVegetableShop":8>=s?this.displayRegions((yield this.fruit.Regions(this.MapBoundaryQuery))):10>=s?this.displaySuburbs((yield this.fruit.Suburbs(this.MapBoundaryQuery))):this.displayShops((yield this.fruit.Shops(this.MapBoundaryQuery)));break;case"MeatShop":8>=s?this.displayRegions((yield this.meat.Regions(this.MapBoundaryQuery))):10>=s?this.displaySuburbs((yield this.meat.Suburbs(this.MapBoundaryQuery))):this.displayShops((yield this.meat.Shops(this.MapBoundaryQuery)));break;case"SeaFoodShop":8>=s?this.displayRegions((yield this.seafood.Regions(this.MapBoundaryQuery))):10>=s?this.displaySuburbs((yield this.seafood.Suburbs(this.MapBoundaryQuery))):this.displayShops((yield this.seafood.Shops(this.MapBoundaryQuery)));break;case"FastFoodShop":8>=s?this.displayRegions((yield this.fastfood.Regions(this.MapBoundaryQuery))):10>=s?this.displaySuburbs((yield this.fastfood.Suburbs(this.MapBoundaryQuery))):this.displayShops((yield this.fastfood.Shops(this.MapBoundaryQuery)));break;case"PackedFoodShop":8>=s?this.displayRegions((yield this.packedfood.Regions(this.MapBoundaryQuery))):10>=s?this.displaySuburbs((yield this.packedfood.Suburbs(this.MapBoundaryQuery))):this.displayShops((yield this.packedfood.Shops(this.MapBoundaryQuery)));break;case"GroceryShop":8>=s?this.displayRegions((yield this.grocery.Regions(this.MapBoundaryQuery))):10>=s?this.displaySuburbs((yield this.grocery.Suburbs(this.MapBoundaryQuery))):this.displayShops((yield this.grocery.Shops(this.MapBoundaryQuery)));break;case"FuelShop":8>=s?this.displayRegions((yield this.fuel.Regions(this.MapBoundaryQuery))):10>=s?this.displaySuburbs((yield this.fuel.Suburbs(this.MapBoundaryQuery))):this.displayShops((yield this.fuel.Shops(this.MapBoundaryQuery)));break;case"VehicleShop":8>=s?this.displayRegions((yield this.vehicle.Regions(this.MapBoundaryQuery))):10>=s?this.displaySuburbs((yield this.vehicle.Suburbs(this.MapBoundaryQuery))):this.displayShops((yield this.vehicle.Shops(this.MapBoundaryQuery)));break;case"RealEstateShop":8>=s?this.displayRegions((yield this.realestate.Regions(this.MapBoundaryQuery))):12>=s?this.displaySuburbs((yield this.realestate.Suburbs(this.MapBoundaryQuery))):this.displayRealEstates((yield this.realestate.EntriesOnMap(this.RealEstateDetailQuery)));break;case"RentalShop":8>=s?this.displayRegions((yield this.rental.Regions(this.MapBoundaryQuery))):12>=s?this.displaySuburbs((yield this.rental.Suburbs(this.MapBoundaryQuery))):this.displayRentals((yield this.rental.EntriesOnMap(this.RentalDetailQuery)));break;case"CarServiceRepairShop":8>=s?this.displayRegions((yield this.carservice.Regions(this.MapBoundaryQuery))):10>=s?this.displaySuburbs((yield this.carservice.Suburbs(this.MapBoundaryQuery))):this.displayShops((yield this.carservice.Shops(this.MapBoundaryQuery)));break;case"HouseServiceRepairShop":8>=s?this.displayRegions((yield this.houseservice.Regions(this.MapBoundaryQuery))):10>=s?this.displaySuburbs((yield this.houseservice.Suburbs(this.MapBoundaryQuery))):this.displayShops((yield this.houseservice.Shops(this.MapBoundaryQuery)));}}})}selectCategory(s){switch(this.SelectedCategory=s,this.Mode="None",this.SelectedShopType.Name){case"RentalShop":this.RentalQuery.Category=this.SelectedCategory.Name;break;case"RealEstateShop":this.RealEstateQuery.Category=this.SelectedCategory.Name;break;case"VehicleShop":break;default:"All"==s._id?this.CategoryProducts=this.Products.filter(()=>!0):(this.CategoryProducts=s.Products?this.Products.filter(l=>s.Products.some(o=>o==l._id)):[],this.CategoryProducts.splice(0,0,this.Products[0]));}this.SelectedProduct&&!this.CategoryProducts.some(l=>l._id==this.SelectedProduct._id)&&(this.SelectedProduct=this.CategoryProducts[0]),this.KeywordsService=this.completerService.local(this.CategoryProducts,"Name","Name"),this.updateFilter()}selectProduct(s){switch(this.SelectedShopType.Name){case"RentalShop":{let l=rental_util_1.RentalProductQuery(s);"Entire Propery"!=l.Category||this.RentalEntireProperty.some(o=>o==this.RentalQuery.Category)?this.SelectedCategory=this.Categories.find(o=>o.Name==l.Category):(this.RentalQuery.Category=l.Category,this.SelectedCategory=this.Categories.find(o=>o.Name==l.Category),delete l.Category),util.setField(this.RentalQuery,l)}break;case"RealEstateShop":{let l=realestate_util_1.RealEstateProductQuery(s);"All Buildings"!=l.Category||this.RealEstateBuilding.some(o=>o==this.RealEstateQuery.Category)?this.SelectedCategory=this.Categories.find(o=>o.Name==l.Category):(this.RealEstateQuery.Category=l.Category,this.SelectedCategory=this.Categories.find(o=>o.Name==l.Category),delete l.Category),util.setField(this.RealEstateQuery,l)}break;default:}this.SelectedProduct=s,this.Mode="None",this.updateFilter()}enableKeywords(){this.isKeywordsEditing=!0,this.changeDetectorRef.detectChanges(),this.autocomplete.SetFocus()}onKeywordsFocused(){this.isKeywordsEditing=!0}onKeywordsKeydown(s){"Enter"==s.key&&this.updateFilter()}applyKeywords(){this.isKeywordsEditing=!1,this.updateFilter()}cancelKeywords(){this.isKeywordsEditing=!1,this.Keywords="",this.updateFilter()}removeAllShops(){for(let s in this.Markers){let l=this.Markers[s];l.setMap(void 0)}this.ItemsDiffer.clear(),this.Markers={}}recordPrevious(){this.PreviousFilters.SelectedCategory=this.SelectedCategory,this.PreviousFilters.SelectedProduct=this.SelectedProduct,this.PreviousFilters.Keywords=this.Keywords,this.PreviousFilters.Products=this.CategoryProducts}displaySuburbs(s){let l=this.ItemsDiffer.diff(s);this.ItemsDiffer.arr=s,l.added.forEach(o=>{let n=new this.MarkerExtension.SuburbMarker({map:this.Map,icon:{url:`/app/svglabel.rpc.js?svg-label&${o.Count}`,size:new google.maps.Size(32,48),scaledSize:new google.maps.Size(32,48),anchor:new google.maps.Point(16,48)},animation:google.maps.Animation.DROP,clickable:!0,position:new google.maps.LatLng(o.Location.coordinates[1],o.Location.coordinates[0])});n.Suburb=o,this.Markers[o._id]=n}),l.removed.forEach(o=>{let n=this.Markers[o._id];n.destroy(),delete this.Markers[o._id]}),this.recordPrevious()}displayRegions(s){let l=this.ItemsDiffer.diff(s);this.ItemsDiffer.arr=s,l.added.forEach(o=>{let n=new this.MarkerExtension.RegionMarker({map:this.Map,icon:{url:`/app/svglabel.rpc.js?svg-label&${o.Count}`,size:new google.maps.Size(32,48),scaledSize:new google.maps.Size(32,48),anchor:new google.maps.Point(16,48)},animation:google.maps.Animation.DROP,clickable:!0,position:new google.maps.LatLng(o.Location.coordinates[1],o.Location.coordinates[0])});n.Region=o,this.Markers[o._id]=n}),l.removed.forEach(o=>{let n=this.Markers[o._id];n.destroy(),delete this.Markers[o._id]}),this.recordPrevious()}displayShops(s){let l=this.ItemsDiffer.diff(s);this.ItemsDiffer.arr=s,l.added.forEach(o=>{let n=new this.MarkerExtension.ShopWindowMarker({map:this.Map,icon:this.MarkerExtension.ShopIcon,animation:google.maps.Animation.DROP,clickable:!0,position:new google.maps.LatLng(o.Location.coordinates[1],o.Location.coordinates[0])});n.Shop=o,n.BuildShop(this.SelectedCategory,this.SelectedProduct,this.Keywords,this.CategoryProducts),n.hasEntries&&n.showInfoWindow(),this.Markers[o._id]=n}),l.removed.forEach(o=>{let n=this.Markers[o._id];n.destroy(),delete this.Markers[o._id]}),this.isFiltersChanged&&l.retained.forEach(o=>{let n=this.Markers[o._id];n.BuildShop(this.SelectedCategory,this.SelectedProduct,this.Keywords,this.CategoryProducts),n.hasEntries&&n.showInfoWindow()}),this.recordPrevious()}displayRealEstates(s){let l=this.ItemsDiffer.diff(s);this.ItemsDiffer.arr=s,l.added.forEach(o=>{let n=new this.MarkerExtension.RealEstateWindowMarker({map:this.Map,icon:this.MarkerExtension.HouseIcon,animation:google.maps.Animation.DROP,clickable:!0,position:new google.maps.LatLng(o.Location.coordinates[1],o.Location.coordinates[0])});n.Entry=o,n.BuildEntry(this.SelectedCategory,this.SelectedProduct,this.Keywords,this.CategoryProducts),this.Markers[o._id]=n}),l.removed.forEach(o=>{let n=this.Markers[o._id];n.destroy(),delete this.Markers[o._id]}),this.recordPrevious()}displayRentals(s){let l=this.ItemsDiffer.diff(s);this.ItemsDiffer.arr=s,l.added.forEach(o=>{let n=new this.MarkerExtension.RentalWindowMarker({map:this.Map,icon:this.MarkerExtension.HouseIcon,animation:google.maps.Animation.DROP,clickable:!0,position:new google.maps.LatLng(o.Location.coordinates[1],o.Location.coordinates[0])});n.Entry=o,n.BuildEntry(this.SelectedCategory,this.SelectedProduct,this.Keywords,this.CategoryProducts),this.Markers[o._id]=n}),l.removed.forEach(o=>{let n=this.Markers[o._id];n.destroy(),delete this.Markers[o._id]}),this.recordPrevious()}get isFiltersChanged(){return this.PreviousFilters.SelectedCategory!=this.SelectedCategory||this.PreviousFilters.SelectedProduct!=this.SelectedProduct||this.PreviousFilters.Keywords!=this.Keywords||this.PreviousFilters.Products!=this.CategoryProducts}updateFilter(){return __awaiter(this,void 0,void 0,function*(){if(this.SelectedShopType&&this.Map)switch(this.SelectedShopType.Name){case"RealEstateShop":12<this.Map.getZoom()&&this.displayRealEstates((yield this.realestate.EntriesOnMap(this.RealEstateDetailQuery)));break;case"RentalShop":12<this.Map.getZoom()&&this.displayRentals((yield this.rental.EntriesOnMap(this.RentalDetailQuery)));break;default:if(this.isFiltersChanged){for(let s in this.Markers){let l=this.Markers[s];l.BuildShop(this.SelectedCategory,this.SelectedProduct,this.Keywords,this.CategoryProducts),l.hasEntries&&l.showInfoWindow()}this.PreviousFilters.SelectedCategory=this.SelectedCategory,this.PreviousFilters.SelectedProduct=this.SelectedProduct,this.PreviousFilters.Keywords=this.Keywords,this.PreviousFilters.Products=this.CategoryProducts}else;}})}};__decorate([core_1.ViewChild("CopyMessageButton"),__metadata("design:type",core_1.ElementRef)],AppComponent.prototype,"CopyMessageButton",void 0),__decorate([core_1.ViewChild("MessageTextArea"),__metadata("design:type",core_1.ElementRef)],AppComponent.prototype,"MessageTextArea",void 0),__decorate([core_1.HostListener("window:resize",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",void 0)],AppComponent.prototype,"onResize",null),__decorate([core_1.ViewChild("autocomplete"),__metadata("design:type",errisy_completer_1.CompleterCmp)],AppComponent.prototype,"autocomplete",void 0),AppComponent=__decorate([core_1.Component({selector:"my-app",template:" <!--This page is the framework for the app--> <div class=\"app-frame\"> <div google-map [Lng]=\"location.x\" [Lat]=\"location.y\" [Zoom]=\"14\" (MapInit)=\"onMapReady($event);\" class=\"app-map\"> </div> <div class=\"app-nav\"> <div class=\"app-img-btn btn-border\" (click)=\"Mode='Type'\" *ngIf=\"!isKeywordsEditing\"> <img [src]=\"SelectedShopType.Image\" [title]=\"SelectedShopType.Title\" *ngIf=\"SelectedShopType\"> </div> <div class=\"app-img-btn btn-border\" (click)=\"Mode='Category'\" *ngIf=\"!isKeywordsEditing\"> <img [src]=\"SelectedCategory.Image\" [title]=\"SelectedCategory.Name\" *ngIf=\"SelectedCategory\"> </div> <div class=\"app-img-btn btn-border\" (click)=\"Mode='Product'\" *ngIf=\"!isKeywordsEditing\"> <img [src]=\"SelectedProduct.Image\" [title]=\"SelectedProduct.Name\" *ngIf=\"SelectedProduct\"> </div> <!--input class=\"keywords\" type=\"text\" [(ngModel)]=\"Keywords\" (focus)=\"onKeywordsFocused();\"/>--> <div class=\"input\" (click)=\"enableKeywords();\" [class.placeholder]=\"!Keywords\" *ngIf=\"!isKeywordsEditing\"> {{Keywords?Keywords:'Keywords'}} </div> <auto-completer #autocomplete class=\"keywords\" [(ngModel)]=\"Keywords\" (keydown)=\"onKeywordsKeydown($event)\" (focus)=\"onKeywordsFocused();\" searchFields=\"Name\" [dataService]=\"KeywordsService\" minSearchLength=\"1\" *ngIf=\"isKeywordsEditing\"></auto-completer> <div class=\"app-img-btn btn-border\" (click)=\"applyKeywords();\" *ngIf=\"isKeywordsEditing\"> <svg height=\"64\" width=\"64\" viewBox=\"0 0 64 64\"> <path d=\"M 6,38 l 20,20 l 30,-50\" stroke=\"black\" stroke-width=\"6\" fill-opacity=\"0\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/> </svg> </div> <div class=\"app-img-btn btn-border\" (click)=\"cancelKeywords();\" *ngIf=\"isKeywordsEditing\"> <svg height=\"64\" width=\"64\" viewBox=\"0 0 64 64\"> <path d=\"M 6,6 l 52,52 M 6,58 l 52,-52\" stroke=\"black\" stroke-width=\"6\" fill-opacity=\"0\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/> </svg> </div> <div class=\"app-img-btn btn-border list\" (click)=\"Mode='List'\" *ngIf=\"!isKeywordsEditing\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/list.svg\"> </div> </div> <div class=\"app-selector\" *ngIf=\"Mode=='Type'\"> <div class=\"selector-header\"> <span>Select Shop Type</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"Mode='None'\"></svg> </div> <div class=\"selector-body\"> <div *ngFor=\"let shoptype of GeneralSetting.ShopTypes;\" class=\"body-item\" (click)=\"selectShopType(shoptype);\"> <img src=\"{{shoptype.Image}}\"> <span>{{shoptype.Title}}</span> </div> </div> <div class=\"selector-footer\"> </div> </div> <div class=\"app-selector\" *ngIf=\"Mode=='Category'\"> <div class=\"selector-header\"> <span>Select Category</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"Mode='None'\"></svg> </div> <div class=\"selector-body\"> <div *ngFor=\"let category of Categories;\" class=\"body-item\" (click)=\"selectCategory(category);\"> <img src=\"{{category.Image}}\"> <span>{{category.Name}}</span> </div> </div> <div class=\"selector-footer\"> </div> </div> <div class=\"app-selector\" *ngIf=\"Mode=='Product'\"> <div class=\"selector-header\"> <span>Select Product</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"Mode='None'\"></svg> </div> <div class=\"selector-filter\"> <span class=\"filter-label\">Filter:</span> <input class=\"filter-value\" type=\"text\" [(ngModel)]=\"ProductFilter\"> <div class=\"filter-clear btn-border\" (click)=\"ProductFilter='';\"> <svg height=\"30\" width=\"30\" viewBox=\"0 0 64 64\"> <path d=\"M 6,6 l 52,52 M 6,58 l 52,-52\" stroke=\"black\" stroke-width=\"6\" fill-opacity=\"0\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/> </svg> </div> </div> <div class=\"selector-body\"> <div *ngFor=\"let product of CategoryProducts|filter:'Name':ProductFilter;\" class=\"body-item\" (click)=\"selectProduct(product);\"> <img src=\"{{product.Image}}\"> <span>{{product.Name}}</span> </div> </div> <div class=\"selector-footer\"> </div> </div> <!--Rental Query--> <div class=\"rental-query\" [style.height]=\"AdditionalPanelHeight\" [style.width]=\"AdditionalPanelWidth\" *ngIf=\"isKeywordsEditing && SelectedShopType && SelectedShopType.Name=='RentalShop'\"> <div class=\"select\"> <span>Category</span> <select [(ngModel)]=\"RentalQuery.Category\" (ngModelChange)=\"RentalCategoryChange($event)\"> <option value=\"All\">All</option> <option value=\"Room\">Room</option> <option value=\"Unit\">Unit</option> <option value=\"Apartment\">Apartment</option> <option value=\"Townhouse\">Townhouse</option> <option value=\"House\">House</option> <option value=\"Entire Propery\">All Entire Propery</option> <option value=\"Bedroom Share\">Bedroom Share</option> </select> </div> <div class=\"range\"> <span>Price</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'PriceFrom',-10, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RentalQuery.PriceFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'PriceFrom',10, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'PriceTo',-10, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RentalQuery.PriceTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'PriceTo',10, 0)\">+</div> </div> </div> </div> <div *ngIf=\"RentalQuery.Category=='Room'\"> <div checkbox [(Value)]=\"RentalQuery.KeyLock\" label=\"Key Lock\"></div> <div checkbox [(Value)]=\"RentalQuery.HasPrivateToilet\" label=\"Private Toilet\"></div> <div checkbox [(Value)]=\"RentalQuery.HasPrivateBathroom\" label=\"Private Bathroom\"></div> <div checkbox [(Value)]=\"RentalQuery.HasPrivateKitchen\" label=\"Private Kitchen\"></div> <div checkbox [(Value)]=\"RentalQuery.HasPrivateLaundry\" label=\"Private Laundry\"></div> <div checkbox [(Value)]=\"RentalQuery.HasPrivateGarageOrCarPort\" label=\"Private Car Park\"></div> </div> <div class=\"range\" *ngIf=\"RentalQuery.Category=='Room'\"> <span>Room Size</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'RoomSizeFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RentalQuery.RoomSizeFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'RoomSizeFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'RoomSizeTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RentalQuery.RoomSizeTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'RoomSizeTo',1, 0)\">+</div> </div> </div> </div> <div *ngIf=\"RentalQuery.Category|in:RentalEntireProperty\"> <div class=\"range\"> <span>Bedroom</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BedroomFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RentalQuery.BedroomFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BedroomFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BedroomTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RentalQuery.BedroomTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BedroomTo',1, 0)\">+</div> </div> </div> </div> <div class=\"range\"> <span>Toilet</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'ToiletFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RentalQuery.ToiletFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'ToiletFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'ToiletTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RentalQuery.ToiletTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'ToiletTo',1, 0)\">+</div> </div> </div> </div> <div class=\"range\"> <span>Bathroom</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BathroomFrom',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RentalQuery.BathroomFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BathroomFrom',1)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BathroomTo',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RentalQuery.BathroomTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RentalQuery,'BathroomTo',1)\">+</div> </div> </div> </div> </div> <div> <div checkbox [(Value)]=\"RentalQuery.IsQuiteStreet\" label=\"Quite Street\"></div> </div> </div> <!--Real Estate Query--> <div class=\"realestate-query\" [style.height]=\"AdditionalPanelHeight\" [style.width]=\"AdditionalPanelWidth\" *ngIf=\"isKeywordsEditing && SelectedShopType && SelectedShopType.Name=='RealEstateShop'\"> <div class=\"select\"> <span>Category</span> <select [(ngModel)]=\"RealEstateQuery.Category\" (ngModelChange)=\"RealEstateCategoryChange($event)\"> <option value=\"All\">All</option> <option value=\"Unit\">Unit</option> <option value=\"Apartment\">Apartment</option> <option value=\"Multiple Units\">Multiple Units</option> <option value=\"Townhouse\">Townhouse</option> <option value=\"House\">House</option> <option value=\"All Buildings\">All Buildings</option> <option value=\"Land\">Land</option> </select> </div> <div class=\"select\"> <span>Price Type</span> <select [(ngModel)]=\"RealEstateQuery.PriceStrategy\"> <option value=\"Any\">Any</option> <option value=\"Explicit\">Explicit</option> <option value=\"Inexplicit\">Inexplicit</option> <option value=\"Exact Price\">Exact Price</option> <option value=\"Plus\">Plus</option> <option value=\"Offers Over\">Offers Over</option> <option value=\"POA\">POA</option> <option value=\"Submit Your Offer\">Submit Your Offer</option> <option value=\"Auction\">Auction</option> </select> </div> <div *ngIf=\"RealEstateQuery.PriceStrategy|in:ExplicitPriceStrategies\"> <div checkbox [(Value)]=\"RealEstateQuery.IncludeInexplicit\" label=\"Include Inexplicit Prices\"></div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.PriceStrategy|in:ExplicitPriceStrategies\"> <span>Price</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'PriceFrom',-10000, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.PriceFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'PriceFrom',10000, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'PriceTo',-10000, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.PriceTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'PriceTo',10000, 0)\">+</div> </div> </div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateBuilding\"> <span>Bedroom</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BedroomFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BedroomTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomTo',1, 0)\">+</div> </div> </div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateBuilding\"> <span>Toilet</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'ToiletFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.ToiletFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'ToiletFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'ToiletTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.ToiletTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'ToiletTo',1, 0)\">+</div> </div> </div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateBuilding\"> <span>Bathroom</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BathroomFrom',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BathroomFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BathroomFrom',1)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BathroomTo',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BathroomTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BathroomTo',1)\">+</div> </div> </div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateBuilding\"> <span>Stories</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'NumberOfStoriesFrom',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.NumberOfStoriesFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'NumberOfStoriesFrom',1)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'NumberOfStoriesTo',-1)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.NumberOfStoriesTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'NumberOfStoriesTo',1)\">+</div> </div> </div> </div> <div> <div checkbox [(Value)]=\"RealEstateQuery.IsQuiteStreet\" label=\"Quite Street\"></div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateWithPrivateYard\"> <span>Stories</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BedroomFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.BedroomTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'BedroomTo',1, 0)\">+</div> </div> </div> </div> <div class=\"range\" *ngIf=\"RealEstateQuery.Category|in:RealEstateWithLand\"> <span>Land Size</span> <div class=\"values\"> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'LandSizeFrom',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2265\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.LandSizeFrom\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'LandSizeFrom',1, 0)\">+</div> </div> <div class=\"half\"> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'LandSizeTo',-1, 0)\">-</div> <div spanbox type=\"n\" style=\"min-width: 60px\" prefix=\"\u2264\" forceNumber=\"true\" [(Value)]=\"RealEstateQuery.LandSizeTo\"> </div> <div class=\"btn-number\" style=\"flex: 0 0 24px\" (click)=\"AddNumber(RealEstateQuery,'LandSizeTo',1, 0)\">+</div> </div> </div> </div> <div *ngIf=\"RealEstateQuery.Category|in:RealEstateWithPrivateYard\"> <div checkbox [(Value)]=\"RealEstateQuery.HasPool\" label=\"Swimming Pool\"></div> </div> <div *ngIf=\"RealEstateQuery.Category|in:RealEstateWithPrivateYard\"> <div checkbox [(Value)]=\"RealEstateQuery.HasGrannyFlat\" label=\"Has Granny Flat\"></div> </div> <div class=\"select\" *ngIf=\"RealEstateQuery.Category|in:RealEstateWithPrivateYard\"> <span>Fence/Wall</span> <select [(ngModel)]=\"RealEstateQuery.WallOrFence\"> <option value=\"Any\">Any</option> <option value=\"All Sides\">All Sides</option> <option value=\"Only Between Neighbours\">Only Between Neighbours</option> <option value=\"Two Sides or Less\">Two Sides or Less</option> <option value=\"None\">None</option> </select> </div> <div class=\"select\"> <span>Structural Material</span> <select [(ngModel)]=\"RealEstateQuery.StructuralMaterial\"> <option value=\"Any\">Any</option> <option value=\"Timber\">Timber</option> <option value=\"Non-Timber\">Non-Timber</option> <option value=\"Concrete\">Concrete</option> <option value=\"Steel\">Steel</option> <option value=\"Bricks\">Bricks</option> </select> </div> </div> <!--Shop Details--> <div class=\"app-selector\" *ngIf=\"Mode=='Detail'\"> <!-- show the details of shop--> <div class=\"selector-header\"> <span>{{SelectedShop.Name}}</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"CloseFloatingView();\"></svg> </div> <div class=\"body\"> <div class=\"address\"> {{SelectedShop.StreetNumber}} {{SelectedShop.Street}}, {{SelectedShop.Suburb}}, {{SelectedShop.Region}}, {{SelectedShop.State}} {{SelectedShop.Postcode}}, {{SelectedShop.Country}} </div> <div class=\"opening-hours\"> <table cellspacing=\"0\" cellpadding=\"0\"> <tr *ngFor=\"let day of (SelectedShop|openninghours:HoursLimit); let Index = index;\" class=\"day-hours\" [class.selected]=\"Index==0\"> <td class=\"date\">{{day.Day}}</td> <td class=\"weekday\">{{day.Day | weekday}}</td> <td class=\"hours\" *ngIf=\"!day.Closed\"> <span *ngFor=\"let hours of day.OpeningHour\">{{hours.From}}-{{hours.To}}</span> </td> <td class=\"closed\" *ngIf=\"day.Closed\"> Closed </td> </tr> </table> <div class=\"more\" (click)=\"ShowMoreHours();\" *ngIf=\"HoursLimit\">more...</div> </div> <div class=\"section-title\" *ngIf=\"SelectedShop.CanQuery || SelectedShop.CanOrder\"> Products </div> <div class=\"instructions\" *ngIf=\"SelectedShop.CanQuery\"> <div class=\"holder\"> <div class=\"instruction\">Click or Tap product to select.</div> <div class=\"instruction\">Use the contact below to send query.</div> </div> </div> <div class=\"instructions\" *ngIf=\"SelectedShop.CanOrder\"> <div class=\"holder\"> <div class=\"instruction\">Click or Tap product to increase number to order.</div> <div class=\"instruction\">Use the SMS below to send order.</div> </div> </div> <div class=\"products\" *ngIf=\"SelectedShop.Products\"> <div *ngFor=\"let entry of SelectedShop.Products; let Index = index;\" class=\"item\" [class.showdetail]=\"entry.DetailDescription && Index==ProductShowDetailIndex\" [class.selected]=\"entry._id==SelectedItemID\" (click)=\"SelectShopProductEntry(Index);\"> <div class=\"info\"> <div class=\"image\" [style.background-image]=\"(entry.Images && entry.Images[0])?'url('+entry.Images[0]+')':''\"> <div class=\"selected\" *ngIf=\"entry.selected\"> <svg viewBox=\"0 0 512 512\"> <path fill=\"#f00\" d=\"M498.817,35.097C343.065,130.587,230.05,251.069,179.272,311.53L54.915,214.1L0,258.371l214.88,218.532  C251.863,382.177,368.985,197.04,512,65.499L498.817,35.097z\"/> </svg> </div> <div class=\"count\" *ngIf=\"entry.count\"> {{entry.count}} </div> <div class=\"reduce\" *ngIf=\"entry.count\" (click)=\"ReduceSelectShopProductEntryCount(Index, $event)\"> - </div> </div> <div class=\"detail\"> <div class=\"vehicle\" *ngIf=\"SelectedShopType.Name=='VehicleShop'\"> <div class=\"brand\">{{entry.Category}}</div> &nbsp; <div class=\"model\">{{entry.Model}}</div> </div> <div class=\"vehicle\" *ngIf=\"SelectedShopType.Name=='VehicleShop'\"> <div class=\"year\">({{entry.Year}})</div> &nbsp; <div class=\"odo\">{{entry.Odometer}}Km</div> </div> <span class=\"price\">${{entry.Price}}{{entry.Unit?('/'+entry.Unit):''}}</span> <span class=\"desc\">{{entry.Description}}</span> <div class=\"dates\" *ngIf=\"SelectedShopType.Name|nin:NoDateShopTypes\"><span class=\"operator\">From:</span> <span class=\"date\">{{entry.StartTime|datetime12}}</span></div> <div class=\"dates\" *ngIf=\"SelectedShopType.Name|nin:NoDateShopTypes\"><span class=\"operator\">To:</span><span class=\"date\">{{entry.EndTime|datetime12}}</span></div> </div> </div> <div class=\"detail\" *ngIf=\"entry.DetailDescription && Index==ProductShowDetailIndex\"> <div class=\"title\"> Detail Description </div> <div class=\"content\"> {{entry.DetailDescription}} </div> </div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedShop.CanQuery\"> Query </div> <div class=\"section-title\" *ngIf=\"SelectedShop.CanOrder\"> Order </div> <div class=\"instructions\" *ngIf=\"SelectedShop.CanOrder\"> <div class=\"holder\"> <div class=\"instruction\">Click or Tap Links to send email, make phone call, or send SMS.</div> </div> </div> <div class=\"contacts\" *ngIf=\"SelectedShop.CanQuery || SelectedShop.CanOrder\"> <!-- for query and order via email, phone, sms --> <div class=\"contact\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/email.svg\"> <a href=\"mailto:{{SelectedShop.Email}}?subject={{SelectedShop.CanQuery?'Query':'Order'}} from Smart Koala&body={{SelectedShopQueryMessage(true)}}\">{{SelectedShop.Email}}</a> </div> <div class=\"contact\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/phone.svg\"> <a href=\"tel:{{SelectedShop.Telephone}}\">{{SelectedShop.Telephone}}</a> </div> <div class=\"contact\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/mobile.svg\"> <a href=\"tel:{{SelectedShop.Mobile}}\">{{SelectedShop.Mobile}}</a> </div> <div class=\"contact\" (click)=\"buildSMS(SelectedShop.Mobile, SelectedShopQueryMessage())\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\"> <div>Send SMS</div> </div> </div> </div> </div> <!-- lists --> <div class=\"app-selector\" *ngIf=\"Mode=='List'\"> <div class=\"selector-header\"> <a class=\"join\" target=\"_managerment\" href=\"/management.html\">Show your products at Smart Koala</a> <svg btn-close width=\"36\" height=\"36\" (click)=\"Mode='None'\"></svg> </div> <div class=\"selector-list\" *ngIf=\"(SelectedShopType.Name|in:ShopListTypes) && ItemsDiffer.arr\"> <div class=\"shop\" *ngFor=\"let shop of ItemsDiffer.arr;\"> <span (click)=\"onMapWindowTitleClick(shop._id);\">{{shop.Name}}</span> <div> <div *ngFor=\"let entry of shop.Products\" (click)=\"onMapWindowItemClick(shop._id, entry._id);\"> <div class=\"image\" [style.background-image]=\"(entry.Images && entry.Images[0])?'url('+entry.Images[0]+')':''\"></div> <div> <div class=\"vehicle\" *ngIf=\"SelectedShopType.Name=='VehicleShop'\"> <div class=\"brand\">{{entry.Category}}</div> &nbsp; <div class=\"model\">{{entry.Model}}</div> </div> <div class=\"vehicle\" *ngIf=\"SelectedShopType.Name=='VehicleShop'\"> <div class=\"year\">({{entry.Year}})</div> &nbsp; <div class=\"odo\">{{entry.Odometer}}Km</div> </div> <span class=\"price\">${{entry.Price}}/{{entry.Unit}}</span> <span class=\"desc\">{{entry.Description}}</span> <div class=\"dates\" *ngIf=\"SelectedShopType.Name|nin:NoDateShopTypes\"><span class=\"operator\">From:</span> <span class=\"date\">{{entry.StartTime|datetime12}}</span></div> <div class=\"dates\" *ngIf=\"SelectedShopType.Name|nin:NoDateShopTypes\"><span class=\"operator\">To:</span><span class=\"date\">{{entry.EndTime|datetime12}}</span></div> </div> </div> </div> </div> </div> <div class=\"goe-list\" *ngIf=\"SelectedShopType.Name=='RealEstateShop' && Markers\"> <div class=\"marker\" *ngFor=\"let marker of (Markers|each)\" (click)=\"onMapWindowRealEstateClick(marker.Entry._id);\"> <div class=\"title\">{{marker.Entry|address}}</div> <div class=\"detail\"> <div class=\"image\" *ngIf=\"marker.Entry.Images && marker.Entry.Images[0]\" [style.background-image]=\"'url('+marker.Entry.Images[0]+')'\"></div> <div class=\"holder\"> <div class=\"section\"> <div class=\"field title\">{{marker.Entry.Category}}</div> <div class=\"field\">{{marker.Entry|realestateprice}}</div> <div class=\"field\" *ngIf=\"marker.Entry.Category=='Land'\">Size: {{marker.Entry.Land.LandSize}}M<sup>2</sup></div> <div class=\"field\" *ngIf=\"marker.Entry.Category!='Land'\"> <img class=\"unit\" title=\"Number of Stories\" src=\"https://rawgit.com/errisy/deploy/master/svg/stairs.svg\"> <span class=\"number\">{{marker.Entry.MainBuilding.NumberOfStories}}</span> <img class=\"unit\" title=\"Number of Bedrooms\" src=\"https://rawgit.com/errisy/deploy/master/svg/bedroom.svg\"> <span class=\"number\">{{marker.Entry.MainBuilding.NumberOfBedrooms}}</span> <img class=\"unit\" title=\"Number of Bathrooms\" src=\"https://rawgit.com/errisy/deploy/master/svg/bathroom.svg\"> <span class=\"number\">{{marker.Entry.MainBuilding.NumberOfBathrooms}}</span> <img class=\"unit\" title=\"Number of Toilets\" src=\"https://rawgit.com/errisy/deploy/master/svg/toilet.svg\"> <span class=\"number\">{{marker.Entry.MainBuilding.NumberOfToilets}}</span> </div> </div> </div> </div> </div> </div> <div class=\"goe-list\" *ngIf=\"SelectedShopType.Name=='RentalShop' && Markers\"> <div class=\"marker\" *ngFor=\"let marker of (Markers|each)\" (click)=\"onMapWindowRentalClick(marker.Entry._id);\"> <div class=\"title\">{{marker.Entry|address}}</div> <div class=\"detail\"> <div class=\"image\" *ngIf=\"marker.Entry.Images && marker.Entry.Images[0]\" [style.background-image]=\"'url('+marker.Entry.Images[0]+')'\"></div> <div class=\"holder\"> <div class=\"section\"> <div class=\"field title\">{{marker.Entry.Category}}</div> <div class=\"field\">${{marker.Entry.Price}}/Week</div> <div class=\"field\" *ngIf=\"marker.Entry.Category=='Room'\"> <img class=\"unit\" title=\"Key Lock\" *ngIf=\"marker.Entry.RentalRoom.CanLock\" src=\"https://rawgit.com/errisy/deploy/master/svg/lock.svg\"> <img class=\"unit\" title=\"Toilet\" src=\"https://rawgit.com/errisy/deploy/master/svg/toilet.svg\"> <span class=\"number\" [title]=\"marker.Entry.RentalRoom.Toilet\" [class.private]=\"marker.Entry.RentalRoom.Toilet=='Private'\">{{marker.Entry.RentalRoom.Toilet|privateshared}}</span> <img class=\"unit\" title=\"Bathroom\" src=\"https://rawgit.com/errisy/deploy/master/svg/bathroom.svg\"> <span class=\"number\" [title]=\"marker.Entry.RentalRoom.Bathroom\" [class.private]=\"marker.Entry.RentalRoom.Bathroom=='Private'\">{{marker.Entry.RentalRoom.Bathroom|privateshared}}</span> <img class=\"unit\" title=\"Laundry\" *ngIf=\"marker.Entry.RentalRoom.Laundry|in:['Private','Shared']\" src=\"https://rawgit.com/errisy/deploy/master/svg/laundry.svg\"> <span class=\"number\" [title]=\"marker.Entry.RentalRoom.Laundry\" [class.private]=\"marker.Entry.RentalRoom.Laundry=='Private'\" *ngIf=\"marker.Entry.RentalRoom.Laundry|in:['Private','Shared']\">{{marker.Entry.RentalRoom.Laundry|privateshared}}</span> <img class=\"unit\" title=\"Kitchen\" *ngIf=\"marker.Entry.RentalRoom.Kitchen|in:['Private','Shared']\" src=\"https://rawgit.com/errisy/deploy/master/svg/kitchen.svg\"> <span class=\"number\" [title]=\"marker.Entry.RentalRoom.Kitchen\" [class.private]=\"marker.Entry.RentalRoom.Kitchen=='Private'\" *ngIf=\"marker.Entry.RentalRoom.Kitchen|in:['Private','Shared']\">{{marker.Entry.RentalRoom.Kitchen|privateshared}}</span> </div> <div class=\"field\" *ngIf=\"marker.Entry.Category|in:RentalEntirePropertyTypes\"> <img class=\"unit\" title=\"Number of Stories\" src=\"https://rawgit.com/errisy/deploy/master/svg/stairs.svg\"> <span class=\"number\">{{marker.Entry.Building.NumberOfStories}}</span> <img class=\"unit\" title=\"Number of Bedrooms\" src=\"https://rawgit.com/errisy/deploy/master/svg/bedroom.svg\"> <span class=\"number\">{{marker.Entry.Building.NumberOfBedrooms}}</span> <img class=\"unit\" title=\"Number of Bathrooms\" src=\"https://rawgit.com/errisy/deploy/master/svg/bathroom.svg\"> <span class=\"number\">{{marker.Entry.Building.NumberOfBathrooms}}</span> <img class=\"unit\" title=\"Number of Toilets\" src=\"https://rawgit.com/errisy/deploy/master/svg/toilet.svg\"> <span class=\"number\">{{marker.Entry.Building.NumberOfToilets}}</span> </div> </div> </div> </div> </div> </div> </div> <!--detail for rental--> <div class=\"app-selector\" *ngIf=\"Mode=='Rental'\"> <!-- show the details for rental --> <div class=\"selector-header\"> <span>{{SelectedRentalEntry?(SelectedRentalEntry|address):'Loading...'}}</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"CloseFloatingView();\"></svg> </div> <div class=\"section-title\"> Price </div> <div class=\"facility-row\" *ngIf=\"SelectedRentalEntry\"> <div class=\"name\">Price</div> <div class=\"value\">${{SelectedRentalEntry.Price}}/Week</div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.RentalTerm\"> Price Terms </div> <div class=\"price-terms\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.RentalTerm\"> <div class=\"term\" *ngFor=\"let term of SelectedRentalEntry.RentalTerm.RentalPrices\"> <div class=\"range\"> {{term.TermMinDays}}-{{term.TermMaxDays}} Days </div> <div class=\"field\"> <div class=\"name\">Price</div> <div class=\"value\">${{term.PricePerDay}}/Day</div> </div> <div class=\"field\"> <div class=\"name\">Bond</div> <div class=\"value\">${{term.Bond}}</div> </div> <div class=\"field\"> <div class=\"name\">Tenant</div> <div class=\"value\">${{term.Tenant}}</div> </div> <div class=\"field\"> <div class=\"name\">Exit Cleaning</div> <div class=\"value\">{{term.ExitCleaning}}</div> </div> <div class=\"field\"> <div class=\"name\">Exit Fee</div> <div class=\"value\">{{term.ExitCleaningFee}}</div> </div> </div> </div> <div class=\"section-title\"> Images </div> <div class=\"selector-images\" *ngIf=\"SelectedRentalEntry\"> <div class=\"image\" [style.background-image]=\"image?'url('+image+')':''\" *ngFor=\"let image of SelectedRentalEntry.Images; let Index = index;\" (click)=\"ShowGallery(Index,SelectedRentalEntry.Images)\"> </div> </div> <div class=\"section-title\"> General Facilities </div> <div class=\"facility-row\" *ngIf=\"SelectedRentalEntry\"> <div class=\"name\">Car Parking</div> <div class=\"value\">{{SelectedRentalEntry.CarParking|join}}</div> </div> <div class=\"facility-row\" *ngIf=\"SelectedRentalEntry\"> <div class=\"name\">Quite Street</div> <div class=\"value\">{{SelectedRentalEntry.IsQuiteStreet}}</div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && (SelectedRentalEntry.Category|in:['Room','Bedroom Share'])\"> Room Rental </div> <div class=\"rental-room\" *ngIf=\"SelectedRentalEntry && (SelectedRentalEntry.Category|in:['Room','Bedroom Share'])\"> <!-- content for room --> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Room Size</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.RoomSizeInSquareMeter}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Window Size</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.WindowSizeInSquareMeter}}M<sup>2</sup></div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Beds</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.Beds|join}}</div> </div> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Key Lock</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.CanLock?'Yes':'No'}}</div> </div> <div class=\"facility\"> <div class=\"name\">Toilet</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.Toilet}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bathroom</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.Bathroom}}</div> </div> <div class=\"facility\"> <div class=\"name\">Kitchen</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.Kitchen}}</div> </div> <div class=\"facility\"> <div class=\"name\">Laundry</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.Laundry}}</div> </div> <div class=\"facility\"> <div class=\"name\">Living Room</div> <div class=\"value\">{{SelectedRentalEntry.RentalRoom.LivingRoom}}</div> </div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && (SelectedRentalEntry.Category|in:['Room','Bedroom Share'])\"> Fees </div> <div class=\"rental-fees\" *ngIf=\"SelectedRentalEntry && (SelectedRentalEntry.Category|in:['Room','Bedroom Share'])\"> <div class=\"fee\"> <div class=\"name\">Electricity</div> <div class=\"value\">{{SelectedRentalEntry.Electricity}}</div> </div> <div class=\"fee\"> <div class=\"name\">Water</div> <div class=\"value\">{{SelectedRentalEntry.Water}}</div> </div> <div class=\"fee\"> <div class=\"name\">Gas</div> <div class=\"value\">{{SelectedRentalEntry.Gas}}</div> </div> <div class=\"fee\"> <div class=\"name\">Internet</div> <div class=\"value\">{{SelectedRentalEntry.Internet}}</div> </div> <div class=\"fee\"> <div class=\"name\">Telephone</div> <div class=\"value\">{{SelectedRentalEntry.Telephone}}</div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.Land && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Yard or Land </div> <div class=\"rental-property\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.Land && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <!-- rental property land --> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Land Size</div> <div class=\"value\">{{SelectedRentalEntry.Land.LandSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Paved Yard</div> <div class=\"value\">{{SelectedRentalEntry.Land.BuildingFloorArea}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Lawn Area</div> <div class=\"value\">{{SelectedRentalEntry.Land.YardLawnSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Pool Size</div> <div class=\"value\">{{SelectedRentalEntry.Land.TotalPoolSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Floor Area</div> <div class=\"value\">{{SelectedRentalEntry.Land.BuildingFloorArea}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRentalEntry.Land.NumberOfCarport}}</div> </div> <div class=\"facility\"> <div class=\"name\">Car Spaces</div> <div class=\"value\">{{SelectedRentalEntry.Land.NumberOfCarSpace}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Yard Pavement</div> <div class=\"value\">{{SelectedRentalEntry.Land.YardPavementType}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Enclose</div> <div class=\"value\">{{SelectedRentalEntry.Land.WallOrFenceType}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Fence/Wall</div> <div class=\"value\">{{SelectedRentalEntry.Land.WallOrFenceCoverage}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Lock Gate</div> <div class=\"value\">{{SelectedRentalEntry.Land.HasLockableGate}}</div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.Building && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Main Building </div> <div class=\"building\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.Building && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Year Built</div> <div class=\"value\">{{SelectedRentalEntry.Building.YearOfConstruction}}</div> </div> <div class=\"facility\"> <div class=\"name\">Stories</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfStories}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bedrooms</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfBedrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bathrooms</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfBathrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Toilets</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfToilets}}</div> </div> <div class=\"facility\"> <div class=\"name\">Kitchens</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfKitchens}}</div> </div> <div class=\"facility\"> <div class=\"name\">Living Rooms</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfLivingRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Dining Rooms</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfDiningRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Storages</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfStorageRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRentalEntry.Building.NumberOfCarports}}</div> </div> <div class=\"facility\"> <div class=\"name\">Pool</div> <div class=\"value\">{{SelectedRentalEntry.Building.HasSwimmingPool}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Outer Wall</div> <div class=\"value\">{{SelectedRentalEntry.Building.OuterWallMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Structure</div> <div class=\"value\">{{SelectedRentalEntry.Building.StructuralMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Roof</div> <div class=\"value\">{{SelectedRentalEntry.Building.RoofMaterial|join}}</div> </div> <div class=\"floors\"> <div class=\"title\"> Floor Plan </div> <div class=\"floor\" *ngFor=\"let floor of SelectedRentalEntry.Building.Floors\"> <div class=\"title\"> Level {{floor.Level}} </div> <div class=\"rooms\"> <div class=\"room\" *ngFor=\"let room of floor.Rooms\"> <div class=\"type\"> {{room.RoomType}} </div> <div class=\"field\"> <div class=\"name\">Floor Material</div> <div class=\"value\">{{room.FloorMaterial}}</div> </div> <div class=\"field\"> <div class=\"name\">Floor Color</div> <div class=\"value\">{{room.FloorColors}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Material</div> <div class=\"value\">{{room.InteriorWallMaterials|join}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Color</div> <div class=\"value\">{{room.InteriorWallColors}}</div> </div> </div> </div> </div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.GrannyFlat && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Granny Flat </div> <div class=\"building\" *ngIf=\"SelectedRentalEntry && SelectedRentalEntry.GrannyFlat && (SelectedRentalEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Year Built</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.YearOfConstruction}}</div> </div> <div class=\"facility\"> <div class=\"name\">Stories</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfStories}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bedrooms</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfBedrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bathrooms</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfBathrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Toilets</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfToilets}}</div> </div> <div class=\"facility\"> <div class=\"name\">Kitchens</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfKitchens}}</div> </div> <div class=\"facility\"> <div class=\"name\">Living Rooms</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfLivingRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Dining Rooms</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfDiningRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Storages</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfStorageRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.NumberOfCarports}}</div> </div> <div class=\"facility\"> <div class=\"name\">Pool</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.HasSwimmingPool}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Outer Wall</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.OuterWallMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Structure</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.StructuralMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Roof</div> <div class=\"value\">{{SelectedRentalEntry.GrannyFlat.RoofMaterial|join}}</div> </div> <div class=\"floors\"> <div class=\"title\"> Floor Plan </div> <div class=\"floor\" *ngFor=\"let floor of SelectedRentalEntry.GrannyFlat.Floors\"> <div class=\"title\"> Level {{floor.Level}} </div> <div class=\"rooms\"> <div class=\"room\" *ngFor=\"let room of floor.Rooms\"> <div class=\"type\"> {{room.RoomType}} </div> <div class=\"field\"> <div class=\"name\">Floor Material</div> <div class=\"value\">{{room.FloorMaterial}}</div> </div> <div class=\"field\"> <div class=\"name\">Floor Color</div> <div class=\"value\">{{room.FloorColors}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Material</div> <div class=\"value\">{{room.InteriorWallMaterials|join}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Color</div> <div class=\"value\">{{room.InteriorWallColors}}</div> </div> </div> </div> </div> </div> </div> <div class=\"section-title\"> Instructions </div> <div class=\"instructions\"> <div class=\"title\">In the following sections:</div> <div class=\"holder\"> <div class=\"instruction\">Click or Tap Links to send email, make phone call, or send SMS.</div> <!--<div class=\"instruction\">Click or Tap phone links to call.</div>\r\n                <div class=\"instruction\">Click or Tap <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\" /> to send SMS.</div>--> </div> </div> <div class=\"section-title\"> {{SelectedAgent?'Agent':'Loading Agent...'}} </div> <div class=\"agent\" *ngIf=\"SelectedAgent\"> <div class=\"card\"> <div class=\"name\"> {{SelectedAgent.Name}} </div> <div class=\"detail\"> <div class=\"fields\"> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/link.svg\"> <div class=\"link\"> <a href=\"{{SelectedAgent.Link}}\" target=\"_agent_link_{{SelectedAgent.Name}}\">{{SelectedAgent.Link}}</a> </div> </div> <div class=\"item\"> <img src=\"/svg/phone.svg\"> <div class=\"link\"> <a href=\"tel:{{SelectedAgent.Phone}}\">{{SelectedAgent.Phone}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/mobile.svg\"> <div class=\"link\"> <a href=\"tel:{{SelectedAgent.Mobile}}\">{{SelectedAgent.Mobile}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\"> <div class=\"sms\" (click)=\"buildSMS(SelectedAgent.Mobile, 'I am interested in '+formatAddress(SelectedRentalEntry)+'. Please contact me.')\">Send SMS</div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/email.svg\"> <div class=\"link\"> <a href=\"mailto:{{SelectedAgent.Email}}?subject=Query from Smart Koala - {{SelectedRentalEntry|address}}&body=Hi {{SelectedAgent.Name}}, %0A%0DI am interested in {{SelectedRentalEntry|address}}, please contact me.%0A%0DThank you!%0A%0D\" target=\"_agent_email_{{SelectedAgent.Name}}\">{{SelectedAgent.Email}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/address.svg\"> <a href=\"{{'https://www.google.com.au/maps/?q='+SelectedAgent.Address}}\" target=\"_agent_address_{{SelectedAgent.Name}}\">{{SelectedAgent.Address}}</a> </div> </div> <div class=\"image\" [style.background-image]=\"SelectedAgent.Image?'url('+SelectedAgent.Image+')':''\"> </div> </div> </div> </div> <div class=\"section-title\"> {{SelectedContacts?'Contacts':'Loading Contacts...'}} </div> <div class=\"contacts\" *ngIf=\"SelectedContacts\"> <div class=\"card\" *ngFor=\"let contact of SelectedContacts\"> <div class=\"name\"> {{contact.Name}} </div> <div class=\"detail\"> <div class=\"fields\"> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/phone.svg\"> <div class=\"link\"> <a href=\"tel:{{contact.Phone}}\">{{contact.Phone}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/mobile.svg\"> <div class=\"link\"> <a href=\"tel:{{contact.Mobile}}\">{{contact.Mobile}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\"> <div class=\"sms\" (click)=\"buildSMS(contact.Mobile, 'I am interested in '+formatAddress(SelectedRentalEntry)+'. Please contact me.')\">Send SMS</div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/email.svg\"> <div class=\"link\"> <a href=\"mailto:{{contact.Email}}?subject=Query from Smart Koala - {{SelectedRentalEntry|address}}&body=Hi {{contact.Name}}, %0A%0DI am interested in {{SelectedRentalEntry|address}}, please contact me.%0A%0DThank you!%0A%0D\" target=\"_agent_link_{{contact.Name}}\">{{contact.Email}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/address.svg\"> <a href=\"{{'https://www.google.com.au/maps/?q='+contact.Address}}\" target=\"_agent_address_{{contact.Name}}\">{{contact.Address}}</a> </div> </div> <div class=\"image\" [style.background-image]=\"contact.Image?'url('+contact.Image+')':''\"> </div> </div> </div> </div> </div> <!--detail for real estate--> <div class=\"app-selector\" *ngIf=\"Mode=='RealEstate'\"> <!-- show the details for real estate --> <div class=\"selector-header\"> <span>{{SelectedRealEstateEntry?(SelectedRealEstateEntry|address):'Loading...'}}</span> <svg btn-close width=\"36\" height=\"36\" (click)=\"CloseFloatingView();\"></svg> </div> <div class=\"section-title\"> Price </div> <div class=\"facility-row\" *ngIf=\"SelectedRealEstateEntry\"> <div class=\"name\">Price Type</div> <div class=\"value\">{{SelectedRealEstateEntry.PriceStrategy}}</div> </div> <div class=\"facility-row\" *ngIf=\"SelectedRealEstateEntry\"> <div class=\"name\">Price</div> <div class=\"value\">${{SelectedRealEstateEntry.Price}}</div> </div> <div class=\"section-title\"> Images </div> <div class=\"selector-images\" *ngIf=\"SelectedRealEstateEntry\"> <div class=\"image\" [style.background-image]=\"image?'url('+image+')':''\" *ngFor=\"let image of SelectedRealEstateEntry.Images; let Index = index;\" (click)=\"ShowGallery(Index,SelectedRealEstateEntry.Images)\"> </div> </div> <div class=\"section-title\"> Inspection Hours </div> <div class=\"opening-hours\" *ngIf=\"SelectedRealEstateEntry\"> <table cellspacing=\"0\" cellpadding=\"0\"> <tr *ngFor=\"let day of (SelectedRealEstateEntry|inspectionhours:HoursLimit); let Index = index;\" class=\"day-hours\" [class.selected]=\"Index==0\"> <td class=\"date\">{{day.Day}}</td> <td class=\"weekday\">{{day.Day | weekday}}</td> <td class=\"hours\" *ngIf=\"!day.Closed\"> <span *ngFor=\"let hours of day.OpeningHour\">{{hours.From}}-{{hours.To}}</span> </td> <td class=\"closed\" *ngIf=\"day.Closed\"> Closed </td> </tr> </table> <div class=\"more\" (click)=\"ShowMoreHours();\" *ngIf=\"HoursLimit\">more...</div> </div> <div class=\"section-title\"> General Facilities </div> <div class=\"facility-row\" *ngIf=\"SelectedRealEstateEntry\"> <div class=\"name\">Car Parking</div> <div class=\"value\">{{SelectedRealEstateEntry.CarParking|join}}</div> </div> <div class=\"facility-row\" *ngIf=\"SelectedRealEstateEntry\"> <div class=\"name\">Quite Street</div> <div class=\"value\">{{SelectedRealEstateEntry.IsQuiteStreet}}</div> </div> <div class=\"section-title\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.Land && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Yard or Land </div> <div class=\"building\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.Land && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <!-- rental property land --> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Land Size</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.LandSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Paved Yard</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.BuildingFloorArea}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Lawn Area</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.YardLawnSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Pool Size</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.TotalPoolSize}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Floor Area</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.BuildingFloorArea}}M<sup>2</sup></div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.NumberOfCarport}}</div> </div> <div class=\"facility\"> <div class=\"name\">Car Spaces</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.NumberOfCarSpace}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Yard Pavement</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.YardPavementType}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Enclose</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.WallOrFenceType}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Fence/Wall</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.WallOrFenceCoverage}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Lock Gate</div> <div class=\"value\">{{SelectedRealEstateEntry.Land.HasLockableGate}}</div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.MainBuilding && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Main Building </div> <div class=\"building\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.MainBuilding && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Year Built</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.YearOfConstruction}}</div> </div> <div class=\"facility\"> <div class=\"name\">Stories</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfStories}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bedrooms</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfBedrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bathrooms</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfBathrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Toilets</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfToilets}}</div> </div> <div class=\"facility\"> <div class=\"name\">Kitchens</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfKitchens}}</div> </div> <div class=\"facility\"> <div class=\"name\">Living Rooms</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfLivingRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Dining Rooms</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfDiningRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Storages</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfStorageRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.NumberOfCarports}}</div> </div> <div class=\"facility\"> <div class=\"name\">Pool</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.HasSwimmingPool}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Outer Wall</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.OuterWallMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Structure</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.StructuralMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Roof</div> <div class=\"value\">{{SelectedRealEstateEntry.MainBuilding.RoofMaterial|join}}</div> </div> <div class=\"floors\"> <div class=\"title\"> Floor Plan </div> <div class=\"floor\" *ngFor=\"let floor of SelectedRealEstateEntry.MainBuilding.Floors\"> <div class=\"title\"> Level {{floor.Level}} </div> <div class=\"rooms\"> <div class=\"room\" *ngFor=\"let room of floor.Rooms\"> <div class=\"type\"> {{room.RoomType}} </div> <div class=\"field\"> <div class=\"name\">Floor Material</div> <div class=\"value\">{{room.FloorMaterial}}</div> </div> <div class=\"field\"> <div class=\"name\">Floor Color</div> <div class=\"value\">{{room.FloorColors}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Material</div> <div class=\"value\">{{room.InteriorWallMaterials|join}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Color</div> <div class=\"value\">{{room.InteriorWallColors}}</div> </div> </div> </div> </div> </div> </div> <div class=\"section-title\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.GrannyFlat && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> Granny Flat </div> <div class=\"building\" *ngIf=\"SelectedRealEstateEntry && SelectedRealEstateEntry.GrannyFlat && (SelectedRealEstateEntry.Category|in:['Unit','Apartment','Townhouse','House'])\"> <div class=\"facilities\"> <div class=\"facility\"> <div class=\"name\">Year Built</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.YearOfConstruction}}</div> </div> <div class=\"facility\"> <div class=\"name\">Stories</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfStories}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bedrooms</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfBedrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Bathrooms</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfBathrooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Toilets</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfToilets}}</div> </div> <div class=\"facility\"> <div class=\"name\">Kitchens</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfKitchens}}</div> </div> <div class=\"facility\"> <div class=\"name\">Living Rooms</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfLivingRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Dining Rooms</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfDiningRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Storages</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfStorageRooms}}</div> </div> <div class=\"facility\"> <div class=\"name\">Carports</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.NumberOfCarports}}</div> </div> <div class=\"facility\"> <div class=\"name\">Pool</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.HasSwimmingPool}}</div> </div> </div> <div class=\"facility-row\"> <div class=\"name\">Outer Wall</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.OuterWallMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Structure</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.StructuralMaterials|join}}</div> </div> <div class=\"facility-row\"> <div class=\"name\">Roof</div> <div class=\"value\">{{SelectedRealEstateEntry.GrannyFlat.RoofMaterial|join}}</div> </div> <div class=\"floors\"> <div class=\"title\"> Floor Plan </div> <div class=\"floor\" *ngFor=\"let floor of SelectedRealEstateEntry.GrannyFlat.Floors\"> <div class=\"title\"> Level {{floor.Level}} </div> <div class=\"rooms\"> <div class=\"room\" *ngFor=\"let room of floor.Rooms\"> <div class=\"type\"> {{room.RoomType}} </div> <div class=\"field\"> <div class=\"name\">Floor Material</div> <div class=\"value\">{{room.FloorMaterial}}</div> </div> <div class=\"field\"> <div class=\"name\">Floor Color</div> <div class=\"value\">{{room.FloorColors}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Material</div> <div class=\"value\">{{room.InteriorWallMaterials|join}}</div> </div> <div class=\"field\"> <div class=\"name\">Wall Color</div> <div class=\"value\">{{room.InteriorWallColors}}</div> </div> </div> </div> </div> </div> </div> <div class=\"section-title\"> Instructions </div> <div class=\"instructions\"> <div class=\"title\">In the following sections:</div> <div class=\"holder\"> <div class=\"instruction\">Click or Tap Links to send email, make phone call, or send SMS.</div> <!--<div class=\"instruction\">Click or Tap phone links to call.</div>\r\n                <div class=\"instruction\">Click or Tap SMS link to send SMS.</div>--> </div> </div> <div class=\"section-title\"> {{SelectedAgent?'Agent':'Loading Agent...'}} </div> <div class=\"agent\" *ngIf=\"SelectedAgent\"> <div class=\"card\"> <div class=\"name\"> {{SelectedAgent.Name}} </div> <div class=\"detail\"> <div class=\"fields\"> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/link.svg\"> <div class=\"link\"> <a href=\"{{SelectedAgent.Link}}\" target=\"_agent_link_{{SelectedAgent.Name}}\">{{SelectedAgent.Link}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/phone.svg\"> <div class=\"link\"> <a href=\"tel:{{SelectedAgent.Phone}}\">{{SelectedAgent.Phone}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/mobile.svg\"> <div class=\"link\"> <a href=\"tel:{{SelectedAgent.Mobile}}\">{{SelectedAgent.Mobile}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\"> <div class=\"sms\" (click)=\"buildSMS(SelectedAgent.Mobile, 'I am interested in '+formatAddress(SelectedRealEstateEntry)+'. Please contact me.')\">Send SMS</div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/email.svg\"> <div class=\"link\"> <a href=\"mailto:{{SelectedAgent.Email}}?subject=Query from Smart Koala - {{SelectedRealEstateEntry|address}}&body=Hi {{SelectedAgent.Name}}, %0A%0DI am interested in {{SelectedRentalEntry|address}}, please contact me.%0A%0DThank you!%0A%0D\" target=\"_agent_email_{{SelectedAgent.Name}}\" target=\"_agent_email_{{SelectedAgent.Name}}\">{{SelectedAgent.Email}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/address.svg\"> <a href=\"{{'https://www.google.com.au/maps/?q='+SelectedAgent.Address}}\" target=\"_agent_address_{{SelectedAgent.Name}}\">{{SelectedAgent.Address}}</a> </div> </div> <div class=\"image\" [style.background-image]=\"SelectedAgent.Image?'url('+SelectedAgent.Image+')':''\"> </div> </div> </div> </div> <div class=\"section-title\"> {{SelectedContacts?'Contacts':'Loading Contacts...'}} </div> <div class=\"contacts\" *ngIf=\"SelectedContacts\"> <div class=\"card\" *ngFor=\"let contact of SelectedContacts\"> <div class=\"name\"> {{contact.Name}} </div> <div class=\"detail\"> <div class=\"fields\"> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/phone.svg\"> <div class=\"link\"> <a href=\"tel:{{contact.Phone}}\">{{contact.Phone}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/mobile.svg\"> <div class=\"link\"> <a href=\"tel:{{contact.Mobile}}\">{{contact.Mobile}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/sms.svg\"> <div class=\"sms\" (click)=\"buildSMS(contact.Mobile, 'I am interested in '+formatAddress(SelectedRealEstateEntry)+'. Please contact me.')\">Send SMS</div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/email.svg\"> <div class=\"link\"> <a href=\"mailto:{{contact.Email}}?subject=Query from Smart Koala - {{SelectedRealEstateEntry|address}}&body=Hi {{contact.Name}}, %0A%0DI am interested in {{SelectedRentalEntry|address}}, please contact me.%0A%0DThank you!%0A%0D\" target=\"_agent_email_{{SelectedAgent.Name}}\" target=\"_agent_link_{{contact.Name}}\">{{contact.Email}}</a> </div> </div> <div class=\"item\"> <img src=\"https://rawgit.com/errisy/deploy/master/svg/address.svg\"> <a href=\"{{'https://www.google.com.au/maps/?q='+contact.Address}}\" target=\"_agent_address_{{contact.Name}}\">{{contact.Address}}</a> </div> </div> <div class=\"image\" [style.background-image]=\"contact.Image?'url('+contact.Image+')':''\"> </div> </div> </div> </div> </div> <div class=\"sms-frame\" (click)=\"SMSValid=false;\" *ngIf=\"SMSValid\"> </div> <div class=\"sms-body\" (click)=\"SMSValid=false;\" [class.hidden]=\"!SMSValid\"> <div class=\"body\" (click)=\"$event.stopPropagation();\"> <div class=\"title\">SMS to {{SMS.number}}</div> <textarea #MessageTextArea [(ngModel)]=\"SMS.message\"></textarea> <div class=\"description\">Click the button below to copy this message into clipboard and navigate to SMS service of your device. Then you can paste the message and send.</div> <a #CopyMessageButton class=\"btn-sms\" [href]=\"SMS.number|sms\">Copy &amp; Send</a> </div> </div> <div class=\"image-gallery-frame\" *ngIf=\"Gallery\"> </div> <div class=\"image-gallery\" *ngIf=\"Gallery\"> <!-- Gallery[GalleryIndex]|backgroundimage --> <div class=\"image\" (click)=\"SelectAdjacent($event)\" [style.background-image]=\"'url('+Gallery[GalleryIndex]+')'\"> </div> <div class=\"image-list\"> <div class=\"image\" [style.background-image]=\"image?'url('+image+')':''\" [class.selected]=\"GalleryIndex==Index\" *ngFor=\"let image of Gallery; let Index = index;\" (click)=\"ShowGalleryImage(Index)\"> </div> </div> <svg btn-close width=\"36\" height=\"36\" (click)=\"closeGallery($event);\"></svg> </div> <div class=\"DevelopmentAlert\" (click)=\"ShowAlert=false;\" *ngIf=\"ShowAlert\"> </div> <div class=\"DevelopmentAlertFrame\" (click)=\"ShowAlert=false;\" *ngIf=\"ShowAlert\"> <div class=\"AlertMessage\" (click)=\"$event.stopPropagation();\"> <div class=\"AlertTitle\"> <div class=\"title\">Notice</div> <div class=\"spaceholder\"></div> <svg btn-close width=\"36\" height=\"36\" (click)=\"ShowAlert=false;\"></svg> </div> <div class=\"AlterContent\"> <div class=\"content\"> <h4>Smart Koala is Currently in Demonstration Mode</h4> <p> To share Smart Koala Services with everyone on every device, espcially mobile devices, we are currently developing Android and iOS Apps of Smart Koala. Those apps will be ready by the end Feb 2017. </p> <p> The data currently shown in this app is demonstrative only. Real data will be available after the launch of mobile apps. </p> <p> Thank you for your interest in Smart Koala! </p> <p> - Jack, 2017-01-18 </p> </div> </div> </div> </div> </div> ",entryComponents:[],providers:[shop_client_1.ShopCore,shop_client_1.FruitVegetableCore,shop_client_1.MeatCore,shop_client_1.SeaFoodCore,shop_client_1.CarServiceRepairCore,shop_client_1.FastFoodCore,shop_client_1.GroceryCore,shop_client_1.VehicleCore,shop_client_1.PackedFoodCore,shop_client_1.FuelCore,shop_client_1.HouseServiceRepairCore,shop_client_1.RealEstateCore,shop_client_1.RentalCore],changeDetection:core_1.ChangeDetectionStrategy.Default}),__metadata("design:paramtypes",[shop_client_1.ShopCore,shop_client_1.FruitVegetableCore,shop_client_1.MeatCore,shop_client_1.SeaFoodCore,shop_client_1.FastFoodCore,shop_client_1.GroceryCore,shop_client_1.VehicleCore,shop_client_1.PackedFoodCore,shop_client_1.FuelCore,shop_client_1.HouseServiceRepairCore,shop_client_1.CarServiceRepairCore,shop_client_1.RealEstateCore,shop_client_1.RentalCore,core_1.ChangeDetectorRef,errisy_completer_1.CompleterService])],AppComponent),exports.AppComponent=AppComponent;