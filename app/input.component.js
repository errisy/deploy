"use strict";var _createClass=function(){function a(e,f){for(var h,g=0;g<f.length;g++)h=f[g],h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}return function(e,f,g){return f&&a(e.prototype,f),g&&a(e,g),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var __decorate=function(a,e,f,g){var l,h=arguments.length,j=3>h?e:null===g?g=Object.getOwnPropertyDescriptor(e,f):g;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)j=Reflect.decorate(a,e,f,g);else for(var m=a.length-1;0<=m;m--)(l=a[m])&&(j=(3>h?l(j):3<h?l(e,f,j):l(e,f))||j);return 3<h&&j&&Object.defineProperty(e,f,j),j},__metadata=function(a,e){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,e)},core_1=require("@angular/core"),util=require("errisy-util"),SpanEditor=function(){function a(e){_classCallCheck(this,a),this.elementRef=e,this.editorChange=new core_1.EventEmitter,this.span=this.elementRef.nativeElement,this.span.setAttribute("contenteditable","true")}return _createClass(a,[{key:"onKeydown",value:function(f){this.keyFilter&&this.keyFilter(f)}},{key:"onKeyup",value:function(){var f=this.span.innerHTML;this.value=util.unescapeHTML(f),this.editorChange.emit(this.value)}},{key:"editor",get:function(){return this.value},set:function(f){if(this.value!=f){this.value=f,null==this.value||void 0==this.value?this.value="":"string"!=typeof this.value&&(this.value+=""),this.span.innerHTML=util.escapeHTML(this.value);document}}},{key:"type",set:function(f){f&&(this.keyFilter="l"===f?function(g){if(g.key)/^([a-z0-9]|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(g.key)||g.preventDefault();else if(g.keyCode){var h=g.keyCode;45==h||47<h&&58>h||65<h&&91>h||96<h&&123>h||8==h||g.preventDefault()}}:"n"===f?function(g){if(g.key)/^(\d|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(g.key)||g.preventDefault();else if(g.keyCode){var h=g.keyCode;45==h||47<h&&58>h||65<h&&91>h||96<h&&123>h||8==h||g.preventDefault()}}:"z"===f?function(g){if(g.key)/^(\d|\-|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(g.key)||g.preventDefault();else if(g.keyCode){var h=g.keyCode;45==h||47<h&&58>h||8==h||g.preventDefault()}}:"r"===f?function(g){if(g.key)/^(\d|\-|\.|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(g.key)||g.preventDefault();else if(g.keyCode){var h=g.keyCode;45==h||47<h&&58>h||46==h||8==h||g.preventDefault()}}:void 0)}}]),a}();__decorate([core_1.Output(),__metadata("design:type",Object)],SpanEditor.prototype,"editorChange",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[])],SpanEditor.prototype,"editor",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],SpanEditor.prototype,"type",null),__decorate([core_1.HostListener("keydown",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[KeyboardEvent]),__metadata("design:returntype",void 0)],SpanEditor.prototype,"onKeydown",null),__decorate([core_1.HostListener("keyup"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SpanEditor.prototype,"onKeyup",null),SpanEditor=__decorate([core_1.Directive({selector:"[editor]"}),__metadata("design:paramtypes",[core_1.ElementRef])],SpanEditor),exports.SpanEditor=SpanEditor;var SpanBoxComponent=function(){function a(e){_classCallCheck(this,a),this.element=e,this.style_cursor="text",this.ValueChange=new core_1.EventEmitter}return _createClass(a,[{key:"ngAfterContentInit",value:function(){}},{key:"focusSpan",value:function(){this.Span.nativeElement.focus(),this.selectAll()}},{key:"selectAll",value:function(){var f=document.createRange();f.selectNodeContents(this.Span.nativeElement);var g=window.getSelection();g.removeAllRanges(),g.addRange(f)}},{key:"onSpanBlur",value:function(){this.forceNumber&&!/^\-?((\d+)|(\d+\.)|(\d+\.\d+)|(\.\d+))$/.test(this._value)&&(this._value="0",this.ValueChange.emit(0)),this.class_focus=!1}},{key:"onEditorClick",value:function(f){f.stopPropagation()}},{key:"changed",value:function(f){if(!this.forceNumber)this._value=f,this.ValueChange.emit(f);else if(/^0+$/.test(f));else if(/^\-?((\d+)|(\d+\.)|(\d+\.\d+)|(\.\d+))$/.test(f)){var g=Number.parseFloat(f);this._value=f,this.ValueChange.emit(g)}else this._value="",this.selectAll()}},{key:"Value",set:function(f){this._value=f+""}}]),a}();__decorate([core_1.HostBinding("style.cursor"),__metadata("design:type",Object)],SpanBoxComponent.prototype,"style_cursor",void 0),__decorate([core_1.HostBinding("class.focus"),__metadata("design:type",Boolean)],SpanBoxComponent.prototype,"class_focus",void 0),__decorate([core_1.HostListener("click"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SpanBoxComponent.prototype,"focusSpan",null),__decorate([core_1.ViewChild("editor"),__metadata("design:type",core_1.ElementRef)],SpanBoxComponent.prototype,"Span",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],SpanBoxComponent.prototype,"Value",null),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],SpanBoxComponent.prototype,"ValueChange",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SpanBoxComponent.prototype,"type",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],SpanBoxComponent.prototype,"forceNumber",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SpanBoxComponent.prototype,"prefix",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SpanBoxComponent.prototype,"suffix",void 0),SpanBoxComponent=__decorate([core_1.Component({selector:"spanbox,[spanbox]",template:"\n<span *ngIf=\"prefix\">{{prefix}}</span>\n<span #editor [editor]=\"_value\" [type]=\"type\" (editorChange)=\"changed($event)\" (click)=\"onEditorClick($event)\" (focus)=\"class_focus=true\" (blur)=\"onSpanBlur()\"></span>\n<span *ngIf=\"suffix\">{{suffix}}</span>\n"}),__metadata("design:paramtypes",[core_1.ElementRef])],SpanBoxComponent),exports.SpanBoxComponent=SpanBoxComponent;var ButtonCheck=ButtonCheck_1=function(){function a(e){_classCallCheck(this,a),this.elementRef=e,this.svg=this.elementRef.nativeElement,ButtonCheck_1.injectStyle(),this.svg.setAttribute("viewBox","0 0 512 512"),this.svg.innerHTML="<rect x=\"30\" y=\"30\" width=\"452\" height=\"452\" stroke=\"black\" stroke-width=\"15\" fill-opacity=\"0\"/><path class=\"checkbox-check\" opacity=\"0\" fill=\"#ff3300\" d=\"M498.817,35.097C343.065,130.587,230.05,251.069,179.272,311.53L54.915,214.1L0,258.371l214.88,218.532  C251.863,382.177,368.985,197.04,512,65.499L498.817,35.097z\" />"}return _createClass(a,null,[{key:"injectStyle",value:function(){if(!ButtonCheck_1.injected){var f=document.head||document.getElementsByTagName("head")[0],g=document.createElement("style");g.type="text/css",g.appendChild(document.createTextNode("\nsvg[btn-check] { cursor: pointer; }\nsvg[btn-check]:hover > rect { fill-opacity: 1; fill: #ffff99; }\nsvg[btn-check]:active > rect { fill: #ff9933; }\nsvg[btn-check].checked > path { opacity: 1; }\n")),f.appendChild(g),ButtonCheck_1.injected=!0}}}]),a}();ButtonCheck.injected=!1,ButtonCheck=ButtonCheck_1=__decorate([core_1.Directive({selector:"[btn-check]"}),__metadata("design:paramtypes",[core_1.ElementRef])],ButtonCheck),exports.ButtonCheck=ButtonCheck;var CheckBoxComponent=function(){function a(){_classCallCheck(this,a),this.ValueChange=new core_1.EventEmitter(!0)}return _createClass(a,[{key:"onHostClick",value:function(){this._value=!this._value,this.ValueChange.emit(this._value)}},{key:"Value",set:function(f){this._value=f}}]),a}();__decorate([core_1.HostListener("click"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],CheckBoxComponent.prototype,"onHostClick",null),__decorate([core_1.Input(),__metadata("design:type",String)],CheckBoxComponent.prototype,"label",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],CheckBoxComponent.prototype,"Value",null),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],CheckBoxComponent.prototype,"ValueChange",void 0),CheckBoxComponent=__decorate([core_1.Component({selector:"checkbox,[checkbox]",template:"\n<svg btn-check height=\"24px\" [class.checked]=\"_value\"></svg><span>{{label}}</span>\n"}),__metadata("design:paramtypes",[])],CheckBoxComponent),exports.CheckBoxComponent=CheckBoxComponent;var ButtonCheck_1;