"use strict";var _createClass=function(){function t(o,a){for(var l,n=0;n<a.length;n++)l=a[n],l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(o,l.key,l)}return function(o,a,n){return a&&t(o.prototype,a),n&&t(o,n),o}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _classCallCheck(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}var __decorate=function(t,o,a,n){var p,l=arguments.length,s=3>l?o:null===n?n=Object.getOwnPropertyDescriptor(o,a):n;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,a,n);else for(var u=t.length-1;0<=u;u--)(p=t[u])&&(s=(3>l?p(s):3<l?p(o,a,s):p(o,a))||s);return 3<l&&s&&Object.defineProperty(o,a,s),s},__metadata=function(t,o){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},__awaiter=function(t,o,a,n){return new(a||(a=Promise))(function(l,s){function p(f){try{x(n.next(f))}catch(y){s(y)}}function u(f){try{x(n["throw"](f))}catch(y){s(y)}}function x(f){f.done?l(f.value):new a(function(y){y(f.value)}).then(p,u)}x((n=n.apply(t,o)).next())})},core_1=require("@angular/core"),content_1=require("ui/content"),shop_data_1=require("shop/shop.data"),management_client_1=require("management/management.client"),util=require("errisy-util"),errisy_ui_1=require("errisy-ui"),rental_client_1=require("management/rental.client"),payment_data_1=require("shop/payment.data"),building_1=require("ui/building"),agent_1=require("ui/agent"),term_1=require("ui/term"),ShopType=shop_data_1.RentalShop,ProductType=shop_data_1.RentalProduct,CategoryType=shop_data_1.RentalCategory,EntryType=shop_data_1.RentalEntry,FeeTypes=["N/A","Included in Rent","Shared","Shared but Optional","Connect Your Own","Ready to Use & Pay Your Own"],CarParkings=["N/A","Street (Free)","Street (Need Permission)","In Yard","Shared Carport","Shared Garage","Private Carport","Private Garage"],RentalComponent=function(){function t(o,a,n,l,s,p,u){var x=this;_classCallCheck(this,t),this.manage=o,this.parent=a,this.changeDetectorRef=n,this.core=l,this.entries=s,this.products=p,this.categories=u,this.style_flex="1 1 auto",this.style_display="flex",this._isAccountActive={},this._isShopValid={},this.CheckFloors=function(){var f=x.tab.data.SelectedItem;if(f.Building&&f.Building.Floors){var y=f.Building,m=0,b=0,h=0,g=0,w=0,S=0,I=0;y.NumberOfStories=y.Floors.filter(function(O){return Array.isArray(O.Rooms)&&0<O.Rooms.length}).length,y.Floors.forEach(function(O){O.Rooms.forEach(function(E){switch(E.RoomType){case"Bedroom with Bathroom & Toilet (Ensuite)":m+=1,b+=1,h+=1;break;case"Bedroom with Bathroom":m+=1,b+=1;break;case"Bedroom with Toilet":m+=1,h+=1;break;case"Bedroom Only":m+=1;break;case"Toilet (Independent)":h+=1;break;case"Bathroom (Independent)":b+=1;break;case"Bathroom & Toilet (Independent)":b+=1,h+=1;break;case"Living Room":w+=1;break;case"Kitchen":g+=1;break;case"Dining Room":S+=1;break;case"Storage Room (No Window)":I+=1;}})}),y.NumberOfBedrooms=m,y.NumberOfBathrooms=b,y.NumberOfToilets=h,y.NumberOfKitchens=g,y.NumberOfLivingRooms=w,y.NumberOfDiningRooms=S,y.NumberOfStorageRooms=I}if(f.GrannyFlat&&f.GrannyFlat.Floors){var C=f.GrannyFlat,T=0,V=0,R=0,A=0,M=0,L=0,N=0;C.NumberOfStories=C.Floors.filter(function(O){return Array.isArray(O.Rooms)&&0<O.Rooms.length}).length,C.Floors.forEach(function(O){O.Rooms.forEach(function(E){switch(E.RoomType){case"Bedroom with Bathroom & Toilet (Ensuite)":T+=1,V+=1,R+=1;break;case"Bedroom with Bathroom":T+=1,V+=1;break;case"Bedroom with Toilet":T+=1,R+=1;break;case"Bedroom Only":T+=1;break;case"Toilet (Independent)":R+=1;break;case"Bathroom (Independent)":V+=1;break;case"Bathroom & Toilet (Independent)":V+=1,R+=1;break;case"Living Room":M+=1;break;case"Kitchen":A+=1;break;case"Dining Room":L+=1;break;case"Storage Room (No Window)":N+=1;}})}),C.NumberOfBedrooms=T,C.NumberOfBathrooms=V,C.NumberOfToilets=R,C.NumberOfKitchens=A,C.NumberOfLivingRooms=M,C.NumberOfDiningRooms=L,C.NumberOfStorageRooms=N}},this.Tabs=[{Title:"Please Verify Mobile First",Tab:[{Title:"Please Verify Mobile First",View:[errisy_ui_1.rows.text(errisy_ui_1.fields.info("Please verify your mobile first")),errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Go to Verify").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){var y;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return this.parent.select(1),y=this.parent.ChildView,b.next=4,y.SelectTab(y.Tabs[1]);case 4:case"end":return b.stop();}},f,this)}))}))]}],Condition:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.isAccountActive();case 2:return b.abrupt("return",!b.sent);case 3:case"end":return b.stop();}},y,this)}))}},{Title:"Create Shop",Tab:[{Title:"Create",View:[errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Create Packed Food Shop").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.core.createShop();case 2:return m.next=4,this.tab.UpdateTabs();case 4:case"end":return m.stop();}},f,this)}))}))]}],Condition:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.isShopValid();case 2:return b.abrupt("return",!b.sent);case 3:case"end":return b.stop();}},y,this)}))}},{Title:"Manual",Tab:[{Title:"User Manual",View:[errisy_ui_1.rows.auto(errisy_ui_1.fields.content({},{Value:"<div style=\"width: 550px; display: block; height: 400px; user-select: text; font-weight: normal; text-shadow: none; overflow-y: auto\"> <div style=\"font-size:20px; font-weight: bold; color: blue\"> 1. Set up your shop. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;In the \"Shop\" tab, set up your shop <span style=\"color: red\">Name</span>. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;In the \"Shop\" - \"Shop\" tab, set up your shop <span style=\"color: red\">Name</span>. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;In the \"Shop\" - \"Address\" tab, set up your shop <span style=\"color: red\">Location</span>. The location is where your shop is displayed in the map. Please click \"<span style=\"color: red\">Select Location in Map</span>\" button and drag the marker in the map. Map can be zoomed by mouse scrolling. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;In the \"Shop\" - \"Hours\" tab, set up your shop <span style=\"color: red\">Regular Hours</span> and <span style=\"color: red\">Scheduled Hours</span>. <span style=\"color: red\">Regular Hours</span> is the regular Monday to Sunday hours that is used by default. Click \"+\" button to add hours for each weekday. <span style=\"color: red\">Scheduled Hours</span> should be used for days that when you have different opening hours from the regular Monday to Sunday hours or when you are closed. Click \"+\" to add a date first. You need to input a valid date and then click the \"+\" on the right of date to add hours. In both <span style=\"color: red\">Regular Hours</span> and <span style=\"color: red\">Scheduled Hours</span>, You can add multiple hours for a days in case you have multiple opening time ranges (which is very common for restaurants). </div> <div style=\"font-size:20px; font-weight: bold; color: blue\"> 2. Create your products. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;In the \"Product Entries\" tab, create a new product by clicking the \"+\" button under the \"Product Entries\" list. To edit the entry, select the entry and edit the product information in the general tab or other tabs. Remeber to click <span style=\"color: red\">Save</span> button after each edit. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;For Rental and Real Estate shops, you must select a valid category. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;Rental: For room rental, you must provide information for the \"Location\" (Click \"Select Location in Map\" to drag your location in map and save, see \"Shop\" above.) \"Room Rental\", \"Energy &amp; Water\", \"Internet &amp; Phone\", \"Car Parking\" and \"Terms\" tabs. For entire property rental (no need for room rental), you must provide information for the \"Building\", \"Energy &amp; Water\", \"Internet &amp; Phone\", \"Car Parking\", and \"Terms\" tabs as well the \"Granny Flat\" tab is the property contains a granny flat. If your property contains land, please also provide information for the \"Land\" tab. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;Real Estate: For any property except land, you must provide information for the \"Main Building\", \"Car Parking\" and \"Inspections\" tabs. For entire property rental (no need for room rental), you must provide information for the \"Building\", \"Energy &amp; Water\", \"Internet &amp; Phone\", \"Car Parking\", and \"Terms\" tabs as well the \"Granny Flat\" tab is the property contains a granny flat. </div> <div style=\"font-size:20px; font-weight: bold; color: blue\"> 3. Publish your products. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;For any product except for \"Real Estate\" and \"Vehicle\", use the \"Published Entries\" tab to manage published items. You have \"Free Entries\" number, which is the number of products you can publish without purchasing a listing service. The \"Service Entries\" number is the extra number of products you can publish when you purchased a listing service. You need to purchase the extra listing service in the \"Buy Service\" tab. Fill a valid number in the <span style=\"color: red\">Number of Peroids</span> box. <span style=\"color: red\">Subtotal</span> box shows the total amount. You can then click <span style=\"color: red\">Add to Cart</span> and checkout in the \"Checkout &amp; History\" menu in navigation bar (on the left bottom). </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;For \"Real Estate\" and \"Vehicle\", use the \"Published Entries\" tab to manage published items. You have \"Free Entries\" number, which is the number of products you can publish without purchasing a listing service. The \"Service Entries\" number is the extra number of products you can publish when you purchased a listing service. </div> <div style=\"font-size:20px; font-weight: bold; color: blue\"> 4. Activate Your Shop. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;In the \"Activation\" tab, you can get the information required for verify your ownship/relationship to the shop. Generally, you can click the email link to send us the proof as your shop owner. Please provide phone number in case we need to contact you. </div> <div style=\"font-size:16px; color: black\"> &nbsp;&nbsp;&nbsp;&nbsp;You don't need to activate \"Rental\", \"Real Estate\", \"Vehicle Service\" or \"House Service\" shop. They are activate by default. </div> </div>"},"How to Use"))]}],Condition:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.isAccountActive();case 2:if(b.t0=b.sent,!b.t0){b.next=7;break}return b.next=6,this.isShopValid();case 6:b.t0=b.sent;case 7:return b.abrupt("return",b.t0);case 8:case"end":return b.stop();}},y,this)}))}},{Title:"Product Entries",Tab:[{Title:"General",View:[[errisy_ui_1.fields.text("_id","ID")],[errisy_ui_1.fields.select(function(){return EntryType.prototype.Category},[{Title:"Room",Value:"Room"},{Title:"Unit",Value:"Unit"},{Title:"Apartment",Value:"Apartment"},{Title:"Townhouse",Value:"Townhouse"},{Title:"House",Value:"House"},{Title:"Bedroom Share",Value:"Bedroom Share"}],"Category").verify(errisy_ui_1.verifictions.required)],[errisy_ui_1.fields.text(function(){return EntryType.prototype.Description},"Description")],[errisy_ui_1.fields.number(function(){return EntryType.prototype.Price},"Price per Week").event("keydown",errisy_ui_1.filters,errisy_ui_1.filters.decimals).attr({min:0}).verify(errisy_ui_1.verifictions.min(0))],[errisy_ui_1.fields.datetime(function(){return EntryType.prototype.StartTime},"Available From").attr({min:"2016-01-01T00:00",max:"2116-01-01T00:00"}).verify(errisy_ui_1.verifictions.min(+new Date(2016,0))).verify(errisy_ui_1.verifictions.max(+new Date(2116,0)))],[errisy_ui_1.fields.checkbox(function(){return EntryType.prototype.IsQuiteStreet},"Is Queit Street")],errisy_ui_1.rows.auto(errisy_ui_1.fields.imagelist(function(){return EntryType.prototype.Images},this.entries,this.entries.upload,"Images",!0,160,160,"image/*",307200)),[errisy_ui_1.fields.text("PerUnitPrice","Estimated Per Week Price in AUD (if Unit is not Week)").event("keydown",errisy_ui_1.filters,errisy_ui_1.filters.decimals)],[errisy_ui_1.fields.text("Limitation","Limitation of Purchase (e.g. Single, Couple, Minimal Term, etc.)")],errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return this.CheckFloors(),m.next=7,this.tab.data.update(this.tab.data.SelectedItem);case 7:case"end":return m.stop();}},f,this)}))}))]},{Title:"Location",View:[errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Select Location in Map").id("switch").event("click",this,function(f,y){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function m(){var h,g,w,S,b=this;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(h=this.tab.data.SelectedItem,h){C.next=3;break}return C.abrupt("return");case 3:if(0!=this.tab.MapWidth){C.next=18;break}return this.tab.MapWidth=500,this.tab.changeDetectorRef.detectChanges(),y.Title="Hide Map",g=h.Location?{x:h.Location.coordinates[0],y:h.Location.coordinates[1]}:{x:this.tab.location.x,y:this.tab.location.y},C.next=10,this.tab.addUserMarker(g);case 10:if(C.sent.DragEnd={host:this,method:function(V){return __awaiter(b,void 0,void 0,regeneratorRuntime.mark(function R(){var A,M;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,util.ResolveAddress(V.lat()+"",V.lng()+"");case 2:A=N.sent,A&&(M=this.tab.data.SelectedItem,M.Country=A.CountryTerritory,M.State=A.StateProvince,M.Postcode=A.Postcode,M.Region=A.CityRegion,M.Suburb=A.SuburbTown,M.Street=A.Street,M.StreetNumber=A.Number,M.Location={type:"Point",coordinates:[V.lng(),V.lat()]},this.tab.tabview.changeDetectorRef.detectChanges());case 4:case"end":return N.stop();}},R,this)}))}},h.Location){C.next=16;break}return C.next=14,util.ResolveAddress(this.tab.location.y+"",this.tab.location.x+"");case 14:w=C.sent,w&&(S=this.tab.data.SelectedItem,S.Country=w.CountryTerritory,S.State=w.StateProvince,S.Postcode=w.Postcode,S.Region=w.CityRegion,S.Suburb=w.SuburbTown,S.Street=w.Street,S.StreetNumber=w.Number,this.tab.tabview.changeDetectorRef.detectChanges());case 16:C.next=22;break;case 18:this.tab.CurrentLocationMarker.setMap(void 0),this.tab.CurrentLocationMarker=void 0,this.tab.MapWidth=0,y.Title="Select Location in Map";case 22:this.tab.changeDetectorRef.detectChanges();case 23:case"end":return C.stop();}},m,this)}))})),[errisy_ui_1.fields.text(function(){return ShopType.prototype.StreetNumber},"StreetNumber").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Street},"Street").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Suburb},"Suburb").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Postcode},"Postcode").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Region},"Region").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.State},"State").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Country},"Country").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return this.CheckFloors(),m.next=7,this.tab.data.update(this.tab.data.SelectedItem);case 7:case"end":return m.stop();}},f,this)}))}))],ItemSelected:function(y){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function m(){var h,g,w,S,b=this;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!y){C.next=15;break}if(500!=this.tab.MapWidth){C.next=13;break}return this.tab.CurrentLocationMarker.setMap(void 0),this.tab.CurrentLocationMarker=void 0,h=y.Location?{x:y.Location.coordinates[0],y:y.Location.coordinates[1]}:{x:this.tab.location.x,y:this.tab.location.y},C.next=7,this.tab.addUserMarker(h);case 7:if(C.sent.DragEnd={host:this,method:function(V){return __awaiter(b,void 0,void 0,regeneratorRuntime.mark(function R(){var A,M;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,util.ResolveAddress(V.lat()+"",V.lng()+"");case 2:A=N.sent,A&&(M=this.tab.data.SelectedItem,M.Country=A.CountryTerritory,M.State=A.StateProvince,M.Postcode=A.Postcode,M.Region=A.CityRegion,M.Suburb=A.SuburbTown,M.Street=A.Street,M.StreetNumber=A.Number,M.Location={type:"Point",coordinates:[V.lng(),V.lat()]},this.tab.tabview.changeDetectorRef.detectChanges());case 4:case"end":return N.stop();}},R,this)}))}},y.Location){C.next=13;break}return C.next=11,util.ResolveAddress(this.tab.location.y+"",this.tab.location.x+"");case 11:g=C.sent,g&&(w=this.tab.data.SelectedItem,w.Country=g.CountryTerritory,w.State=g.StateProvince,w.Postcode=g.Postcode,w.Region=g.CityRegion,w.Suburb=g.SuburbTown,w.Street=g.Street,w.StreetNumber=g.Number,this.tab.tabview.changeDetectorRef.detectChanges());case 13:C.next=20;break;case 15:this.tab.CurrentLocationMarker.setMap(void 0),this.tab.CurrentLocationMarker=void 0,this.tab.MapWidth=0,S=this.tab.tabview.InfoTable.FindByID("switch"),S&&(S.Title="Select Location in Map");case 20:case"end":return C.stop();}},m,this)}))}},{Title:"Room Rental",View:[errisy_ui_1.rows.custom("350px",errisy_ui_1.fields.presenter(function(){return EntryType.prototype.RentalRoom},{Value:"<div style=\"font-family: Arial; font-size: 18px; display: flex; flex-direction: column; width: 800px\" *ngIf=\"Item\"> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Room Size</span><div style=\"flex: 0 0 5px\"></div><input style=\"display: flex; flex: 0 0 60px\" type=\"number\" [(ngModel)]=\"Item.RoomSizeInSquareMeter\"><span style=\"flex: 0 0 auto\">M<sup>2</sup></span> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Window Size</span><div style=\"flex: 0 0 5px\"></div><input style=\"display: flex; flex: 0 0 60px\" type=\"number\" [(ngModel)]=\"Item.WindowSizeInSquareMeter\"><span style=\"flex: 0 0 auto\">M<sup>2</sup></span> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 116px\">Beds</span> <div style=\"flex: 0 0 5px\"></div> <div single-option-array [(Value)]=\"Item.Beds\" style=\"flex: 1 1 auto; display: flex; flex-direction: row; flex-wrap: wrap\" Options=\"['Single','Queen','King','Extra Large']\"></div> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Has Lockable Gate: </span> <svg btn-check logic-checkbox [(Value)]=\"Item.CanLock\" width=\"24px\" height=\"24px\"></svg> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 116px\">Toilet</span> <div style=\"flex: 0 0 5px\"></div> <div [(Value)]=\"Item.Toilet\" style_border=\"1px solid #aaa\" Color=\"purple\" style=\"flex: 1 1 auto; display: flex; flex-direction: row\" single-group Options=\"['Private', 'Shared']\"></div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 116px\">Bathroom</span> <div style=\"flex: 0 0 5px\"></div> <div [(Value)]=\"Item.Bathroom\" style_border=\"1px solid #aaa\" Color=\"purple\" style=\"flex: 1 1 auto; display: flex; flex-direction: row\" single-group Options=\"['Private', 'Shared']\"></div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 116px\">Kitchen</span> <div style=\"flex: 0 0 5px\"></div> <div [(Value)]=\"Item.Kitchen\" style_border=\"1px solid #aaa\" Color=\"purple\" style=\"flex: 1 1 auto; display: flex; flex-direction: row\" single-group Options=\"['Private', 'Shared', 'N/A']\"></div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 116px\">Laundry</span> <div style=\"flex: 0 0 5px\"></div> <div [(Value)]=\"Item.Laundry\" style_border=\"1px solid #aaa\" Color=\"purple\" style=\"flex: 1 1 auto; display: flex; flex-direction: row\" single-group Options=\"['Private', 'Shared', 'N/A']\"></div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 116px\">Living Room</span> <div style=\"flex: 0 0 5px\"></div> <div [(Value)]=\"Item.LivingRoom\" style_border=\"1px solid #aaa\" Color=\"purple\" style=\"flex: 1 1 auto; display: flex; flex-direction: row\" single-group Options=\"['Private', 'Shared', 'N/A']\"></div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 116px\">Car Parking</span> <div style=\"flex: 0 0 5px\"></div> <div [(Value)]=\"Item.CarParking\" style_border=\"1px solid #aaa\" Color=\"purple\" style=\"flex: 1 1 auto; display: flex; flex-direction: row; flex-wrap: wrap\" single-group Options=\"['N/A', 'Street (Free)', 'Street (Need Permission)', 'In Yard', 'Shared Carport', 'Shared Garage', 'Private Carport', 'Private Garage']\"></div> </div> </div>"},"Rental Room Information")),errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return this.CheckFloors(),m.next=7,this.tab.data.update(this.tab.data.SelectedItem);case 7:case"end":return m.stop();}},f,this)}))}))],Setup:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){var m;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:m=this.tab.data.SelectedItem,m&&!m.RentalRoom&&(m.RentalRoom={});case 2:case"end":return h.stop();}},y,this)}))},ItemSelected:function(y){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function m(){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:y&&!y.RentalRoom&&(y.RentalRoom={});case 1:case"end":return h.stop();}},m,this)}))}},{Title:"Land",View:[errisy_ui_1.rows.auto(errisy_ui_1.fields.presenter(function(){return EntryType.prototype.Land},{Value:"<div *ngIf=\"Item\" style=\"width:600px; display: flex; flex-direction: column\"> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Land Size: </span> <div class=\"span-editor\" style=\"flex: 0 0 auto; min-width: 18px; align-self: stretch\"> <div style=\"color: blue; font-weight: normal\" spanbox type=\"n\" [forceNumber]=\"true\" [(Value)]=\"Item.LandSize\"> </div> </div> <span style=\"flex: 0 0 auto\">M<sup>2</sup></span> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Number Of Covered Carports: </span> <div class=\"span-editor\" style=\"flex: 0 0 auto; min-width: 18px; align-self: stretch\"> <div style=\"color: blue; font-weight: normal\" spanbox type=\"n\" [forceNumber]=\"true\" [(Value)]=\"Item.NumberOfCarport\"></div> </div> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Number Of Uncovered Car Spaces: </span> <div class=\"span-editor\" style=\"flex: 0 0 auto; min-width: 18px; align-self: stretch\"> <div style=\"color: blue; font-weight: normal\" spanbox type=\"n\" [forceNumber]=\"true\" [(Value)]=\"Item.NumberOfCarSpace\"></div> </div> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Building Floor Area: </span> <div class=\"span-editor\" style=\"flex: 0 0 auto; min-width: 18px; align-self: stretch\"> <div style=\"color: blue; font-weight: normal\" spanbox type=\"n\" [forceNumber]=\"true\" [(Value)]=\"Item.BuildingFloorArea\"></div> </div> <span style=\"flex: 0 0 auto\">M<sup>2</sup></span> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Yard Pavement Type: </span> <select [(ngModel)]=\"Item.YardPavementType\"> <option value=\"N/A\">N/A</option> <option value=\"Brick Tiles\">Brick Tiles</option> <option value=\"Rock Tiles\">Rock Tiles</option> <option value=\"Concrete\">Concrete</option> </select> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Yard Pavement Size: </span> <div class=\"span-editor\" style=\"flex: 0 0 auto; min-width: 18px; align-self: stretch\"> <div style=\"color: blue; font-weight: normal\" spanbox type=\"n\" [forceNumber]=\"true\" [(Value)]=\"Item.YardPavementSize\"></div> </div> <span style=\"flex: 0 0 auto\">M<sup>2</sup></span> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Yard Lawn Size: </span> <div class=\"span-editor\" style=\"flex: 0 0 auto; min-width: 18px; align-self: stretch\"> <div style=\"color: blue; font-weight: normal\" spanbox type=\"n\" [forceNumber]=\"true\" [(Value)]=\"Item.YardLawnSize\"></div> </div> <span style=\"flex: 0 0 auto\">M<sup>2</sup></span> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Number Of Pools: </span> <div class=\"span-editor\" style=\"flex: 0 0 auto; min-width: 18px; align-self: stretch\"> <div style=\"color: blue; font-weight: normal\" spanbox type=\"n\" [forceNumber]=\"true\" [(Value)]=\"Item.NumberOfPool\"></div> </div> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Total Pool Size: </span> <div class=\"span-editor\" style=\"flex: 0 0 auto; min-width: 18px; align-self: stretch\"> <div style=\"color: blue; font-weight: normal\" spanbox type=\"n\" [forceNumber]=\"true\" [(Value)]=\"Item.TotalPoolSize\"></div> </div> <span style=\"flex: 0 0 auto\">M<sup>2</sup></span> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Wall Or Fence Coverage: </span> <select [(ngModel)]=\"Item.WallOrFenceCoverage\"> <option value=\"N/A\">N/A</option> <option value=\"Two Sides or Less\">Two Sides or Less</option> <option value=\"Only Between Neighbours\">Only Between Neighbours</option> <option value=\"All Sides\">All Sides</option> </select> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Has Lockable Gate: </span> <svg btn-check logic-checkbox [(Value)]=\"Item.HasLockableGate\" width=\"24px\" height=\"24px\"></svg> </div> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Wall Or Fence Type: </span> <select [(ngModel)]=\"Item.WallOrFenceType\"> <option value=\"N/A\">N/A</option> <option value=\"Brick Tiles\">Wood Fence</option> <option value=\"Rock Tiles\">Steel Color Board</option> <option value=\"Concrete\">Concrete Wall with Steel Fence</option> <option value=\"Brick Wall Fence\">Brick Wall Fence</option> <option value=\"Steel Fence\">Steel Fence</option> <option value=\"Hybrid/Synthetic Material Fence\">Hybrid/Synthetic Material Fence (e.g. WPC)</option> </select> </div> </div>"},"Land or Yard",void 0)),errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return m.next=6,this.tab.data.update(this.tab.data.SelectedItem);case 6:case"end":return m.stop();}},f,this)}))}))],Setup:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){var m;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:m=this.tab.data.SelectedItem,m&&!m.Land&&(m.Land={});case 2:case"end":return h.stop();}},y,this)}))},ItemSelected:function(y){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function m(){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:y&&!y.Land&&(y.Land={});case 1:case"end":return h.stop();}},m,this)}))}},{Title:"Building",View:[errisy_ui_1.rows.custom("330px",errisy_ui_1.fields.presenter(function(){return EntryType.prototype.Building},{Value:"<div *ngIf=\"Item\" style=\"height:300px; font-family: Arial; font-size: 18px; display: flex; flex-direction: column; width: 800px; overflow-y: auto\"> <div building-info [(Value)]=\"Item.Floors\" style=\"flex: 1 1 auto\"> </div> </div>"},"Floor & Room Details ",void 0,[building_1.BuildingUIModule])),errisy_ui_1.rows.auto(errisy_ui_1.fields.presenter(function(){return EntryType.prototype.Building},{Value:"<div *ngIf=\"Item\" style=\"font-family: Arial; font-size: 18px; display: flex; flex-direction: column; width: 800px\"> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Year of Construction: </span> <div class=\"span-editor\" style=\"flex: 0 0 auto; min-width: 18px; align-self: stretch\"> <div style=\"color: blue; font-weight: normal\" spanbox [(Value)]=\"Item.YearOfConstruction\"></div> </div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 180px\">Outer Wall Materials</span> <div style=\"flex: 0 0 5px\"></div> <div single-option-array [(Value)]=\"Item.OuterWallMaterials\" style=\"flex: 1 1 auto; display: flex; flex-direction: row; flex-wrap: wrap\" Options=\"['Timber','Concrete','Bricks','Steel']\"></div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 180px\">Structural Materials</span> <div style=\"flex: 0 0 5px\"></div> <div single-option-array [(Value)]=\"Item.StructuralMaterials\" style=\"flex: 1 1 auto; display: flex; flex-direction: row; flex-wrap: wrap\" Options=\"['Timber','Concrete','Bricks','Steel']\"></div> </div> </div>"},"Structure Information",void 0,[building_1.BuildingUIModule])),errisy_ui_1.rows.auto(errisy_ui_1.fields.presenter(function(){return EntryType.prototype.Building},{Value:"<div *ngIf=\"Item\" style=\"font-family: Arial; font-size: 18px; display: flex; flex-direction: column; width: 800px\"> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 180px\">Has Paved Area</span> <div style=\"flex: 0 0 5px\"></div> <div [(Value)]=\"Item.HasPavedArea\" style_border=\"1px solid #aaa\" Color=\"purple\" style=\"flex: 1 1 auto; display: flex; flex-direction: row\" single-group Options=\"['No', 'Yes']\"></div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 180px\">Has Lawn</span> <div style=\"flex: 0 0 5px\"></div> <div [(Value)]=\"Item.HasLawn\" style_border=\"1px solid #aaa\" Color=\"purple\" style=\"flex: 1 1 auto; display: flex; flex-direction: row\" single-group Options=\"['No', 'Yes']\"></div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 180px\">Has Trees</span> <div style=\"flex: 0 0 5px\"></div> <div [(Value)]=\"Item.HasTrees\" style_border=\"1px solid #aaa\" Color=\"purple\" style=\"flex: 1 1 auto; display: flex; flex-direction: row\" single-group Options=\"['No','Yes']\"></div> </div> </div>"},"Yard Information",void 0,[building_1.BuildingUIModule])),errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return this.CheckFloors(),m.next=7,this.tab.data.update(this.tab.data.SelectedItem);case 7:case"end":return m.stop();}},f,this)}))}))],Setup:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){var m;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:m=this.tab.data.SelectedItem,m&&!m.Building&&(m.Building={});case 2:case"end":return h.stop();}},y,this)}))},ItemSelected:function(y){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function m(){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:y&&!y.Building&&(y.Building={});case 1:case"end":return h.stop();}},m,this)}))}},{Title:"Granny Flat",View:[errisy_ui_1.rows.custom("330px",errisy_ui_1.fields.presenter(function(){return EntryType.prototype.GrannyFlat},{Value:"<div *ngIf=\"Item\" style=\"height:300px; font-family: Arial; font-size: 18px; display: flex; flex-direction: column; width: 800px; overflow-y: auto\"> <div building-info [(Value)]=\"Item.Floors\" style=\"flex: 1 1 auto\"> </div> </div>"},"Floor & Room Details ",void 0,[building_1.BuildingUIModule])),errisy_ui_1.rows.auto(errisy_ui_1.fields.presenter(function(){return EntryType.prototype.GrannyFlat},{Value:"<div *ngIf=\"Item\" style=\"font-family: Arial; font-size: 18px; display: flex; flex-direction: column; width: 800px\"> <div style=\"flex: 0 0 24px; display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 auto\">Year of Construction: </span> <div class=\"span-editor\" style=\"flex: 0 0 auto; min-width: 18px; align-self: stretch\"> <div style=\"color: blue; font-weight: normal\" spanbox [(Value)]=\"Item.YearOfConstruction\"></div> </div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 180px\">Outer Wall Materials</span> <div style=\"flex: 0 0 5px\"></div> <div single-option-array [(Value)]=\"Item.OuterWallMaterials\" style=\"flex: 1 1 auto; display: flex; flex-direction: row; flex-wrap: wrap\" Options=\"['Timber','Concrete','Bricks','Steel']\"></div> </div> <div style=\"display: flex; flex-direction: row; align-items: center\"> <span style=\"flex: 0 0 180px\">Structural Materials</span> <div style=\"flex: 0 0 5px\"></div> <div single-option-array [(Value)]=\"Item.StructuralMaterials\" style=\"flex: 1 1 auto; display: flex; flex-direction: row; flex-wrap: wrap\" Options=\"['Timber','Concrete','Bricks','Steel']\"></div> </div> </div>"},"Structure Information",void 0,[building_1.BuildingUIModule])),errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return m.next=6,this.tab.data.update(this.tab.data.SelectedItem);case 6:case"end":return m.stop();}},f,this)}))}))],Setup:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){var m;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:m=this.tab.data.SelectedItem,m&&!m.GrannyFlat&&(m.GrannyFlat={});case 2:case"end":return h.stop();}},y,this)}))},ItemSelected:function(y){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function m(){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:y&&!y.GrannyFlat&&(y.GrannyFlat={});case 1:case"end":return h.stop();}},m,this)}))}},{Title:"Energy & Water",View:[[errisy_ui_1.fields.singleoption(function(){return EntryType.prototype.Electricity},FeeTypes,"Electricity",void 0,void 0,"red")],[errisy_ui_1.fields.singleoption(function(){return EntryType.prototype.Water},FeeTypes,"Water",void 0,void 0,"red")],[errisy_ui_1.fields.singleoption(function(){return EntryType.prototype.Gas},FeeTypes,"Gas",void 0,void 0,"red")],errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return this.CheckFloors(),m.next=7,this.tab.data.update(this.tab.data.SelectedItem);case 7:case"end":return m.stop();}},f,this)}))}))]},{Title:"Internet & Phone",View:[[errisy_ui_1.fields.singleoption(function(){return EntryType.prototype.Internet},FeeTypes,"Internet",void 0,void 0,"red")],[errisy_ui_1.fields.singleoption(function(){return EntryType.prototype.Telephone},FeeTypes,"Telephone",void 0,void 0,"red")],errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return this.CheckFloors(),m.next=7,this.tab.data.update(this.tab.data.SelectedItem);case 7:case"end":return m.stop();}},f,this)}))}))]},{Title:"Car Parking",View:[[errisy_ui_1.fields.multipleoption(function(){return EntryType.prototype.CarParking},CarParkings,"Car Parking Type",void 0,void 0,"green")],errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return this.CheckFloors(),m.next=7,this.tab.data.update(this.tab.data.SelectedItem);case 7:case"end":return m.stop();}},f,this)}))}))]},{Title:"Terms",View:[errisy_ui_1.rows.auto(errisy_ui_1.fields.presenter(function(){return EntryType.prototype.RentalTerm},{Value:"<div style=\"width: 450px; height: 400px; overflow-y: auto\" *ngIf=\"Item\"> <div rental-term [Value]=\"Item\" (ValueChange)=\"ItemChange($event)\"> </div> </div>"},"Rental Terms ",void 0,[term_1.TermUIModule])),errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return this.CheckFloors(),m.next=7,this.tab.data.update(this.tab.data.SelectedItem);case 7:case"end":return m.stop();}},f,this)}))}))],Setup:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){var m;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:m=this.tab.data.SelectedItem,m&&!m.RentalTerm&&(m.RentalTerm={});case 2:case"end":return h.stop();}},y,this)}))},ItemSelected:function(y){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function m(){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:y&&!y.RentalTerm&&(y.RentalTerm={});case 1:case"end":return h.stop();}},m,this)}))}}],Fields:"_id",Source:function(){return x.entries},DataTemplateUrl:{Value:"<div class=\"flex-row-stretch flex-stretch list-item\" [class.checked]=\"Parent.SelectedItem==Item\" [class.selected-items]=\"MultipleSelected\" (click)=\"Parent.SelectItem(Item, $event);\"> {{Item.Description?Item.Description:('('+Item._id+')')}} </div>"},CanCreate:!0,CanDelete:!0,Condition:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.isAccountActive();case 2:if(b.t0=b.sent,!b.t0){b.next=7;break}return b.next=6,this.isShopValid();case 6:b.t0=b.sent;case 7:return b.abrupt("return",b.t0);case 8:case"end":return b.stop();}},y,this)}))}},{Title:"Published Entries",Tab:[{Title:"Publish",View:[[errisy_ui_1.fields.text(function(){return ShopType.prototype._id},"ID").readonly()],[errisy_ui_1.fields.text(function(){return ShopType.prototype.FreeAllowedNumberOfEntry},"Free Entries").readonly()],[errisy_ui_1.fields.text(function(){return ShopType.prototype.ServiceAllowedNumberOfEntry},"Service Entries").readonly()],[errisy_ui_1.fields.text(function(){return ShopType.prototype.NumberOfEntry},"Number of Entries").readonly()],errisy_ui_1.rows.auto(errisy_ui_1.fields.relation(function(){return ShopType.prototype.DisplayedEntries},this.entries,{Value:"<div class=\"flex-row-stretch flex-stretch list-item\" [class.checked]=\"Parent.SelectedItem==Item\" [class.selected-items]=\"MultipleSelected\" (click)=\"Parent.SelectItem(Item, $event);\"> {{Item.Description?Item.Description:('('+Item._id+')')}} </div>"},"Description","Published Entries","Entries","Published",320)),errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return m.next=6,this.core.updateShop(this.tab.Entity);case 6:this.tab.Entity=m.sent,this.tab.changeDetectorRef.detectChanges();case 8:case"end":return m.stop();}},f,this)}))}))]}],Entity:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.core.getShop();case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop();}},y,this)}))},Condition:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.isAccountActive();case 2:if(b.t0=b.sent,!b.t0){b.next=7;break}return b.next=6,this.isShopValid();case 6:b.t0=b.sent;case 7:return b.abrupt("return",b.t0);case 8:case"end":return b.stop();}},y,this)}))}},{Title:"Shop",Tab:[{Title:"Shop",View:[[errisy_ui_1.fields.text(function(){return ShopType.prototype._id},"ID").readonly()],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Name},"Name").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.datetime(function(){return ShopType.prototype.ExpiryDate},"ExpiryDate").readonly()],[errisy_ui_1.fields.checkbox(function(){return ShopType.prototype.IsValid},"Valid (Readonly)").readonly()],[errisy_ui_1.fields.checkbox(function(){return ShopType.prototype.IsValidService},"Valid Service (Readonly)").readonly()],errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return m.next=6,this.core.updateShop(this.tab.Entity);case 6:case"end":return m.stop();}},f,this)}))}))]},{Title:"Address",View:[errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Select Location in Map").event("click",this,function(f,y){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function m(){var h,g,w,S,b=this;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(h=this.tab.Entity,h){C.next=3;break}return C.abrupt("return");case 3:if(0!=this.tab.MapWidth){C.next=18;break}return this.tab.MapWidth=500,this.tab.changeDetectorRef.detectChanges(),y.Title="Hide Map",g=h.Location?{x:h.Location.coordinates[0],y:h.Location.coordinates[1]}:{x:this.tab.location.x,y:this.tab.location.y},C.next=10,this.tab.addUserMarker(g);case 10:if(C.sent.DragEnd={host:this,method:function(V){return __awaiter(b,void 0,void 0,regeneratorRuntime.mark(function R(){var A,M;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,util.ResolveAddress(V.lat()+"",V.lng()+"");case 2:A=N.sent,A&&(M=this.tab.Entity,M.Country=A.CountryTerritory,M.State=A.StateProvince,M.Postcode=A.Postcode,M.Region=A.CityRegion,M.Suburb=A.SuburbTown,M.Street=A.Street,M.StreetNumber=A.Number,M.Location={type:"Point",coordinates:[V.lng(),V.lat()]},this.tab.tabview.changeDetectorRef.detectChanges());case 4:case"end":return N.stop();}},R,this)}))}},h.Location){C.next=16;break}return C.next=14,util.ResolveAddress(this.tab.location.y+"",this.tab.location.x+"");case 14:w=C.sent,w&&(S=this.tab.Entity,S.Country=w.CountryTerritory,S.State=w.StateProvince,S.Postcode=w.Postcode,S.Region=w.CityRegion,S.Suburb=w.SuburbTown,S.Street=w.Street,S.StreetNumber=w.Number,this.tab.tabview.changeDetectorRef.detectChanges());case 16:C.next=22;break;case 18:this.tab.CurrentLocationMarker.setMap(void 0),this.tab.CurrentLocationMarker=void 0,this.tab.MapWidth=0,y.Title="Select Location in Map";case 22:this.tab.changeDetectorRef.detectChanges();case 23:case"end":return C.stop();}},m,this)}))})),[errisy_ui_1.fields.text(function(){return ShopType.prototype.StreetNumber},"StreetNumber").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Street},"Street").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Suburb},"Suburb").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Postcode},"Postcode").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Region},"Region").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.State},"State").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],[errisy_ui_1.fields.text(function(){return ShopType.prototype.Country},"Country").attr({maxlength:100}).verify(errisy_ui_1.verifictions.maxLength(100))],errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return m.next=6,this.core.updateShop(this.tab.Entity);case 6:case"end":return m.stop();}},f,this)}))}))]},{Title:"Hours",View:[errisy_ui_1.rows.auto(errisy_ui_1.fields.weekhours(function(){return ShopType.prototype.OpeningHours},"Opening Hours")),errisy_ui_1.rows.auto(errisy_ui_1.fields.scheduledhours(function(){return ShopType.prototype.ScheduledHours},"Opening Hours")),errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return m.next=6,this.core.updateShop(this.tab.Entity);case 6:case"end":return m.stop();}},f,this)}))}))]},{Title:"Agent",View:[errisy_ui_1.rows.auto(errisy_ui_1.fields.presenter(function(){return ShopType.prototype.Agent},{Value:"<div style=\"width: 400px\" *ngIf=\"Item\"> <div ui-agent [Value]=\"Item\" [Uploader]=\"Event.Uploader\" [UploadService]=\"Event.UploadService\" (ValueChange)=\"ItemChange($event)\"> </div> </div>"},"Agent Information",{Uploader:this.core.uploadAgent,UploadService:this.core},[agent_1.AgentUIModule])),errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return m.next=6,this.core.updateShop(this.tab.Entity);case 6:case"end":return m.stop();}},f,this)}))}))],Setup:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){var m;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:m=this.tab.Entity,m&&!m.Agent&&(m.Agent={});case 2:case"end":return h.stop();}},y,this)}))}},{Title:"Contacts",View:[errisy_ui_1.rows.auto(errisy_ui_1.fields.presenter(function(){return ShopType.prototype.Contacts},{Value:"<div style=\"width: 450px\" *ngIf=\"Item\"> <div ui-contacts [Value]=\"Item\" [Uploader]=\"Event.Uploader\" [UploadService]=\"Event.UploadService\" (ValueChange)=\"ItemChange($event)\"> </div> </div>"},"Contacts",{Uploader:this.core.uploadAgent,UploadService:this.core},[agent_1.AgentUIModule])),errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Save").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.tab.tabview.InfoTable.Verify();case 2:if(m.sent){m.next=4;break}return m.abrupt("return");case 4:return m.next=6,this.core.updateShop(this.tab.Entity);case 6:case"end":return m.stop();}},f,this)}))}))],Setup:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){var m;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:m=this.tab.Entity,m&&!m.Contacts&&(m.Contacts=[]);case 2:case"end":return h.stop();}},y,this)}))}}],Entity:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.core.getShop();case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop();}},y,this)}))},Condition:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.isAccountActive();case 2:if(b.t0=b.sent,!b.t0){b.next=7;break}return b.next=6,this.isShopValid();case 6:b.t0=b.sent;case 7:return b.abrupt("return",b.t0);case 8:case"end":return b.stop();}},y,this)}))}},{Title:"Buy Service",Tab:[{Title:"Order",View:[[errisy_ui_1.fields.text(function(){return payment_data_1.ServiceOrderItem.prototype.ServiceType},"Service Type").readonly()],[errisy_ui_1.fields.text(function(){return payment_data_1.ServiceOrderItem.prototype.Price},"Price/Service Peroid (in Australian Dollar)").readonly()],[errisy_ui_1.fields.text(function(){return payment_data_1.ServiceOrderItem.prototype.Unit},"Number of Days Per Service Peroid").readonly()],[errisy_ui_1.fields.number(function(){return payment_data_1.ServiceOrderItem.prototype.Quantity},"Number of Peroids").event("keydown",errisy_ui_1.filters,errisy_ui_1.filters.numbers).event("ngModelChange",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){var m;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:m=this.tab.Entity,m.Subtotal=m.Price*m.Quantity;case 2:case"end":return h.stop();}},y,this)}))})],[errisy_ui_1.fields.text(function(){return payment_data_1.ServiceOrderItem.prototype.Subtotal},"Subtotal (in Australian Dollar)").readonly()],errisy_ui_1.rows.buttons(errisy_ui_1.fields.submit("Add to Cart").event("click",this,function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function f(){var y;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(y=this.tab.Entity,y){b.next=4;break}return this.parent.Status="Invalid order item!",b.abrupt("return");case 4:return this.parent.Status="Adding order item to shopping cart...",b.prev=5,b.next=8,this.manage.addItemToShoppingCart(y);case 8:if(!b.sent){b.next=10;break}this.parent.Status="Order item added. Please check out at the checkout menu.";case 10:b.next=15;break;case 12:b.prev=12,b.t0=b["catch"](5),this.parent.Status=b.t0;case 15:case"end":return b.stop();}},f,this,[[5,12]])}))}))]}],Entity:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.manage.getOrderItem("RentalShop");case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop();}},y,this)}))},Condition:function(){return __awaiter(x,void 0,void 0,regeneratorRuntime.mark(function y(){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.isAccountActive();case 2:if(b.t0=b.sent,!b.t0){b.next=7;break}return b.next=6,this.isShopValid();case 6:b.t0=b.sent;case 7:return b.abrupt("return",b.t0);case 8:case"end":return b.stop();}},y,this)}))}}]}return _createClass(t,[{key:"isAccountActive",value:function(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this._isAccountActive.Checked){l.next=2;break}return l.abrupt("return",this._isAccountActive.Value);case 2:return l.next=4,this.manage.isAccountActive();case 4:return this._isAccountActive.Value=l.sent,this._isAccountActive.Checked=!0,l.abrupt("return",this._isAccountActive.Value);case 7:case"end":return l.stop();}},a,this)}))}},{key:"isShopValid",value:function(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this._isShopValid.Checked){l.next=2;break}return l.abrupt("return",this._isShopValid.Value);case 2:return l.next=4,this.core.getShop();case 4:if(!l.sent){l.next=8;break}l.t0=!0,l.next=9;break;case 8:l.t0=!1;case 9:return this._isShopValid.Value=l.t0,this._isShopValid.Checked=!0,l.abrupt("return",this._isShopValid.Value);case 12:case"end":return l.stop();}},a,this)}))}},{key:"ngAfterContentInit",value:function(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.parent.checkLogin();case 2:if(l.sent){l.next=5;break}return this.parent.select(0),l.abrupt("return");case 5:this.parent.Title="Property Rentals",this.changeDetectorRef.detectChanges();case 7:case"end":return l.stop();}},a,this)}))}}]),t}();__decorate([core_1.ViewChild("view"),__metadata("design:type",errisy_ui_1.InfoTableControl)],RentalComponent.prototype,"View",void 0),__decorate([core_1.HostBinding("style.flex"),__metadata("design:type",String)],RentalComponent.prototype,"style_flex",void 0),__decorate([core_1.HostBinding("style.display"),__metadata("design:type",String)],RentalComponent.prototype,"style_display",void 0),__decorate([core_1.ViewChild("tab"),__metadata("design:type",errisy_ui_1.TabManager)],RentalComponent.prototype,"tab",void 0),RentalComponent=__decorate([core_1.Component({selector:"manage-rental",template:" <div class=\"flex-column-stretch flex-stretch\"> <div class=\"flex-row-stretch view-title\"> <div class=\"flex-row-center flex-stretch flex-center\"> <span style=\"cursor: default; user-select: none\">{{parent.Title}}</span> </div> </div> <div [TabManager]=\"Tabs\" #tab class=\"flex-column-stretch flex-stretch warm-gradient\"> </div> <div class=\"flex-row-center view-status\"> {{parent.Status}} </div> </div>",providers:[management_client_1.ManageCore,rental_client_1.ShopCore,rental_client_1.EntrySuffixCore,rental_client_1.ProductCore,rental_client_1.CategoryCore]}),__metadata("design:paramtypes",[management_client_1.ManageCore,content_1.ContentControl,core_1.ChangeDetectorRef,rental_client_1.ShopCore,rental_client_1.EntrySuffixCore,rental_client_1.ProductCore,rental_client_1.CategoryCore])],RentalComponent),exports.RentalComponent=RentalComponent;