"use strict";var __decorate=this&&this.__decorate||function(a,b,e,f){var j,g=arguments.length,h=3>g?b:null===f?f=Object.getOwnPropertyDescriptor(b,e):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(a,b,e,f);else for(var l=a.length-1;0<=l;l--)(j=a[l])&&(h=(3>g?j(h):3<g?j(b,e,h):j(b,e))||h);return 3<g&&h&&Object.defineProperty(b,e,h),h},__metadata=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},__param=this&&this.__param||function(a,b){return function(e,f){b(e,f,a)}},core_1=require("@angular/core"),ctr_completer_1=require("./ctr-completer"),CtrRowItem=function(){return function(b,e){this.row=b,this.index=e}}();exports.CtrRowItem=CtrRowItem;var CtrDropdown=function(){function a(b,e){this.completer=b,this.el=e,this.rows=[],this.completer.registerDropdown(this)}return a.prototype.ngOnInit=function(){var b=getComputedStyle(this.el.nativeElement);this.isScrollOn=b.maxHeight&&"auto"===b.overflowY},a.prototype.ngOnDestroy=function(){this.completer.registerDropdown(null)},a.prototype.registerRow=function(b){this.rows.push(b)},a.prototype.highlightRow=function(b){var e=this.rows.find(function(f){return f.index===b});return 0>b?(this.currHighlited&&this.currHighlited.row.setHighlited(!1),void(this.currHighlited=void 0)):void(!e||(this.currHighlited&&this.currHighlited.row.setHighlited(!1),this.currHighlited=e,this.currHighlited.row.setHighlited(!0),this.completer.onHighlighted(this.currHighlited.row.getDataItem())))},a.prototype.clear=function(){this.rows=[]},a.prototype.onSelected=function(b){this.completer.onSelected(b)},a.prototype.selectCurrent=function(){this.currHighlited?this.onSelected(this.currHighlited.row.getDataItem()):0<this.rows.length&&this.onSelected(this.rows[0].row.getDataItem())},a.prototype.nextRow=function(){var b=0;if(this.currHighlited&&(b=this.currHighlited.index+1),this.highlightRow(b),this.isScrollOn&&this.currHighlited){var e=this.currHighlited.row.getNativeElement();this.dropdownHeight()<e.getBoundingClientRect().bottom&&this.dropdownScrollTopTo(this.dropdownRowOffsetHeight(e))}},a.prototype.prevRow=function(){var b=-1;if(this.currHighlited&&(b=this.currHighlited.index-1),this.highlightRow(b),this.isScrollOn&&this.currHighlited){var e=this.dropdownRowTop();0>e&&this.dropdownScrollTopTo(e-1)}},a.prototype.dropdownScrollTopTo=function(b){this.el.nativeElement.scrollTop+=b},a.prototype.dropdownRowTop=function(){return this.currHighlited.row.getNativeElement().getBoundingClientRect().top-(this.el.nativeElement.getBoundingClientRect().top+parseInt(getComputedStyle(this.el.nativeElement).paddingTop,10))},a.prototype.dropdownHeight=function(){return this.el.nativeElement.getBoundingClientRect().top+parseInt(getComputedStyle(this.el.nativeElement).maxHeight,10)},a.prototype.dropdownRowOffsetHeight=function(b){var e=getComputedStyle(b);return b.offsetHeight+parseInt(e.marginTop,10)+parseInt(e.marginBottom,10)},a}();CtrDropdown=__decorate([core_1.Directive({selector:"[ctrDropdown]"}),__param(0,core_1.Host()),__metadata("design:paramtypes",[ctr_completer_1.CtrCompleter,core_1.ElementRef])],CtrDropdown),exports.CtrDropdown=CtrDropdown;