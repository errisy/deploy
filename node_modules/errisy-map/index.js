"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},__decorate=function(a,b,g,h){var o,j=arguments.length,l=3>j?b:null===h?h=Object.getOwnPropertyDescriptor(b,g):h;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(a,b,g,h);else for(var q=a.length-1;0<=q;q--)(o=a[q])&&(l=(3>j?o(l):3<j?o(b,g,l):o(b,g))||l);return 3<j&&l&&Object.defineProperty(b,g,l),l},__metadata=function(a,b){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},__param=function(a,b){return function(g,h){b(g,h,a)}},__awaiter=function(a,b,g,h){return new(g||(g=Promise))(function(j,l){function o(u){try{s(h.next(u))}catch(w){l(w)}}function q(u){try{s(h["throw"](u))}catch(w){l(w)}}function s(u){u.done?j(u.value):new g(function(w){w(u.value)}).then(o,q)}s((h=h.apply(a,b)).next())})},__generator=function(a,b){function g(s){return function(u){return h([s,u])}}function h(s){if(l)throw new TypeError("Generator is already executing.");for(;j;)try{if(l=1,o&&(q=o[2&s[0]?"return":s[0]?"throw":"next"])&&!(q=q.call(o,s[1])).done)return q;switch((o=0,q)&&(s=[0,q.value]),s[0]){case 0:case 1:q=s;break;case 4:return j.label++,{value:s[1],done:!1};case 5:j.label++,o=s[1],s=[0];continue;case 7:s=j.ops.pop(),j.trys.pop();continue;default:if((q=j.trys,!(q=0<q.length&&q[q.length-1]))&&(6===s[0]||2===s[0])){j=0;continue}if(3===s[0]&&(!q||s[1]>q[0]&&s[1]<q[3])){j.label=s[1];break}if(6===s[0]&&j.label<q[1]){j.label=q[1],q=s;break}if(q&&j.label<q[2]){j.label=q[2],j.ops.push(s);break}q[2]&&j.ops.pop(),j.trys.pop();continue;}s=b.call(a,j)}catch(u){s=[6,u],o=0}finally{l=q=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}var l,o,q,j={label:0,sent:function(){if(1&q[0])throw q[1];return q[1]},trys:[],ops:[]};return{next:g(0),"throw":g(1),"return":g(2)}};function __export(a){for(var b in a)exports.hasOwnProperty(b)||(exports[b]=a[b])}var core_1=require("@angular/core");__export(require("errisy-map/markers"));var LazyMapAPIConfig=new core_1.OpaqueToken("errisy-map "),GoogleMapAPILoader=GoogleMapAPILoader_1=function(){function a(b){this.config=b}return a.prototype.load=function(){if(GoogleMapAPILoader_1.GoogleMapScriptLoadingPromise)return GoogleMapAPILoader_1.GoogleMapScriptLoadingPromise;var b=document.createElement("script");return b.type="text/javascript",b.async=!0,b.defer=!0,b.src=this._getScriptSrc(GoogleMapAPILoader_1.callbackName),GoogleMapAPILoader_1.GoogleMapScriptLoadingPromise=new Promise(function(g,h){window[GoogleMapAPILoader_1.callbackName]=function(){g(),GoogleMapAPILoader_1.APILoadedPromiseCallback.resolve(!0)},b.onerror=function(j){h(j),GoogleMapAPILoader_1.APILoadedPromiseCallback.reject(j)}}),document.body.appendChild(b),GoogleMapAPILoader_1.GoogleMapScriptLoadingPromise},a.prototype._getScriptSrc=function(b){return"//maps.googleapis.com/maps/api/js?key="+this.config.key+"&callback="+b},a}();GoogleMapAPILoader.callbackName="ErrisyGoogleMapsLazyMapsAPILoader",GoogleMapAPILoader.IsGoogleMapAPILoaded=new Promise(function(a,b){GoogleMapAPILoader_1.APILoadedPromiseCallback={resolve:a,reject:b}}),GoogleMapAPILoader=GoogleMapAPILoader_1=__decorate([core_1.Injectable(),__param(0,core_1.Inject(LazyMapAPIConfig)),__metadata("design:paramtypes",[Object])],GoogleMapAPILoader),exports.GoogleMapAPILoader=GoogleMapAPILoader;var GoogleMapDirective=function(){function a(b,g,h){this.elementRef=b,this.googleMapAPILoader=g,this.changeDetectorRef=h,this.lat=-27.4761628,this.lng=153.028036,this.zoom=12,this.MapInit=new core_1.EventEmitter}return Object.defineProperty(a.prototype,"Lat",{get:function(){return this.lat},set:function(g){"number"==typeof+g&&(this.lat=+g)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"Lng",{get:function(){return this.lng},set:function(g){"number"==typeof+g&&(this.lng=+g)},enumerable:!0,configurable:!0}),(Object.defineProperty(a.prototype,"Zoom",{get:function(){return this.zoom},set:function(g){if("number"==typeof+g){var h=Math.round(+g);0>h&&(h=0),20<h&&(h=20),this.zoom=h}},enumerable:!0,configurable:!0}),a.prototype.ngAfterContentInit=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(b){switch(b.label){case 0:return[4,this.googleMapAPILoader.load()];case 1:return b.sent(),this.Map=new google.maps.Map(this.elementRef.nativeElement,{center:new google.maps.LatLng(this.lat,this.lng),zoom:this.zoom}),this.MapInit.emit(this.Map),[2];}})})},a)}();__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],GoogleMapDirective.prototype,"MapInit",void 0),__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],GoogleMapDirective.prototype,"Lat",null),__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],GoogleMapDirective.prototype,"Lng",null),__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],GoogleMapDirective.prototype,"Zoom",null),GoogleMapDirective=__decorate([core_1.Directive({selector:"[google-map]",providers:[GoogleMapAPILoader]}),__metadata("design:paramtypes",[core_1.ElementRef,GoogleMapAPILoader,core_1.ChangeDetectorRef])],GoogleMapDirective),exports.GoogleMapDirective=GoogleMapDirective;var ErrisyMapModule=ErrisyMapModule_1=function(){function a(){}return a.forRoot=function(b){return{ngModule:ErrisyMapModule_1,providers:[{provide:LazyMapAPIConfig,useValue:b}]}},a}();ErrisyMapModule=ErrisyMapModule_1=__decorate([core_1.NgModule({declarations:[GoogleMapDirective],providers:[],exports:[GoogleMapDirective]}),__metadata("design:paramtypes",[])],ErrisyMapModule),exports.ErrisyMapModule=ErrisyMapModule,module&&(module.exports=exports);var GoogleMapAPILoader_1,ErrisyMapModule_1;