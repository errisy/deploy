'use strict';var ParsedHTML=function(){function c(){this.nodes=[]}return c.prototype.findById=function(d){var f=function(k){return Array.isArray(k)&&k.some(function(l){return'id'==l.key&&l.value==d})};return function h(k){if(Array.isArray(k)){for(var m,l=0;l<k.length;l++){if(m=k[l],f(m.attributes))return m;if(m.nodes&&Array.isArray(m.nodes))for(var o,n=0;n<m.nodes.length;n++)if(o=h(m.nodes),o)return o}}}(this.nodes)},c}();exports.ParsedHTML=ParsedHTML;var RegexSearcher=function(){function c(d){this.regex=d}return c.prototype.search=function(d,f){this.regex.lastIndex=f,this.result=this.regex.exec(d),this.result||(this.regex.lastIndex=void 0)},c.prototype.searchAll=function(d){this.regex.lastIndex=void 0;for(var f,g=[];f=this.regex.exec(d);)g.push(f);this.results=g},c}();exports.RegexSearcher=RegexSearcher;var HTMLParser=function(){function c(){}return c.parse=function(d){d=c.removePairs(d,/<\!--/ig,/-->/ig),d=c.removePairs(d,/<script/ig,/<\/script>/ig);var f=new ParsedHTML;return f.html=d,c.parseNodes(f.html,f.nodes),f},c.parseNodes=function(d,f,g,h){var k=new RegexSearcher(/<([\w\:]+)((\s+([\w\[\]\(\)\*\.\-]+)((="[^"]+")|))*)\s*>/ig),l=new RegexSearcher(/<([\w\:]+)((\s+([\w\[\]\(\)\*\.\-]+)((="[^"]+")|))*)\s*\/>/ig),m=new RegexSearcher(/<\/([\w\:]+)>/ig),n=function(){k.search(d,g),m.search(d,g),l.search(d,g);var u=[k,m,l].filter(function(v){return'number'==typeof v.regex.lastIndex&&-1<v.regex.lastIndex}).sort(function(v,w){return Math.sign(v.regex.lastIndex-w.regex.lastIndex)});return 0<u.length?u[0]:void 0};if(h)for(var p;p=n();){if(p==l&&(h.nodes.push({tag:p.result[1],start:p.result.index,end:p.result.index+p.result[0].length,attributes:c.parseAttributes(p.result[0],p.result.index),nodes:[]}),g=p.regex.lastIndex),p==k){var q={tag:p.result[1],start:p.result.index,end:p.result.index+p.result[0].length,attributes:c.parseAttributes(p.result[0],p.result.index),nodes:[]};h.nodes.push(q),g=p.regex.lastIndex,g=c.parseNodes(d,f,g,q)}if(p==m)if(p.result[1]==h.tag){h.end=p.result.index+p.result[0].length,g=p.regex.lastIndex;break}else throw'Unmatched End of Tag: Start: '+h.tag+' End: '+p.result[0]}else for(var p=void 0;p=n();){if(p.result||console.log('empty result:',p.regex.lastIndex,g),p==l&&(f.push({tag:p.result[1],start:p.result.index,end:p.result.index+p.result[0].length,attributes:c.parseAttributes(p.result[0],p.result.index),nodes:[]}),g=p.regex.lastIndex),p==k){var q={tag:p.result[1],start:p.result.index,end:p.result.index+p.result[0].length,attributes:c.parseAttributes(p.result[0],p.result.index),nodes:[]};f.push(q),g=p.regex.lastIndex,g=c.parseNodes(d,f,g,q)}if(p==m)throw'Unexpected End of Tag '+p.result[0]}return g},c.parseAttributes=function(d,f){var g=new RegexSearcher(/\s+([\w\[\]\(\)\*\.\-]+)((="([^"]+)")|)/ig);return g.searchAll(d),g.results.map(function(h){return{start:f+h.index,end:f+h.index+h[0].length,key:h[1],value:h[4]}})},c.removePairs=function(d,f,g){for(var k,h=[];k=f.exec(d);)g.test(d)&&h.push({start:f.lastIndex-k[0].length,end:g.lastIndex});for(var l=0,m=[],n=0;n<h.length;n++)m.push(d.substring(l,h[n].start)),l=h[n].end;return l<d.length&&m.push(d.substring(l,d.length)),m.join('')},c}();exports.HTMLParser=HTMLParser,module&&(module.exports=exports);