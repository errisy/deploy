"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},__extends=function(l,o){function a(){this.constructor=l}for(var s in o)o.hasOwnProperty(s)&&(l[s]=o[s]);l.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)},__decorate=function(l,o,a,s){var h,u=arguments.length,g=3>u?o:null===s?s=Object.getOwnPropertyDescriptor(o,a):s;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)g=Reflect.decorate(l,o,a,s);else for(var C=l.length-1;0<=C;C--)(h=l[C])&&(g=(3>u?h(g):3<u?h(o,a,g):h(o,a))||g);return 3<u&&g&&Object.defineProperty(o,a,g),g},__metadata=function(l,o){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(l,o)},__awaiter=function(l,o,a,s){return new(a||(a=Promise))(function(u,g){function h(F){try{I(s.next(F))}catch(S){g(S)}}function C(F){try{I(s["throw"](F))}catch(S){g(S)}}function I(F){F.done?u(F.value):new a(function(S){S(F.value)}).then(h,C)}I((s=s.apply(l,o)).next())})},__generator=function(l,o){function a(I){return function(F){return s([I,F])}}function s(I){if(g)throw new TypeError("Generator is already executing.");for(;u;)try{if(g=1,h&&(C=h[2&I[0]?"return":I[0]?"throw":"next"])&&!(C=C.call(h,I[1])).done)return C;switch((h=0,C)&&(I=[0,C.value]),I[0]){case 0:case 1:C=I;break;case 4:return u.label++,{value:I[1],done:!1};case 5:u.label++,h=I[1],I=[0];continue;case 7:I=u.ops.pop(),u.trys.pop();continue;default:if((C=u.trys,!(C=0<C.length&&C[C.length-1]))&&(6===I[0]||2===I[0])){u=0;continue}if(3===I[0]&&(!C||I[1]>C[0]&&I[1]<C[3])){u.label=I[1];break}if(6===I[0]&&u.label<C[1]){u.label=C[1],C=I;break}if(C&&u.label<C[2]){u.label=C[2],u.ops.push(I);break}C[2]&&u.ops.pop(),u.trys.pop();continue;}I=o.call(l,u)}catch(F){I=[6,F],h=0}finally{g=C=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}var g,h,C,u={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return{next:a(0),"throw":a(1),"return":a(2)}};function __export(l){for(var o in l)exports.hasOwnProperty(o)||(exports[o]=l[o])}var core_1=require("@angular/core"),platform_browser_1=require("@angular/platform-browser"),forms_1=require("@angular/forms"),http_1=require("@angular/http"),platform_browser_2=require("@angular/platform-browser"),errisy_map_1=require("errisy-map"),errisy_completer_1=require("errisy-completer"),util=require("errisy-util"),errisy_bindable_1=require("errisy-bindable"),compiler_1=require("@angular/compiler"),errisy_dynamic_1=require("errisy-dynamic"),modelbase_1=require("errisy-ui/modelbase"),buttons_1=require("errisy-ui/buttons"),options_1=require("errisy-ui/options"),tabview_1=require("errisy-ui/tabview"),openinghours_1=require("errisy-ui/openinghours"),tabmanager_1=require("errisy-ui/tabmanager"),pipes_1=require("errisy-ui/pipes");require("errisy-string"),__export(require("errisy-ui/modelbase")),__export(require("errisy-ui/tabview")),__export(require("errisy-ui/buttons")),__export(require("errisy-ui/openinghours")),__export(require("errisy-ui/tabmanager")),__export(require("errisy-ui/pipes")),__export(require("errisy-ui/options"));var InfoTableControl=function(){function l(o,a,s){this.componentFactoryResolver=o,this.elementRef=a,this.changeDetectorRef=s,this.ClassInfoTable=!0,this.childViewReferences=[],this.Instances=[],this.isReadOnly=!1,this.Changed=!1}return l.prototype.createRow=function(){var o=this.componentFactoryResolver.resolveComponentFactory(InfoRowControl),a=this.container.createComponent(o);return this.childViewReferences.push(a),a.instance},l.prototype.FindByID=function(o){for(var u,a=0,s=this.Instances;a<s.length;a++){u=s[a];for(var C,g=0,h=u;g<h.length;g++)if(C=h[g],C.ID==o)return C}},l.prototype.Load=function(o){var a=this;this.childViewReferences.forEach(function(s){return s.destroy()}),this.childViewReferences=[],this.Instances=[],this.ModelTemplate=o,o.forEach(function(s){var u=a.createRow();s.Class&&(u.class=s.Class),s.height&&(u.height=s.height);var g=[];a.Instances.push(g),s.forEach(function(h){g.push(u.createField(h))})})},l.prototype.Verify=function(){return __awaiter(this,void 0,void 0,function(){var o,a,s;return __generator(this,function(u){switch(u.label){case 0:if(o=!0,!this.Entity)return[2,!1];a=0,u.label=1;case 1:if(!(a<this.Instances.length))return[3,6];s=0,u.label=2;case 2:return s<this.Instances[a].length?[4,this.Instances[a][s].Verify()]:[3,5];case 3:u.sent()||(o=!1),u.label=4;case 4:return s++,[3,2];case 5:return a++,[3,1];case 6:return[2,o];}})})},l.prototype.Save=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return this.SaveHost&&this.SaveMethod?[4,this.SaveMethod.apply(this.SaveHost,this.Entity)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2];}})})},l}();__decorate([core_1.HostBinding("class.info-table"),__metadata("design:type",Boolean)],InfoTableControl.prototype,"ClassInfoTable",void 0),__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],InfoTableControl.prototype,"container",void 0),InfoTableControl=__decorate([core_1.Component({selector:"[info-table]",template:"<div #container hidden></div>"}),__metadata("design:paramtypes",[core_1.ComponentFactoryResolver,core_1.ElementRef,core_1.ChangeDetectorRef])],InfoTableControl),exports.InfoTableControl=InfoTableControl;var ClassRow=function(l){function o(a){for(var s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];var g=l.call(this)||this;return g.Class=a,g.push.apply(g,s),g}return __extends(o,l),o}(Array);exports.ClassRow=ClassRow;var CustomHeightRow=function(l){function o(a){for(var s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];var g=l.call(this)||this;return g.height=a,g.push.apply(g,s),g}return __extends(o,l),o}(Array);exports.CustomHeightRow=CustomHeightRow;var InfoRowControl=InfoRowControl_1=function(){function l(o,a){this.componentFactoryResolver=o,this.parent=a,this.childViewReferences=[],this.class="",this.height="auto"}return l.prototype.isSelected=function(o){return this.CurrentComponent==o},l.ModelMapping=function(o){return"Text"===o?TextField:"Span"===o?SpanField:"Info"===o?InfoField:"Link"===o?LinkField:"Click"===o?ClickField:"Number"===o?NumberField:"DateTime"===o?DateTimeField:"Date"===o?DateField:"Month"===o?MonthField:"Week"===o?WeekField:"Password"===o?PasswordField:"NewPassword1"===o?PasswordField:"NewPassword2"===o?PasswordField:"TextArea"===o?TextAreaField:"Select"===o?SelectField:"CheckBox"===o?CheckBoxField:"Submit"===o?SubmitField:"CaptchaImage"===o?CaptchaImageField:"AutoComplete"===o?AutoCompleteField:"Image"===o?ImageField:"ImageList"===o?ImageListField:"Relation"===o?RelationField:"WeekHours"===o?WeekHoursField:"ScheduledHours"===o?ScheduledHoursField:"ListView"===o?ListViewField:"Content"===o?ContentField:"Presenter"===o?ContentField:"SingleOption"===o?SingleOptionField:"MultipleOption"===o?MultipleOptionField:void 0},l.prototype.createField=function(o){var a=this.componentFactoryResolver.resolveComponentFactory(InfoRowControl_1.ModelMapping(o.Type)),s=this.container.createComponent(a),u=s.instance;return u.Model=o,this.childViewReferences.push(s),u},l}();__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],InfoRowControl.prototype,"container",void 0),__decorate([core_1.HostBinding("class"),__metadata("design:type",String)],InfoRowControl.prototype,"class",void 0),__decorate([core_1.HostBinding("style.flex-basis"),__metadata("design:type",String)],InfoRowControl.prototype,"height",void 0),InfoRowControl=InfoRowControl_1=__decorate([core_1.Component({selector:"[info-row]",template:"<div #container hidden></div>"}),__metadata("design:paramtypes",[core_1.ComponentFactoryResolver,InfoTableControl])],InfoRowControl),exports.InfoRowControl=InfoRowControl;var filters=function(){function l(){}return l.letters=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return /^([a-z0-9]|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(o.key)||o.preventDefault(),[2]})})},l.numbers=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return /^(\d|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(o.key)||o.preventDefault(),[2]})})},l.decimals=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return /^(\d|\.|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(o.key)||o.preventDefault(),[2]})})},l.words=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return /^(\w|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(o.key)||o.preventDefault(),[2]})})},l}();exports.filters=filters;var verifictions=function(){function l(){}return l.email=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,util.isValidEmail(o)?{Result:!0}:{Result:!1,Status:"Invalid Email!"}]})})},l.required=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,void 0==o||null==o||""==o?{Result:!1,Status:"Required!"}:{Result:!0}]})})},l.mobileAU=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,/^04\d{8}/g.test(o)?{Result:!0}:{Result:!1,Status:"Invalid Mobile!"}]})})},l.fixedLength=function(o){var a=this;return function(s){return __awaiter(a,void 0,void 0,function(){return __generator(this,function(){return[2,s&&s.length==o?{Result:!0}:{Result:!1,Status:"Must be "+o+" chars!"}]})})}},l.min=function(o){var a=this;return function(s){return __awaiter(a,void 0,void 0,function(){return __generator(this,function(){switch("undefined"==typeof s?"undefined":_typeof(s)){case"number":case"string":return[2,s<o?{Result:!1,Status:"Smaller than "+o+"!"}:{Result:!0}];default:return[2,{Result:!1,Status:"Not valid nubmer or string."}];}return[2]})})}},l.max=function(o){var a=this;return function(s){return __awaiter(a,void 0,void 0,function(){return __generator(this,function(){switch("undefined"==typeof s?"undefined":_typeof(s)){case"number":case"string":return[2,s>o?{Result:!1,Status:"Greater than "+o+"!"}:{Result:!0}];default:return[2,{Result:!1,Status:"Not valid nubmer or string."}];}return[2]})})}},l.maxLength=function(o){var a=this;return function(s){return __awaiter(a,void 0,void 0,function(){return __generator(this,function(){switch("undefined"==typeof s?"undefined":_typeof(s)){case"string":return[2,s.length>o?{Result:!1,Status:"Longer than "+o+"!"}:{Result:!0}];default:return[2,{Result:!1,Status:"Not valid nubmer or string."}];}return[2]})})}},l.minLength=function(o){var a=this;return function(s){return __awaiter(a,void 0,void 0,function(){return __generator(this,function(){switch("undefined"==typeof s?"undefined":_typeof(s)){case"string":return[2,s.length<o?{Result:!1,Status:"Shorter than "+o+"!"}:{Result:!0}];default:return[2,{Result:!1,Status:"Not valid nubmer or string."}];}return[2]})})}},l}();exports.verifictions=verifictions;var fields=function(){function l(){}return l.text=function(o,a){var s=new modelbase_1.ModelField;return s.Type="Text",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.span=function(o,a){var s=new modelbase_1.ModelField;return s.Type="Span",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.info=function(o){var a=new modelbase_1.ModelField;return a.Type="Info",a.Title=o,a},l.number=function(o,a){var s=new modelbase_1.ModelField;return s.Type="Number",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.date=function(o,a){var s=new modelbase_1.ModelField;return s.Type="Date",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.time=function(o,a){var s=new modelbase_1.ModelField;return s.Type="Time",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.datetime=function(o,a){var s=new modelbase_1.ModelField;return s.Type="DateTime",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.month=function(o,a){var s=new modelbase_1.ModelField;return s.Type="Month",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.week=function(o,a){var s=new modelbase_1.ModelField;return s.Type="Week",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.weekhours=function(o,a){var s=new modelbase_1.ModelField;return s.Type="WeekHours",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.scheduledhours=function(o,a){var s=new modelbase_1.ModelField;return s.Type="ScheduledHours",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.link=function(o,a,s){var u=new modelbase_1.ModelField;return u.Type="Link",u.Name=errisy_bindable_1.obp.analyzeMember(o),u.Title=a,u.HrefLink=s,u},l.click=function(o,a){var s=new modelbase_1.ModelField;return s.Type="Click",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.password=function(o,a){var s=new modelbase_1.ModelField;return s.Type="Password",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.password1=function(o,a){var s=new modelbase_1.ModelField;return s.Type="NewPassword1",s.Title=a?a:"New Password",s.EventChecks={ngModelChange:[{invoker:{host:o,method:o.checkEmpty}},{invoker:{host:o,method:o.asyncCheckPassword}}]},s.Verification=[{invoker:{host:o,method:o.checkEmpty}},{invoker:{host:o,method:o.asyncCheckPassword}}],s.ValueModel=o.Model1,s.StatusModel=o.StatusModel,s},l.password2=function(o,a){var s=new modelbase_1.ModelField;return s.Type="NewPassword2",s.Title=a?a:"Repeat Password",s.EventChecks={ngModelChange:[{invoker:{host:o,method:o.checkEmpty}},{invoker:{host:o,method:o.asyncCheckPassword}}]},s.Verification=[{invoker:{host:o,method:o.checkEmpty}},{invoker:{host:o,method:o.asyncCheckPassword}}],s.ValueModel=o.Model2,s.StatusModel=o.StatusModel,s},l.textarea=function(o,a){var s=new modelbase_1.ModelField;return s.Type="TextArea",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.checkbox=function(o,a,s){var u=new modelbase_1.ModelField;return u.Type="CheckBox",u.Name=errisy_bindable_1.obp.analyzeMember(o),u.Title=a,u.CheckValue=s,u},l.select=function(o,a,s){var u=new modelbase_1.ModelField;return u.Type="Select",u.Title=s,u.Name=errisy_bindable_1.obp.analyzeMember(o),u.Options=new modelbase_1.OptionsModel,u.Options.Values=a,u},l.capchaimage=function(o){var a=new modelbase_1.ModelField;return a.Type="CaptchaImage",a.CaptchaLink=o,a},l.submit=function(o){var a=new modelbase_1.ModelField;return a.Type="Submit",a.Title=o,a},l.color=function(o,a){var s=new modelbase_1.ModelField;return s.Type="Text",s.Name=errisy_bindable_1.obp.analyzeMember(o),s.Title=a,s},l.autocomplete=function(o,a,s,u,g,h){var C=new modelbase_1.ModelField;return C.Type="AutoComplete",C.Name=errisy_bindable_1.obp.analyzeMember(o),C.Title=g,util.isValidNotNullString(a)&&(C.AutoCompleteRemoteURL=a),"object"==("undefined"==typeof a?"undefined":_typeof(a))&&Array.isArray(a)&&(C.AutoCompleteData=a),C.AutoCompleteSearchFields=s,C.AutoCompleteTitleField=u,h&&(C.AutoCompleteMinSearchLength=h.minSearchLength?h.minSearchLength:1,C.AutoCompleteAutoMatch=!!h.autoMatch,C.AutoCompleteDataMode=h.dataMode,C.AutoCompleteObjectFetcher=h.objectFetcher),("number"!=typeof C.AutoCompleteMinSearchLength||Number.isNaN(C.AutoCompleteMinSearchLength))&&(C.AutoCompleteMinSearchLength=1),C},l.image=function(o,a,s,u,g,h,C,I){var F=new modelbase_1.ModelField;return F.Name=errisy_bindable_1.obp.analyzeMember(o),F.Type="Image",F.Title=u,F.UploadService=a,F.Uploader=s,F.ImageWidth=g,F.ImageHeight=h,F.AcceptFileType=C,F.MaxFileSize=I,F},l.imagelist=function(o,a,s,u,g,h,C,I,F,S){var x=new modelbase_1.ModelField;return x.Name=errisy_bindable_1.obp.analyzeMember(o),x.Type="ImageList",x.Title=u,x.UploadService=a,x.Uploader=s,x.AllowsMultiple=g,x.ImageWidth=h,x.ImageHeight=C,x.ViewWidth=S,x.AcceptFileType=I,x.MaxFileSize=F,x},l.relation=function(o,a,s,u,g,h,C,I,F){var S=new modelbase_1.ModelField;return S.Type="Relation",S.Name=errisy_bindable_1.obp.analyzeMember(o),S.Title=g,S.RelationDataSource=a,S.TemplateUrl=s,S.SourceTitle=h,S.FieldTitle=C,S.QueryFields=u,S.ViewHeight=I,S.ViewWidth=F,S},l.listview=function(o,a,s,u,g){var h=new modelbase_1.ModelField;return h.Type="ListView",h.Name=errisy_bindable_1.obp.analyzeMember(o),h.Title=s,h.TemplateUrl=a,h.ViewHeight=u,h.ViewWidth=g,h},l.content=function(o,a,s,u,g){var h=new modelbase_1.ModelField;return h.Type="Content",h.Title=s,h.TemplateUrl=a,h.ContextObject=o,h.EventObject=u,h.Modules=g,h},l.presenter=function(o,a,s,u,g){var h=new modelbase_1.ModelField;return h.Type="Content",h.Title=s,h.TemplateUrl=a,h.Name=errisy_bindable_1.obp.analyzeMember(o),h.EventObject=u,h.Modules=g,h},l.singleoption=function(o,a,s,u,g,h){var C=new modelbase_1.ModelField;return C.Type="SingleOption",C.Title=s,C.OptionValues=a,C.TitleField=u,C.ValueField=g,C.OptionColor=h,C.Name=errisy_bindable_1.obp.analyzeMember(o),C},l.multipleoption=function(o,a,s,u,g,h){var C=new modelbase_1.ModelField;return C.Type="MultipleOption",C.Title=s,C.OptionValues=a,C.TitleField=u,C.ValueField=g,C.OptionColor=h,C.Name=errisy_bindable_1.obp.analyzeMember(o),C},l}();exports.fields=fields;var rows=function(){function l(){}return l.buttons=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new(ClassRow.bind.apply(ClassRow,[void 0,"row-btn"].concat(o)))},l.link=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new(ClassRow.bind.apply(ClassRow,[void 0,"row-link"].concat(o)))},l.text=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new(ClassRow.bind.apply(ClassRow,[void 0,"row-text"].concat(o)))},l.auto=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new(ClassRow.bind.apply(ClassRow,[void 0,"row-auto"].concat(o)))},l.custom=function(o){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return new(CustomHeightRow.bind.apply(CustomHeightRow,[void 0,o].concat(a)))},l}();exports.rows=rows;var TextField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);TextField=__decorate([core_1.Component({selector:"[text-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<input #input [(ngModel)]=\"Value\" [readonly]=\"isReadOnly\" [maxlength]=\"maxlength\" [pattern]=\"pattern\" (ngModelChange)=\"ngModelChange($event);\" (input)=\"ngInput($event);\" (blur)=\"ngBlur($event);Save();\" placeholder=\"{{Title}}\" type=\"text\" />"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],TextField),exports.TextField=TextField;var SpanField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);SpanField=__decorate([core_1.Component({selector:"[span-field]",template:"<span>{{Value}}</span>"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],SpanField),exports.SpanField=SpanField;var InfoField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);InfoField=__decorate([core_1.Component({selector:"[info-field]",template:"<span>{{Title}}</span>"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],InfoField),exports.InfoField=InfoField;var LinkField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);LinkField=__decorate([core_1.Component({selector:"[link-field]",template:"<a #input [href]=\"Link\" [title]=\"Title\">{{Value}}</a>"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],LinkField),exports.LinkField=LinkField;var ClickField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);ClickField=__decorate([core_1.Component({selector:"[click-field]",template:"<a #input [title]=\"Title\">{{Value}}</a>"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],ClickField),exports.ClickField=ClickField;var NumberField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);NumberField=__decorate([core_1.Component({selector:"[number-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<input #input [(ngModel)]=\"Value\" [readonly]=\"isReadOnly\" [min]=\"min\" [max]=\"max\" [style.ime-mode]=\"imeMode\" (ngModelChange)=\"ngModelChange($event);\" (input)=\"ngInput($event);\" (blur)=\"ngBlur($event);Save();\" [readonly]=\"isReadOnly\" placeholder=\"{{Title}}\" type=\"number\" />"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],NumberField),exports.NumberField=NumberField;var TimeField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);TimeField=__decorate([core_1.Component({selector:"[time-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<input #input [(ngModel)]=\"Value\" [readonly]=\"isReadOnly\" [min]=\"min\" [max]=\"max\" (ngModelChange)=\"ngModelChange($event);\" (input)=\"ngInput($event);\" (blur)=\"ngBlur($event);Save();\" placeholder=\"{{Title}}\" type=\"time\" />"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],TimeField),exports.TimeField=TimeField;var DateField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);DateField=__decorate([core_1.Component({selector:"[date-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<input #input [(ngModel)]=\"Value\" [readonly]=\"isReadOnly\" [min]=\"min\" [max]=\"max\" (ngModelChange)=\"ngModelChange($event);\" (input)=\"ngInput($event);\" (blur)=\"ngBlur($event);Save();\" placeholder=\"{{Title}}\" type=\"date\" />"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],DateField),exports.DateField=DateField;var DateTimeField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),Object.defineProperty(o.prototype,"StringDateTime",{get:function(){var s=this.Value;if(s){var u=new Date(s);return(u.getFullYear()+"").padLeft(4,"0")+"-"+(u.getMonth()+1+"").padLeft(2,"0")+"-"+(u.getDate()+"").padLeft(2,"0")+"T"+(u.getHours()+"").padLeft(2,"0")+":"+(u.getMinutes()+"").padLeft(2,"0")}},set:function(s){var g,u=/(\d+)-(\d{1,2})-(\d{1,2})T(\d{1,2}):(\d{1,2})/g.exec(s);u&&(g=new Date(+u[1],+u[2]-1,+u[3],+u[4],+u[5]),this.Value=+g)},enumerable:!0,configurable:!0}),o.prototype.convertStr2NDate=function(a){var u,s=/(\d{1,4})-(\d{1,2})-(\d{1,2})T(\d{1,2}):(\d{1,2})/g.exec(a);return u=s?new Date(+s[1],+s[2]-1,+s[3],+s[4],+s[5]):new Date(Date.now()),+u},o}(modelbase_1.FieldViewBase);DateTimeField=__decorate([core_1.Component({selector:"[datetime-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<input #input [(ngModel)]=\"StringDateTime\" [readonly]=\"isReadOnly\" [min]=\"min\" [max]=\"max\" placeholder=\"{{Title}}\" type=\"datetime-local\" (ngModelChange)=\"ngModelChange($event);\" (input)=\"ngInput($event);\" (blur)=\"ngBlur($event);Save();\" />"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],DateTimeField),exports.DateTimeField=DateTimeField;var WeekHoursField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);WeekHoursField=__decorate([core_1.Component({selector:"[weekhours-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<OpeningHours #input [(ngModel)]=\"Value\" [readonly]=\"isReadOnly\" (ngModelChange)=\"ngModelChange($event);\" (Save)=\"Save();\">\n</OpeningHours>\n"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],WeekHoursField),exports.WeekHoursField=WeekHoursField;var ScheduledHoursField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);ScheduledHoursField=__decorate([core_1.Component({selector:"[scheduledhours-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<ScheduledHours #input [(ngModel)]=\"Value\" [readonly]=\"isReadOnly\" (ngModelChange)=\"ngModelChange($event);\" (Save)=\"Save();\">\n</ScheduledHours>\n"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],ScheduledHoursField),exports.ScheduledHoursField=ScheduledHoursField;var MonthField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);MonthField=__decorate([core_1.Component({selector:"[month-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<input #input [(ngModel)]=\"Value\" [readonly]=\"isReadOnly\" [min]=[min] [max]=[max] (ngModelChange)=\"ngModelChange($event);\" (input)=\"ngInput($event);\" (blur)=\"ngBlur($event);Save();\" placeholder=\"{{Title}}\" type=\"month\" />"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],MonthField),exports.MonthField=MonthField;var WeekField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);WeekField=__decorate([core_1.Component({selector:"[week-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<input #input [(ngModel)]=\"Value\" [readonly]=\"isReadOnly\" [min]=[min] [max]=[max] (ngModelChange)=\"ngModelChange($event);\" (input)=\"ngInput($event);\" (blur)=\"ngBlur($event);Save();\" [readonly]=\"isReadOnly\" placeholder=\"{{Title}}\" type=\"week\" />"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],WeekField),exports.WeekField=WeekField;var TextAreaField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);TextAreaField=__decorate([core_1.Component({selector:"[textarea-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<textarea #input [(ngModel)]=\"Value\" [readonly]=\"isReadOnly\" [maxlength]=\"maxlength\" (ngModelChange)=\"ngModelChange($event);\" (input)=\"ngInput($event);\" (blur)=\"ngBlur($event);Save();\" [readonly]=\"isReadOnly\" placeholder=\"{{Title}}\"></textarea>"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],TextAreaField),exports.TextAreaField=TextAreaField;var ImageUploadComponent=ImageUploadComponent_1=function(){function l(o){this.domSanitizer=o,this._ImageWidth=120,this.ValueChange=new core_1.EventEmitter(!0),this.MaxFileSize=307200,this.Processing=!1,ImageUploadComponent_1.injectStyle()}return Object.defineProperty(l.prototype,"ImageWidth",{get:function(){return this._ImageWidth},set:function(a){this._ImageWidth=+a},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"Width",{get:function(){return"number"==typeof this._ImageWidth?this._ImageWidth+"px":"120px"},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"Height",{get:function(){return"number"==typeof this._ImageWidth?this._ImageWidth+"px":"120px"},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"btnWidth",{get:function(){return"number"==typeof this._ImageWidth?this._ImageWidth+2+"px":"122px"},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"btnHeight",{get:function(){return"number"==typeof this._ImageWidth?this._ImageWidth+2+"px":"122px"},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"Image",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"Value",{set:function(a){this._url=a},enumerable:!0,configurable:!0}),l.prototype.Upload=function(o){return __awaiter(this,void 0,void 0,function(){var s,u,g,h,a=this;return __generator(this,function(C){switch(C.label){case 0:if(0==o.length||!this.Uploader)return[2];for(s=[],u=0;u<o.length;u++)s.push(o.item(u));if("number"==typeof this.MaxFileSize&&(s=s.filter(function(I){return I.size<=a.MaxFileSize})),0==s.length)return[2];s.splice(1,s.length-1),this.Processing=!0,C.label=1;case 1:return C.trys.push([1,3,,4]),[4,this.Uploader.apply(this.UploadService,s)];case 2:return g=C.sent(),g&&Array.isArray(g)&&"string"==typeof g[0]&&(this._url=g[0],this.ValueChange.emit(this._url)),[3,4];case 3:return h=C.sent(),[3,4];case 4:return this.Processing=!1,[2];}})})},l.injectStyle=function(){if(!ImageUploadComponent_1.injected){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",a.appendChild(document.createTextNode("\ndiv[image-upload] > div[file-button] > div > div[image-holder] {background-size: cover; background-repeat: no-repeat; background-position: center center; }\nimage-upload > div[file-button] > div > div[image-holder] {background-size: cover; background-repeat: no-repeat; background-position: center center; }\n")),o.appendChild(a),ImageUploadComponent_1.injected=!0}},l}();ImageUploadComponent.injected=!1,__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],ImageUploadComponent.prototype,"ImageWidth",null),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],ImageUploadComponent.prototype,"Value",null),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ImageUploadComponent.prototype,"ValueChange",void 0),__decorate([core_1.Input(),__metadata("design:type",Function)],ImageUploadComponent.prototype,"Uploader",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ImageUploadComponent.prototype,"UploadService",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],ImageUploadComponent.prototype,"MaxFileSize",void 0),ImageUploadComponent=ImageUploadComponent_1=__decorate([core_1.Component({selector:"image-upload,[image-upload]",template:"<div file-button [Accept]=\"Accept\" (FileChanged)=\"Upload($event)\" [style.width]=\"btnWidth\" [style.height]=\"btnHeight\" [style.flex-basis]=\"btnHeight\" [Processing]=\"Processing\">\n    <div class=\"image-holder\" [style.width]=\"Width\" [style.height]=\"Height\" [style.background-image]=\"Image?'url('+Image+')':''\" style=\"background-size: contain; background-repeat: no-repeat; background-position: center center;\">    \n    </div>\n</div>"}),__metadata("design:paramtypes",[platform_browser_1.DomSanitizer])],ImageUploadComponent),exports.ImageUploadComponent=ImageUploadComponent;var ImageField=ImageField_1=function(l){function o(a,s,u,g){var h=l.call(this,a,s,u)||this;return h.renderer=a,h.parent=s,h.changeDetectorRef=u,h.domSanitizer=g,h.Processing=!1,ImageField_1.injectStyle(),h}return __extends(o,l),Object.defineProperty(o.prototype,"Width",{get:function(){return this._modelField&&this._modelField.ImageWidth&&"number"==typeof this._modelField.ImageWidth?this._modelField.ImageWidth+"px":"120px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Height",{get:function(){return this._modelField&&this._modelField.ImageHeight&&"number"==typeof this._modelField.ImageHeight?this._modelField.ImageHeight+"px":"120px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"btnWidth",{get:function(){return this._modelField&&this._modelField.ImageWidth&&"number"==typeof this._modelField.ImageWidth?this._modelField.ImageWidth+2+"px":"122px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"btnHeight",{get:function(){return this._modelField&&this._modelField.ImageHeight&&"number"==typeof this._modelField.ImageHeight?this._modelField.ImageHeight+2+"px":"122px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Accept",{get:function(){return this._modelField&&this._modelField.AcceptFileType?this._modelField.AcceptFileType:"image/*"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Image",{get:function(){return this.Value},enumerable:!0,configurable:!0}),o.prototype.Upload=function(a){return __awaiter(this,void 0,void 0,function(){var u,g,h,C,s=this;return __generator(this,function(I){switch(I.label){case 0:if(!this._modelField||!this._modelField.Uploader)return[2];if(0==a.length)return[2];for(u=[],g=0;g<a.length;g++)u.push(a.item(g));if(this._modelField&&"number"==typeof this._modelField.MaxFileSize&&(u=u.filter(function(F){return F.size<=s._modelField.MaxFileSize})),0==u.length)return this.Status="All File Oversize.",[2];u.splice(1,u.length-1),this.Processing=!0,this._status="Uploading Image...",I.label=1;case 1:return I.trys.push([1,3,,4]),[4,this._modelField.Uploader.apply(this._modelField.UploadService,u)];case 2:return h=I.sent(),h&&Array.isArray(h)&&"string"==typeof h[0]&&(this.Value=h[0],this.ngModelChange(h[0])),this._status="",[3,4];case 3:return C=I.sent(),this._status="Upload Error!",[3,4];case 4:return this.Processing=!1,[2];}})})},o.injectStyle=function(){if(!ImageField_1.injected){var a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",s.appendChild(document.createTextNode("\ndiv[image-field] > div[file-button] > div > div[image-holder] {background-size: cover; background-repeat: no-repeat; background-position: center center; }\n")),a.appendChild(s),ImageField_1.injected=!0}},o}(modelbase_1.FieldViewBase);ImageField.injected=!1,ImageField=ImageField_1=__decorate([core_1.Component({selector:"[image-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<div file-button [Accept]=\"Accept\" (FileChanged)=\"Upload($event)\" [style.width]=\"btnWidth\" [style.height]=\"btnHeight\" [style.flex-basis]=\"btnHeight\" [Processing]=\"Processing\">\n    <div class=\"image-holder\" [style.width]=\"Width\" [style.height]=\"Height\" [style.background-image]=\"Image?'url('+Image+')':''\" style=\"background-size: contain; background-repeat: no-repeat; background-position: center center;\">\n    \n    </div>\n</div>\n"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef,platform_browser_1.DomSanitizer])],ImageField),exports.ImageField=ImageField;var ImageListField=ImageListField_1=function(l){function o(a,s,u,g){var h=l.call(this,a,s,u)||this;return h.renderer=a,h.parent=s,h.changeDetectorRef=u,h.domSanitizer=g,ImageListField_1.injectStyle(),h}return __extends(o,l),Object.defineProperty(o.prototype,"Width",{get:function(){return this._modelField&&this._modelField.ImageWidth&&"number"==typeof this._modelField.ImageWidth?this._modelField.ImageWidth+"px":"120px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Height",{get:function(){return this._modelField&&this._modelField.ImageHeight&&"number"==typeof this._modelField.ImageHeight?this._modelField.ImageHeight+"px":"120px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"SVGWidth",{get:function(){return this._modelField&&this._modelField.ImageWidth&&"number"==typeof this._modelField.ImageWidth?this._modelField.ImageWidth:120},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"SVGHeight",{get:function(){return this._modelField&&this._modelField.ImageHeight&&"number"==typeof this._modelField.ImageHeight?this._modelField.ImageHeight:120},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ViewWidth",{get:function(){return this._modelField&&this._modelField.ViewWidth&&"number"==typeof this._modelField.ViewWidth?this._modelField.ViewWidth+"px":"600px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Accept",{get:function(){return this._modelField&&this._modelField.AcceptFileType?this._modelField.AcceptFileType:"image/*"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"GalleryHeight",{get:function(){return this._modelField&&this._modelField.ImageHeight&&"number"==typeof this._modelField.ImageHeight?this._modelField.ImageHeight+30+"px":"150px"},enumerable:!0,configurable:!0}),o.prototype.removeImage=function(a){var s=this.Value;"number"==typeof a&&s&&Array.isArray(s)&&0<=a&&a<s.length&&s.splice(a,1)},Object.defineProperty(o.prototype,"Images",{get:function(){var s=this.Value;return s&&Array.isArray(s)?s:[]},enumerable:!0,configurable:!0}),o.prototype.Upload=function(a){return __awaiter(this,void 0,void 0,function(){var u,g,h,C,I,s=this;return __generator(this,function(F){switch(F.label){case 0:if(!this._modelField||!this._modelField.Uploader)return[2];if(0==a.length)return[2];for(u=[],g=0;g<a.length;g++)u.push(a.item(g));if(this._modelField&&"number"==typeof this._modelField.MaxFileSize&&(u=u.filter(function(S){return S.size<=s._modelField.MaxFileSize})),0==u.length)return this.Status="All File Oversize.",[2];this.Processing=!0,this._status="Uploading Image...",F.label=1;case 1:return F.trys.push([1,3,,4]),[4,this._modelField.Uploader.apply(this._modelField.UploadService,u)];case 2:return h=F.sent(),h&&Array.isArray(h)&&"string"==typeof h[0]&&(C=this.Value,C&&Array.isArray(C)?C.push.apply(C,h):this.Value=h,this.ngModelChange(this.Value)),this._status="",[3,4];case 3:return I=F.sent(),this._status="Upload Error!",[3,4];case 4:return this.Processing=!1,[2];}})})},Object.defineProperty(o.prototype,"Multiple",{get:function(){return this._modelField&&this._modelField.AllowsMultiple},enumerable:!0,configurable:!0}),o.injectStyle=function(){if(!ImageListField_1.injected){var a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",s.appendChild(document.createTextNode("\ndiv[imagelist-field] > div[imagelist-gallery] { display: flex; justify-content: flex-start; align-items: center; flex-direction: row; overflow-x: auto; }\ndiv[imagelist-field] > div[imagelist-gallery] > div[file-button] > div[image-holder] {background-size: contain; background-repeat: no-repeat; background-position: center; }\n")),a.appendChild(s),ImageListField_1.injected=!0}},o}(modelbase_1.FieldViewBase);ImageListField.injected=!1,ImageListField=ImageListField_1=__decorate([core_1.Component({selector:"[imagelist-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<div class=\"imagelist-gallery\" [style.flex-basis]=\"GalleryHeight\" [style.height]=\"GalleryHeight\" [style.width]=\"ViewWidth\" (FileChanged)=\"Upload($event)\" style=\"display: flex; flex-grow: 1; flex-shrink: 1;  flex-direction: row; overflow-x: auto;\" >\n    <div *ngFor=\"let Image of Images; let Index = index;\">\n        <div class=\"image-holder\" [style.width]=\"Width\" [style.height]=\"Height\" [style.background-image]=\"Image?'url('+Image+')':''\"  style=\"background-size: contain; background-repeat: no-repeat; background-position: center center;\">\n            <svg btn-delete width=\"32\" height=\"32\" style=\"right: 0; top: 0;\" (click)=\"removeImage(Index)\"></svg>\n        </div>\n    </div>\n    <div class=\"image-holder\" [style.width]=\"Width\" [style.flex-basis]=\"Width\" [style.height]=\"Height\" file-button [Accept]=\"Accept\" [Multiple]=\"Multiple\" (FileChanged)=\"Upload($event)\">\n        <svg btn-create [style.width]=\"SVGWidth\" [style.height]=\"SVGHeight\" viewBox=\"0 0 32 32\">\n            <line x1=\"16\" x2=\"16\" y1=\"3\" y2=\"29\" stroke=\"black\" stroke-width=\"3\"/>\n            <line x1=\"3\" x2=\"29\" y1=\"16\" y2=\"16\" stroke=\"black\" stroke-width=\"3\"/>\n        </svg>\n    </div>\n<div>\n"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef,platform_browser_1.DomSanitizer])],ImageListField),exports.ImageListField=ImageListField;var FileButton=FileButton_1=function(){function l(){var o=this;this.onFileChange=function(){var s=o.file.nativeElement.files;void 0===s||0==s.length||o.FileChanged.emit(s)},this.Multiple=!1,this.Processing=!1,this.clearFile=function(){o.file.nativeElement.value=""},this.FileChanged=new core_1.EventEmitter,FileButton_1.injectStyle()}return l.injectStyle=function(){if(!FileButton_1.injected){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",a.appendChild(document.createTextNode("\ndiv[file-button] {position:relative; overflow:hidden; user-select: none; cursor: pointer; border: 1px solid #bbb;}\ndiv[file-button]:hover {border: 1px solid #fc8;}\ndiv[file-button]:active {border: 1px solid #fa4;}\n")),o.appendChild(a),FileButton_1.injected=!0}},l}();FileButton.injected=!1,__decorate([core_1.Input(),__metadata("design:type",String)],FileButton.prototype,"Accept",void 0),__decorate([core_1.ViewChild("file"),__metadata("design:type",core_1.ElementRef)],FileButton.prototype,"file",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],FileButton.prototype,"Multiple",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],FileButton.prototype,"Processing",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],FileButton.prototype,"FileChanged",void 0),FileButton=FileButton_1=__decorate([core_1.Component({selector:"[file-button]",template:"\n<input #file (mousedown)=\"clearFile();\" [style.width]=\"Processing?'0px':'2160px'\" [style.height]=\"Processing?'0px':'1600px'\" style=\"left:-100px; top: 0px; position: absolute; opacity:0; cursor: pointer;\"\n type=\"file\" [accept]=\"Accept\" (change)=\"onFileChange($event)\" [multiple]=\"Multiple\"/>\n<div><ng-content></ng-content></div>"}),__metadata("design:paramtypes",[])],FileButton),exports.FileButton=FileButton;var PasswordField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);PasswordField=__decorate([core_1.Component({selector:"[password-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<input #input [(ngModel)]=\"Value\" (ngModelChange)=\"ngModelChange($event);Save();\" (input)=\"ngInput($event);\" (blur)=\"ngBlur($event);Save();\"  [readonly]=\"isReadOnly\" placeholder=\"{{Title}}\" type=\"password\" />"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],PasswordField),exports.PasswordField=PasswordField;var CheckBoxField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o.prototype.onCheckBoxClick=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.isReadOnly||(this.Value=!this.Value,this.ngModelChange(this.Value),this.Save()),[2]})})},Object.defineProperty(o.prototype,"CheckValue",{get:function(){return this._modelField&&this._modelField.CheckValue?this._modelField.CheckValue:"Valid"},enumerable:!0,configurable:!0}),o}(modelbase_1.FieldViewBase);CheckBoxField=__decorate([core_1.Component({selector:"[checkbox-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<div class=\"flex-row-stretch flex-center flex-stretch flex-expand\" style=\"flex: 0 0 auto;\">\n    <div class=\"flex-row-stretch flex-stretch\">\n        <svg btn-check [class.checked]=\"Value\" (click)=\"onCheckBoxClick()\" height=\"24\"></svg>\n        <label class=\"info\">{{CheckValue}}</label>\n    </div>\n</div>"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],CheckBoxField),exports.CheckBoxField=CheckBoxField;var CheckBoxComponent=function(){function l(){this.ValueChange=new core_1.EventEmitter(!0)}return l.prototype.onHostClick=function(){this._value=!this._value,this.ValueChange.emit(this._value)},Object.defineProperty(l.prototype,"Value",{set:function(a){this._value=a},enumerable:!0,configurable:!0}),l}();__decorate([core_1.HostListener("click"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],CheckBoxComponent.prototype,"onHostClick",null),__decorate([core_1.Input(),__metadata("design:type",String)],CheckBoxComponent.prototype,"label",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],CheckBoxComponent.prototype,"Value",null),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],CheckBoxComponent.prototype,"ValueChange",void 0),CheckBoxComponent=__decorate([core_1.Component({selector:"checkbox,[checkbox]",template:"\n<svg btn-check height=\"24px\" [class.checked]=\"_value\"></svg><span>{{label}}</span>\n"}),__metadata("design:paramtypes",[])],CheckBoxComponent),exports.CheckBoxComponent=CheckBoxComponent;var SelectField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),Object.defineProperty(o.prototype,"Options",{get:function(){return this._modelField&&this._modelField.Options&&this._modelField.Options.Values?this._modelField.Options.Values:[]},enumerable:!0,configurable:!0}),o}(modelbase_1.FieldViewBase);SelectField=__decorate([core_1.Component({selector:"[select-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<select [(ngModel)]=\"Value\" (ngModelChange)=\"ngModelChange($event);Save();\">\n    <option *ngFor=\"let option of Options\" [ngValue]=\"option.Value\">{{option.Title}}</option>\n</select>"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],SelectField),exports.SelectField=SelectField;var CaptchaImageField=function(l){function o(){var a=l.apply(this,arguments)||this;return a.CaptchaCell=!0,a}return __extends(o,l),Object.defineProperty(o.prototype,"Model",{get:function(){return this._modelField},set:function(s){this._modelField=s,this.ChangeLink()},enumerable:!0,configurable:!0}),o.prototype.ChangeLink=function(){this.CaptchaLink=this._modelField.CaptchaLink+(+Date.now()).toString(16)},o}(modelbase_1.FieldViewBase);__decorate([core_1.HostListener("click"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],CaptchaImageField.prototype,"ChangeLink",null),__decorate([core_1.HostBinding("class.captcha-cell"),__metadata("design:type",Boolean)],CaptchaImageField.prototype,"CaptchaCell",void 0),CaptchaImageField=__decorate([core_1.Component({selector:"[captcha-svg]",template:"<img heigth=\"64\" src=\"{{CaptchaLink}}\" />"}),__metadata("design:paramtypes",[])],CaptchaImageField),exports.CaptchaImageField=CaptchaImageField;var SubmitField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),o}(modelbase_1.FieldViewBase);SubmitField=__decorate([core_1.Component({selector:"[submit-field]",template:"<input #input type=\"submit\" [readonly]=\"isReadOnly\" value=\"{{Title}}\" />"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],SubmitField),exports.SubmitField=SubmitField;var AutoCompleteField=function(l){function o(a,s,u,g){var h=l.call(this,a,s,u)||this;return h.renderer=a,h.parent=s,h.changeDetectorRef=u,h.completerService=g,h}return __extends(o,l),Object.defineProperty(o.prototype,"Model",{get:function(){return this._modelField},set:function(s){this._modelField=s,this.InitializeDataService(),this.SetupModel()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"MinSearchLength",{get:function(){return this._modelField&&"number"==typeof this._modelField.AutoCompleteMinSearchLength?this._modelField.AutoCompleteMinSearchLength:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"AutoMatch",{get:function(){return this._modelField&&this._modelField.AutoCompleteAutoMatch},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"DataMode",{get:function(){return this._modelField&&this._modelField.AutoCompleteDataMode?this._modelField.AutoCompleteDataMode:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ObjectFetcher",{get:function(){return this._modelField&&this._modelField.AutoCompleteObjectFetcher?this._modelField.AutoCompleteObjectFetcher:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"TitleField",{get:function(){return this._modelField&&this._modelField.AutoCompleteTitleField?this._modelField.AutoCompleteTitleField:""},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"SearchFields",{get:function(){return this._modelField&&this._modelField.AutoCompleteSearchFields?this._modelField.AutoCompleteSearchFields:""},enumerable:!0,configurable:!0}),o.prototype.InitializeDataService=function(){this._modelField.AutoCompleteData&&(this.AutoCompleteService=this.completerService.local(this._modelField.AutoCompleteData,this._modelField.AutoCompleteSearchFields,this._modelField.AutoCompleteTitleField)),this._modelField.AutoCompleteRemoteURL&&(this.AutoCompleteService=this.completerService.remote(this._modelField.AutoCompleteRemoteURL,this._modelField.AutoCompleteSearchFields,this._modelField.AutoCompleteTitleField,this._modelField.AutoCompleteDataField))},o.prototype.CompleterItemSelected=function(a){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){switch(s.label){case 0:return this.CompleterItemSelectedEventHandler?[4,this.CompleterItemSelectedEventHandler(a)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2];}})})},o.prototype.SetupSpecificEventListeners=function(a,s){var u=this,g=this;return"selected"===a&&(this.CompleterItemSelectedEventHandler=function(h){return __awaiter(u,void 0,void 0,function(){var C,I,F,F,S,F;return __generator(this,function(x){switch(x.label){case 0:C=0,x.label=1;case 1:return C<s.length?(I=s[C],I.handler?[4,I.handler(h,g)]:[3,3]):[3,8];case 2:if(F=x.sent(),F&&F.Status&&(g.Status=F.Status),F&&!F.Result)return[2,{Result:!1,Status:g.Status}];x.label=3;case 3:return I.check?[4,I.check(g.Value)]:[3,5];case 4:if(F=x.sent(),F&&F.Status&&(g.Status=F.Status),F&&!F.Result)return[2,{Result:!1,Status:g.Status}];x.label=5;case 5:return I.invoker?(S=I.invoker,S.host&&S.method?[4,S.method.apply(S.host,[h,g])]:[3,7]):[3,7];case 6:if(F=x.sent(),F&&F.Status&&(g.Status=F.Status),F&&!F.Result)return[2,{Result:!1,Status:g.Status}];x.label=7;case 7:return C++,[3,1];case 8:return[2];}})})},!0)},o}(modelbase_1.FieldViewBase);AutoCompleteField=__decorate([core_1.Component({selector:"[autocomplete-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<auto-completer style=\"flex: 1 1 auto; display: flex; flex-direction: column; align-items: stretch;\" [dataMode]=\"DataMode\" [titleField]=\"TitleField\" [fetcher]=\"ObjectFetcher\" [searchFields]=\"SearchFields\"\n    [(ngModel)]=\"Value\" [dataService]=\"AutoCompleteService\" (selected)=\"CompleterItemSelected($event)\" [minSearchLength]=\"MinSearchLength\" [placeholder]=\"Title\" [autoMatch]=\"AutoMatch\"></auto-completer>",styles:["\ndiv[ctrcompleter]{ flex: 1 1 auto; }\n"]}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef,errisy_completer_1.CompleterService])],AutoCompleteField),exports.AutoCompleteField=AutoCompleteField;var ListViewField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g.ClassInfoList=!0,g.template="<div>{{item}}</div>",g.viewMap=new Map,g}return __extends(o,l),Object.defineProperty(o.prototype,"FlexBasis",{get:function(){return this._modelField&&this._modelField.ViewHeight?this._modelField.ViewHeight+"px":"300px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ViewWidth",{get:function(){return this._modelField&&this._modelField.ViewWidth?this._modelField.ViewWidth+"px":"260px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ItemTemplateUrl",{get:function(){return this._modelField&&this._modelField.TemplateUrl?this._modelField.TemplateUrl:void 0},enumerable:!0,configurable:!0}),o}(modelbase_1.FieldViewBase);__decorate([core_1.HostBinding("class.info-list"),__metadata("design:type",Boolean)],ListViewField.prototype,"ClassInfoList",void 0),ListViewField=__decorate([core_1.Component({selector:"[field-listview]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<div class=\"flex-colomn-stretch flex-stretch info-list\" \nstyle=\"display: flex; flex: 1 1 auto; align-items: stretch; flex-direction: column; overflow-x: auto; overflow-y: auto; background-color: white; border: 1px solid #666; flex-grow: 0; flex-shrink: 0;\"\n[style.flex-basis]=\"FlexBasis\" [style.width]=\"ViewWidth\" [listview]=\"Value\" [ItemTemplateUrl]=\"ItemTemplateUrl\" (listviewChange)=\"ngModelChange($event);\" >\n</div>\n"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],ListViewField),exports.ListViewField=ListViewField;var SingleOptionField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),Object.defineProperty(o.prototype,"TitleField",{get:function(){return this._modelField?this._modelField.FieldTitle:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ValueField",{get:function(){return this._modelField?this._modelField.ValueField:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Options",{get:function(){return this._modelField?this._modelField.OptionValues:[]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Color",{get:function(){return this._modelField?this._modelField.OptionColor:void 0},enumerable:!0,configurable:!0}),o}(modelbase_1.FieldViewBase);SingleOptionField=__decorate([core_1.Component({selector:"[field-singleoption]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<div single-group [(Value)]=\"Value\" (ValueChange)=\"ngModelChange($event);Save();\" [Color]=\"Color\" [Options]=\"Options\" [TitleField]=\"TitleField\" [ValueField]=\"ValueField\"></div>\n"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],SingleOptionField),exports.SingleOptionField=SingleOptionField;var MultipleOptionField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),Object.defineProperty(o.prototype,"TitleField",{get:function(){return this._modelField?this._modelField.FieldTitle:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ValueField",{get:function(){return this._modelField?this._modelField.ValueField:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Options",{get:function(){return this._modelField?this._modelField.OptionValues:[]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Color",{get:function(){return this._modelField?this._modelField.OptionColor:void 0},enumerable:!0,configurable:!0}),o}(modelbase_1.FieldViewBase);MultipleOptionField=__decorate([core_1.Component({selector:"[field-multipleoption]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<div multiple-group [(Value)]=\"Value\" (ValueChange)=\"ngModelChange($event);Save();\" [Color]=\"Color\" [Options]=\"Options\" [TitleField]=\"TitleField\" [ValueField]=\"ValueField\"></div>\n"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],MultipleOptionField),exports.MultipleOptionField=MultipleOptionField;var ListViewComponent=function(){function l(o,a,s){this.changeDetectorRef=o,this.iterableDiffers=a,this.compiler=s,this.viewMap=new Map,this.factories=new Map,this.template="<div>{{item}}</div>",this.listviewChange=new core_1.EventEmitter(!0),this.collection=[],this.SelectedItems=[],this.ItemSelected=new core_1.EventEmitter,this.differ=this.iterableDiffers.find(this.collection).create(this.changeDetectorRef)}return l.prototype.compilteTemplate=function(){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:return this.template?[4,this.compiler.Compile(core_1.Component({selector:"dynamic-temp0",template:this.template}),function(){return function(){}}(),http_1.HttpModule,forms_1.FormsModule,platform_browser_2.BrowserModule,ErrisyUIModule)]:[2];case 1:return o=a.sent(),this.factory=o.factory,this.changeDetectorRef.detectChanges(),[2];}})})},Object.defineProperty(l.prototype,"ItemTemplate",{set:function(a){this._ItemTemplate=a,!this._ItemTemplate&&this.factory&&(this.factory=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ItemTemplateUrl",{get:function(){return this._ItemTemplateUrl},set:function(a){var s=this._ItemTemplateUrl!=a;s&&(this._ItemTemplateUrl=a,this.loadTemplate(a))},enumerable:!0,configurable:!0}),l.prototype.loadTemplate=function(o){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(s){switch(s.label){case 0:return a=this,[4,errisy_dynamic_1.NgCompiler.LoadTemplate(o)];case 1:return a.template=s.sent(),[4,this.compilteTemplate()];case 2:return s.sent(),[2];}})})},Object.defineProperty(l.prototype,"ItemTemplateSelector",{set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"listview",{set:function(a){this.collection=a&&Array.isArray(a)?a:[]},enumerable:!0,configurable:!0}),l.prototype.Remove=function(o){this.collection.splice(o,1),this.listviewChange.emit(this.collection)},l.prototype.SelectItem=function(o,a){this.SelectedItem=o,a&&a.ctrlKey?o&&0>this.SelectedItems.indexOf(o)&&this.SelectedItems.push(o):o?this.SelectedItems.splice(0,this.SelectedItems.length,o):this.SelectedItems.splice(0,this.SelectedItems.length),this.ItemSelected&&this.ItemSelected.emit(o)},l.prototype.ngDoCheck=function(){var o=this;if(this.factory&&this.container&&this.differ){var a=this.differ.diff(this.collection);a&&(a.forEachAddedItem(function(s){var u=o.container.createComponent(o.factory);u.instance.Item=s.item,u.instance.Parent=o,u.instance.Index=s.currentIndex,Object.defineProperty(u.instance,"Selected",{get:function(){return o.SelectedItem==s.item}}),Object.defineProperty(u.instance,"MultipleSelected",{get:function(){return o.SelectedItem!=s.item&&0<=o.SelectedItems.indexOf(s.item)}}),o.viewMap.set(s.item,u)}),a.forEachMovedItem(function(s){var u=o.viewMap.get(s.item);u.instance.Index=s.currentIndex}),a.forEachIdentityChange(function(s){var u=o.viewMap.get(s.item);u.instance.Item=s.item,Object.defineProperty(u.instance,"Selected",{get:function(){return o.SelectedItem==s.item}}),Object.defineProperty(u.instance,"MultipleSelected",{get:function(){return o.SelectedItem!=s.item&&0<=o.SelectedItems.indexOf(s.item)}})}),a.forEachRemovedItem(function(s){var u=o.viewMap.get(s.item);o.viewMap.delete(s.item),u.destroy()}))}},l}();__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ListViewComponent.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],ListViewComponent.prototype,"ItemTemplate",null),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],ListViewComponent.prototype,"ItemTemplateUrl",null),__decorate([core_1.Input(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function])],ListViewComponent.prototype,"ItemTemplateSelector",null),__decorate([core_1.Input(),__metadata("design:type",Array),__metadata("design:paramtypes",[Array])],ListViewComponent.prototype,"listview",null),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ListViewComponent.prototype,"listviewChange",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ListViewComponent.prototype,"ItemSelected",void 0),ListViewComponent=__decorate([core_1.Component({selector:"[listview]",template:"<div #container hidden></div>",providers:[errisy_dynamic_1.NgCompiler]}),__metadata("design:paramtypes",[core_1.ChangeDetectorRef,core_1.IterableDiffers,errisy_dynamic_1.NgCompiler])],ListViewComponent),exports.ListViewComponent=ListViewComponent;var TestWrapper=function(){function l(o){this.elementRef=o,console.log("test-wrapper",this.elementRef.nativeElement.innerHTML)}return l.prototype.ngAfterViewInit=function(){console.log("test-wrapper",this.elementRef.nativeElement.innerHTML)},l.prototype.ngAfterContentInit=function(){console.log("test-wrapper",this.elementRef.nativeElement.innerHTML)},l}();TestWrapper=__decorate([core_1.Directive({selector:"[test-wrapper]"}),__metadata("design:paramtypes",[core_1.ElementRef])],TestWrapper),exports.TestWrapper=TestWrapper;var InnerWrapper=function(){function l(o){this.elementRef=o,console.log("inner-wrapper",this.elementRef.nativeElement.innerHTML)}return l.prototype.ngAfterViewInit=function(){console.log("inner-wrapper",this.elementRef.nativeElement.innerHTML)},l.prototype.ngAfterContentInit=function(){console.log("inner-wrapper",this.elementRef.nativeElement.innerHTML)},l}();InnerWrapper=__decorate([core_1.Directive({selector:"[inner-wrapper]"}),__metadata("design:paramtypes",[core_1.ElementRef])],InnerWrapper),exports.InnerWrapper=InnerWrapper;var ItemsControl=function(){function l(o,a,s){this.changeDetectorRef=o,this.iterableDiffers=a,this.compiler=s,this.ClassInfoList=!0,this.factories=new Map,this.template="<div>{{item}}</div>",this.viewMap=new Map}return l.prototype.ngAfterContentInit=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return[4,this.compilteTemplate()];case 1:return o.sent(),[2];}})})},l.prototype.compilteTemplate=function(){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:return this.template?[4,this.compiler.Compile(core_1.Component({selector:"dynamic-temp0",template:this.template}),function(){return function(){}}(),http_1.HttpModule,forms_1.FormsModule,platform_browser_2.BrowserModule,ErrisyUIModule)]:[2];case 1:return o=a.sent(),this.factory=o.factory,this.collection&&Array.isArray(this.collection)?[4,this.buildNewView()]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2];}})})},Object.defineProperty(l.prototype,"ItemTemplate",{set:function(a){this._ItemTemplate=a,!this._ItemTemplate&&this.factory&&(this.factory=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ItemTemplateUrl",{get:function(){return this._ItemTemplateUrl},set:function(a){this._ItemTemplateUrl=a;var s=this;errisy_dynamic_1.NgCompiler.LoadTemplate(this._ItemTemplateUrl).then(function(u){s.template=u,s.compilteTemplate()},function(u){console.error("failed to load template url: ",s._ItemTemplateUrl,u)})},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ItemTemplateSelector",{set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ItemsSource",{set:function(a){this.collection=a,a&&!this.differ&&(this.differ=this.iterableDiffers.find(a).create(this.changeDetectorRef))},enumerable:!0,configurable:!0}),l.prototype.Remove=function(o){this.collection.splice(o,1)},l.prototype.buildNewView=function(){return __awaiter(this,void 0,void 0,function(){var a,o=this;return __generator(this,function(){return this.viewMap.forEach(function(u){return u.destroy()}),this.viewMap.clear(),this.collection&&"object"==_typeof(this.collection)&&Array.isArray(this.collection)&&(a=this.collection,a.forEach(function(u,g){var h=o.container.createComponent(o.factory);h.instance.Item=u,h.instance.Parent=o,h.instance.Index=g,o.viewMap.set(u,h)})),[2]})})},l.prototype.ngDoCheck=function(){return __awaiter(this,void 0,void 0,function(){var a,o=this;return __generator(this,function(){return this.factory&&this.container?(this.differ&&(a=this.differ.diff(this.collection),a&&(a.forEachAddedItem(function(u){var g=o.container.createComponent(o.factory);g.instance.Item=u.item,g.instance.Parent=o,g.instance.Index=u.currentIndex,o.viewMap.set(u.item,g)}),a.forEachMovedItem(function(u){var g=o.viewMap.get(u.item);g.instance.Index=u.currentIndex}),a.forEachIdentityChange(function(u){var g=o.viewMap.get(u.item);g.instance.Item=u.item}),a.forEachRemovedItem(function(u){var g=o.viewMap.get(u.item);o.viewMap.delete(u.item),g.destroy()}))),[2]):[2]})})},l}();__decorate([core_1.HostBinding("class.info-list"),__metadata("design:type",Boolean)],ItemsControl.prototype,"ClassInfoList",void 0),__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ItemsControl.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],ItemsControl.prototype,"ItemTemplate",null),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],ItemsControl.prototype,"ItemTemplateUrl",null),__decorate([core_1.Input(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function])],ItemsControl.prototype,"ItemTemplateSelector",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],ItemsControl.prototype,"ItemsSource",null),ItemsControl=__decorate([core_1.Component({selector:"[ItemsSource]",template:"\n<div style=\"color: #333; font-size: 24px; flex: 0 0 32px;\" class=\"flex-row-stretch flex-center\">\n    <div class=\"flex-row-center flex-center flex-stretch\">\n        {{Title}}\n    </div>\n</div>\n<div class=\"flex-column-stretch flex-stretch autoscroll-y\" style=\"background-color: white; border: 1px solid #666;\">\n    <div #container hidden></div>\n</div>\n<div>\n    Page:<div *ngFor=\"let page\"></div>\n</div>\n",providers:[errisy_dynamic_1.NgCompiler]}),__metadata("design:paramtypes",[core_1.ChangeDetectorRef,core_1.IterableDiffers,errisy_dynamic_1.NgCompiler])],ItemsControl),exports.ItemsControl=ItemsControl;var ContentComponent=ContentComponent_1=function(){function l(o,a){this.changeDetectorRef=o,this.compiler=a,this.ItemChange=new core_1.EventEmitter(!0),this._Modules=[]}return Object.defineProperty(l.prototype,"TemplateUrl",{get:function(){return this._TemplateUrl},set:function(a){this._TemplateUrl!=a&&(this._TemplateUrl=a,this.loadTemplate())},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"Modules",{set:function(a){this._Modules=Array.isArray(a)?a:[]},enumerable:!0,configurable:!0}),l.prototype.loadTemplate=function(){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:return o=this,[4,errisy_dynamic_1.NgCompiler.LoadTemplate(this._TemplateUrl)];case 1:return o.Template=a.sent(),[2];}})})},Object.defineProperty(l.prototype,"Template",{get:function(){return this._Template},set:function(a){this._Template!=a&&(this._Template=a,this.compileTemplate())},enumerable:!0,configurable:!0}),l.prototype.compileTemplate=function(){return __awaiter(this,void 0,void 0,function(){var o,a;return __generator(this,function(s){switch(s.label){case 0:return this._Template?(ContentComponent_1.templateCount+=1,[4,(a=this.compiler).Compile.apply(a,[core_1.Component({selector:"content-template-"+ContentComponent_1.templateCount,template:this._Template}),function(){return function(){}}(),http_1.HttpModule,forms_1.FormsModule,platform_browser_2.BrowserModule,ErrisyUIModule].concat(this._Modules))]):[2];case 1:return o=s.sent(),this.factory=o.factory,this.createInstance(),[2];}})})},l.prototype.ngAfterContentInit=function(){this.createInstance()},l.prototype.createInstance=function(){var o=this;this.container&&this.factory&&(this.component&&this.component.destroy(),this.component=this.container.createComponent(this.factory),Object.defineProperty(this.component.instance,"Item",{get:function(){return o.Item}}),Object.defineProperty(this.component.instance,"Event",{get:function(){return o.Event}}),Object.defineProperty(this.component.instance,"ItemChange",{get:function(){return function(s){return o.ItemChange.emit(s)}}}))},l}();ContentComponent.templateCount=0,__decorate([core_1.Input(),__metadata("design:type",Object)],ContentComponent.prototype,"Item",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],ContentComponent.prototype,"ItemChange",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],ContentComponent.prototype,"Event",void 0),__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],ContentComponent.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],ContentComponent.prototype,"TemplateUrl",null),__decorate([core_1.Input(),__metadata("design:type",Array),__metadata("design:paramtypes",[Array])],ContentComponent.prototype,"Modules",null),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],ContentComponent.prototype,"Template",null),ContentComponent=ContentComponent_1=__decorate([core_1.Component({selector:"content-control,[content-control]",template:"<div #container hidden></div>",providers:[errisy_dynamic_1.NgCompiler]}),__metadata("design:paramtypes",[core_1.ChangeDetectorRef,errisy_dynamic_1.NgCompiler])],ContentComponent),exports.ContentComponent=ContentComponent;var ContentField=function(l){function o(a,s,u){var g=l.call(this,a,s,u)||this;return g.renderer=a,g.parent=s,g.changeDetectorRef=u,g}return __extends(o,l),Object.defineProperty(o.prototype,"ContextObject",{get:function(){return this._modelField?this._modelField.ContextObject?this._modelField.ContextObject:this.Value:void 0},set:function(s){this._modelField&&(this.Value=s)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"EventObject",{get:function(){return this._modelField?this._modelField?this._modelField.EventObject:void 0:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"TemplateUrl",{get:function(){return this._modelField?this._modelField.TemplateUrl:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"Modules",{get:function(){return this._modelField?this._modelField.Modules:void 0},enumerable:!0,configurable:!0}),o}(modelbase_1.FieldViewBase);ContentField=__decorate([core_1.Component({selector:"[content-field]",template:"\n<div>\n    <span>{{Title}}</span>\n    <span class=\"info-status\">{{Status}}</span>\n</div>\n<div content-control [Modules]=\"Modules\" style=\"background-color: white; border: 1px solid black; border-radius: 6px; padding: 4px;\" [(Item)]=\"ContextObject\" [Event]=\"EventObject\" [TemplateUrl]=\"TemplateUrl\"></div>\n"}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef])],ContentField),exports.ContentField=ContentField;var DataGridComponent=function(){function l(o,a,s){var u=this;this.changeDetectorRef=o,this.iterableDiffers=a,this.compiler=s,this.onAddClick=function(){return __awaiter(u,void 0,void 0,function(){return __generator(this,function(g){switch(g.label){case 0:return[4,this.create()];case 1:return g.sent(),[2];}})})},this.ItemSelected=new core_1.EventEmitter,this.CanCreate=!1,this.CanDelete=!1,this.ItemsPerPage=50,this.Skip=0,this.currentFilter={},this.ClassInfoList=!0,this.factories=new Map,this.template="<div>{{item}}</div>",this.viewMap=new Map,this.SelectedItems=[]}return l.prototype.ngAfterContentInit=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.compileTemplate(),[2]})})},l.prototype.SelectItem=function(o,a){this.SelectedItem=o,a&&a.ctrlKey?o&&0>this.SelectedItems.indexOf(o)&&this.SelectedItems.push(o):o?this.SelectedItems.splice(0,this.SelectedItems.length,o):this.SelectedItems.splice(0,this.SelectedItems.length),this.ItemSelected&&this.ItemSelected.emit(o)},Object.defineProperty(l.prototype,"DataGrid",{get:function(){return this.DataSource},set:function(a){this.DataSource=a,this.initialize()},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"QueryFields",{set:function(a){this.queryFields=a.split(",")},enumerable:!0,configurable:!0}),l.prototype.queryKeyDown=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return"Enter"==o.key?[4,this.search()]:[3,2];case 1:a.sent(),a.label=2;case 2:return console.log("querykeydown"),[2];}})})},l.prototype.search=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return this.currentFilter=UIQuery.RegEx(this.queryFields,this.query||""),[4,this.refresh()];case 1:return o.sent(),console.log("datagrid.search"),[2];}})})},l.prototype.initialize=function(){return __awaiter(this,void 0,void 0,function(){var o,a;return __generator(this,function(s){switch(s.label){case 0:return this.DataSource?(o=this,[4,this.DataSource.count({})]):[2];case 1:if(o.Count=s.sent(),this.Pages=[],"number"==typeof this.Count)for(a=0;a*this.ItemsPerPage<this.Count;a++)this.Pages.push({Skip:a*this.ItemsPerPage,Label:a+""});return 0<this.Pages.length?this.selectPage(this.Pages[0]):this.ItemsSource=[],[2];}})})},l.prototype.refresh=function(){return __awaiter(this,void 0,void 0,function(){var o,a;return __generator(this,function(s){switch(s.label){case 0:return this.DataSource?(o=this,[4,this.DataSource.count(this.currentFilter)]):[2];case 1:if(o.Count=s.sent(),this.Pages=[],"number"==typeof this.Count)for(a=0;a*this.ItemsPerPage<this.Count;a++)this.Pages.push({Skip:a*this.ItemsPerPage,Label:a+""});return 0<this.Pages.length?this.selectPage(this.Pages[0]):this.ItemsSource=[],this.SelectItem(void 0),[2];}})})},l.prototype.setSkip=function(o){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(s){switch(s.label){case 0:return(this.Skip=o,!this.DataSource)?[2]:(a=this,[4,this.DataSource.search(this.currentFilter,this.Skip,this.ItemsPerPage)]);case 1:a.ItemsSource=s.sent();try{this.changeDetectorRef.detectChanges()}catch(u){}return[2];}})})},l.prototype.deleteSelected=function(){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:return this.SelectedItems&&0!=this.SelectedItems.length?(o=this.SelectedItems.map(function(s){return s._id}),[4,this.DataSource.delete({_id:{$in:o}})]):[2];case 1:return a.sent(),[4,this.refresh()];case 2:return a.sent(),this.SelectItem(void 0),[2];}})})},l.prototype.delete=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return this.DataSource?[4,this.DataSource.delete({_id:o._id})]:[2];case 1:return a.sent(),[4,this.refresh()];case 2:return a.sent(),[2];}})})},l.prototype.insert=function(o){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(s){switch(s.label){case 0:return this.DataSource?(a=o,[4,this.DataSource.insert(o)]):[2];case 1:return a._id=s.sent(),[4,this.refresh()];case 2:return s.sent(),[2];}})})},l.prototype.update=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return this.DataSource&&o&&void 0!=o._id&&null!=o._id?[4,this.DataSource.update(o)]:[2];case 1:return a.sent(),[2];}})})},l.prototype.create=function(){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:return this.DataSource?[4,this.DataSource.create()]:[2];case 1:return o=a.sent(),this.ItemsSource.splice(0,0,o),this.SelectItem(o),[2];}})})},l.prototype.compileTemplate=function(){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:return this.template?[4,this.compiler.Compile(core_1.Component({selector:"dynamic-temp0",template:this.template}),function(){return function(){}}(),http_1.HttpModule,forms_1.FormsModule,platform_browser_2.BrowserModule,ErrisyUIModule)]:[2];case 1:return o=a.sent(),this.factory=o.factory,this.collection&&Array.isArray(this.collection)?[4,this.buildNewView()]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2];}})})},l.prototype.selectPage=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return this.selectedPage=o,[4,this.setSkip(o.Skip)];case 1:return a.sent(),[2];}})})},Object.defineProperty(l.prototype,"ItemTemplate",{set:function(a){this._ItemTemplate=a,!this._ItemTemplate&&this.factory&&(this.factory=void 0),console.log("itemtemplate",this._ItemTemplate)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ItemTemplateUrl",{get:function(){return this._ItemTemplateUrl},set:function(a){this._ItemTemplateUrl!=a;this._ItemTemplateUrl=a,this.loadTemplate(a)},enumerable:!0,configurable:!0}),l.prototype.loadTemplate=function(o){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(s){switch(s.label){case 0:return a=this,[4,errisy_dynamic_1.NgCompiler.LoadTemplate(o)];case 1:return a.template=s.sent(),[4,this.compileTemplate()];case 2:return s.sent(),[2];}})})},Object.defineProperty(l.prototype,"ItemTemplateSelector",{set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"ItemsSource",{get:function(){return this.collection},set:function(a){this.collection=a,a&&!this.differ&&(this.differ=this.iterableDiffers.find(a).create(this.changeDetectorRef))},enumerable:!0,configurable:!0}),l.prototype.Remove=function(o){this.collection.splice(o,1)},l.prototype.buildNewView=function(){return __awaiter(this,void 0,void 0,function(){var a,o=this;return __generator(this,function(){return this.viewMap.forEach(function(u){return u.destroy()}),this.viewMap.clear(),this.collection&&"object"==_typeof(this.collection)&&Array.isArray(this.collection)&&(a=this.collection,a.forEach(function(u,g){var h=o.container.createComponent(o.factory);h.instance.Item=u,h.instance.Parent=o,h.instance.Index=g,o.viewMap.set(u,h)})),[2]})})},l.prototype.ngDoCheck=function(){return __awaiter(this,void 0,void 0,function(){var a,o=this;return __generator(this,function(){return this.factory&&this.container?(this.differ&&(a=this.differ.diff(this.collection),a&&(a.forEachAddedItem(function(u){var g=o.container.createComponent(o.factory);g.instance.Item=u.item,g.instance.Parent=o,g.instance.Index=u.currentIndex,Object.defineProperty(g.instance,"Selected",{get:function(){return o.SelectedItem==u.item}}),Object.defineProperty(g.instance,"MultipleSelected",{get:function(){return o.SelectedItem!=u.item&&0<=o.SelectedItems.indexOf(u.item)}}),o.viewMap.set(u.item,g)}),a.forEachMovedItem(function(u){var g=o.viewMap.get(u.item);g.instance.Index=u.currentIndex}),a.forEachIdentityChange(function(u){var g=o.viewMap.get(u.item);g.instance.Item=u.item,Object.defineProperty(g.instance,"Selected",{get:function(){return o.SelectedItem==u.item}}),Object.defineProperty(g.instance,"MultipleSelected",{get:function(){return o.SelectedItem!=u.item&&0<=o.SelectedItems.indexOf(u.item)}})}),a.forEachRemovedItem(function(u){var g=o.viewMap.get(u.item);o.viewMap.delete(u.item),g.destroy()}))),[2]):[2]})})},l}();__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],DataGridComponent.prototype,"ItemSelected",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],DataGridComponent.prototype,"DataGrid",null),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],DataGridComponent.prototype,"QueryFields",null),__decorate([core_1.Input(),__metadata("design:type",Boolean)],DataGridComponent.prototype,"CanCreate",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],DataGridComponent.prototype,"CanDelete",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],DataGridComponent.prototype,"Title",void 0),__decorate([core_1.HostBinding("class.info-list"),__metadata("design:type",Boolean)],DataGridComponent.prototype,"ClassInfoList",void 0),__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],DataGridComponent.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],DataGridComponent.prototype,"ItemTemplate",null),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],DataGridComponent.prototype,"ItemTemplateUrl",null),__decorate([core_1.Input(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function])],DataGridComponent.prototype,"ItemTemplateSelector",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],DataGridComponent.prototype,"ItemsSource",null),DataGridComponent=__decorate([core_1.Component({selector:"[DataGrid]",template:"\n<div style=\"color: #333; font-size: 24px; flex: 0 0 32px;\" class=\"flex-row-stretch flex-center\">\n    <div class=\"flex-row-center flex-center flex-stretch\">\n        {{Title}}\n    </div>\n</div>\n<div style=\"display:flex; flex-direction: row; justify-content: stretch; flex: 0 0 24px;\">\n    <input style=\"display: flex; flex: 1 1 auto; min-width: 0px;\" type=\"text\" [(ngModel)]=\"query\" (keydown)=\"queryKeyDown($event);\"/>\n    <svg style=\"display: flex; flex: 0 0 24px;\" height=\"24\" btn-search (click)=\"search();\"></svg>\n    <svg *ngIf=\"CanCreate\" style=\"display: flex; flex: 0 0 24px;\" height=\"24\" btn-create (click)=\"onAddClick();\"></svg>\n    <svg *ngIf=\"CanDelete\" style=\"display: flex; flex: 0 0 24px;\" height=\"24\" btn-delete (click)=\"deleteSelected();\"></svg>\n</div>\n<div style=\"display: flex; flex: 1 1 auto; align-items: stretch; flex-direction: column; overflow-y: auto; background-color: white; border: 1px solid #666;\">\n    <div #container hidden></div>\n</div>\n<div style=\"display: flex; flex: 0 0 auto; flex-direction: row; font-size: 14px; padding: 2px;\">\n    <div style=\"flex: 0 0 auto;\">Page:</div>\n    <div style=\"flex: 1 1 auto; display: flex; flex-direction: row;\">\n        <div *ngFor=\"let page of Pages\" class=\"datagrid-page\" [class.datagrid-page-checked]=\"page==selectedPage\" (click)=\"selectPage(page);\">{{page.Label}}</div>\n    </div>\n    <div style=\"flex: 0 0 auto; color: black;\">({{Count}})</div>\n</div>\n",providers:[errisy_dynamic_1.NgCompiler]}),__metadata("design:paramtypes",[core_1.ChangeDetectorRef,core_1.IterableDiffers,errisy_dynamic_1.NgCompiler])],DataGridComponent),exports.DataGridComponent=DataGridComponent;var RelationField=function(l){function o(a,s,u,g,h){var C=l.call(this,a,s,u)||this;return C.renderer=a,C.parent=s,C.changeDetectorRef=u,C.iterableDiffers=g,C.compiler=h,C.ItemSelected=new core_1.EventEmitter,C.CanCreate=!1,C.CanDelete=!1,C.ItemsPerPage=50,C.Skip=0,C.currentFilter={},C.factories=new Map,C.template="<div>{{item}}</div>",C.viewMap=new Map,C.SelectedItems=[],C}return __extends(o,l),o.prototype.ngAfterContentInit=function(){return __awaiter(this,void 0,void 0,function(){var a=this;return __generator(this,function(s){switch(s.label){case 0:return this.SourceGrid.onAddClick=function(){return __awaiter(a,void 0,void 0,function(){return __generator(this,function(u){switch(u.label){case 0:return[4,this.addSelected()];case 1:return u.sent(),[2];}})})},this.CanDelete=!0,[4,this.loadTemplate(this.ItemTemplateUrl)];case 1:return s.sent(),[2];}})})},Object.defineProperty(o.prototype,"FlexBasis",{get:function(){return this._modelField&&this._modelField.ViewHeight?this._modelField.ViewHeight+"px":"300px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ViewWidth",{get:function(){return this._modelField&&this._modelField.ViewWidth?this._modelField.ViewWidth+"px":"260px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"TotalWidth",{get:function(){return this._modelField&&this._modelField.ViewWidth?2*this._modelField.ViewWidth+"px":"520px"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"TotalNumber",{get:function(){var s=this.Value;return s&&Array.isArray(s)?s.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"FieldTitle",{get:function(){return this._modelField&&this._modelField.FieldTitle?this._modelField.FieldTitle:""},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"SourceTitle",{get:function(){return this._modelField&&this._modelField.SourceTitle?this._modelField.SourceTitle:""},enumerable:!0,configurable:!0}),o.prototype.SelectItem=function(a,s){this.SelectedItem=a,s&&s.ctrlKey?a&&0>this.SelectedItems.indexOf(a)&&this.SelectedItems.push(a):a?this.SelectedItems.splice(0,this.SelectedItems.length,a):this.SelectedItems.splice(0,this.SelectedItems.length),this.ItemSelected&&this.ItemSelected.emit(a)},Object.defineProperty(o.prototype,"RelationDataSource",{get:function(){return this._modelField&&this._modelField.RelationDataSource?this._modelField.RelationDataSource:void 0},set:function(s){this._modelField&&(this._modelField.RelationDataSource=s,this.initialize())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"QueryFields",{get:function(){return this._modelField&&this._modelField.QueryFields?(this.queryFields=this._modelField.QueryFields.split(","),this._modelField.QueryFields):""},set:function(s){this._modelField&&(this._modelField.QueryFields=s),this.queryFields=s.split(",")},enumerable:!0,configurable:!0}),o.prototype.queryKeyDown=function(a){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){switch(s.label){case 0:return"Enter"==a.key?[4,this.search()]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2];}})})},o.prototype.search=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return this.currentFilter=UIQuery.RegEx(this.queryFields,this.query||""),console.log("search filter: ",this.currentFilter),[4,this.refresh()];case 1:return a.sent(),[2];}})})},o.prototype.initialize=function(){return __awaiter(this,void 0,void 0,function(){var a,s,u;return __generator(this,function(g){switch(g.label){case 0:return this.RelationDataSource?(a=this.Value,!(a&&Array.isArray(a)))?[3,2]:(s=this,[4,this.RelationDataSource.count({$and:[{_id:{$in:this.Value}},this.currentFilter]})]):[2];case 1:return s.Count=g.sent(),[3,3];case 2:this.Count=void 0,g.label=3;case 3:if(this.Pages=[],"number"==typeof this.Count)for(u=0;u*this.ItemsPerPage<this.Count;u++)this.Pages.push({Skip:u*this.ItemsPerPage,Label:u+""});return 0<this.Pages.length?this.selectPage(this.Pages[0]):this.ItemsSource=[],[2];}})})},o.prototype.refresh=function(){return __awaiter(this,void 0,void 0,function(){var a,s,u;return __generator(this,function(g){switch(g.label){case 0:return this.RelationDataSource?(a=this.Value,!(a&&Array.isArray(a)))?[3,2]:(s=this,[4,this.RelationDataSource.count({$and:[{_id:{$in:a}},this.currentFilter]})]):[2];case 1:return s.Count=g.sent(),[3,3];case 2:this.Count=void 0,g.label=3;case 3:if(this.Pages=[],"number"==typeof this.Count)for(u=0;u*this.ItemsPerPage<this.Count;u++)this.Pages.push({Skip:u*this.ItemsPerPage,Label:u+""});return 0<this.Pages.length?this.selectPage(this.Pages[0]):this.ItemsSource=[],this.SelectItem(void 0),[2];}})})},o.prototype.setSkip=function(a){return __awaiter(this,void 0,void 0,function(){var s,u;return __generator(this,function(g){switch(g.label){case 0:return(this.Skip=a,!this.RelationDataSource)?[2]:(s=this.Value,!(s&&Array.isArray(s)))?[3,2]:(u=this,[4,this.RelationDataSource.search({$and:[{_id:{$in:s}},this.currentFilter]},a,this.ItemsPerPage)]);case 1:return u.ItemsSource=g.sent(),[3,3];case 2:this.ItemsSource=[],g.label=3;case 3:try{this.changeDetectorRef.detectChanges()}catch(h){}return[2];}})})},o.prototype.addAll=function(){return __awaiter(this,void 0,void 0,function(){var a,s;return __generator(this,function(u){switch(u.label){case 0:return a=this.Value,[4,this.RelationDataSource.all()];case 1:return s=u.sent(),a&&Array.isArray(a)?a.splice.apply(a,[0,a.length].concat(s)):this.Value=s,[2];}})})},o.prototype.removeAll=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(){return a=this.Value,a&&Array.isArray(a)?a.splice(0,a.length):this.Value=[],[2]})})},o.prototype.addSelected=function(){return __awaiter(this,void 0,void 0,function(){var a,s;return __generator(this,function(){return a=this.Value,s=this.SourceGrid.SelectedItems.map(function(g){return g._id}),a&&Array.isArray(a)?s.forEach(function(g){0>a.indexOf(g)&&a.push(g)}):this.Value=s,[2]})})},o.prototype.AddAll=function(){return __awaiter(this,void 0,void 0,function(){var a,s;return __generator(this,function(u){switch(u.label){case 0:return a=this.Value,[4,this.RelationDataSource.all()];case 1:return s=u.sent(),a&&Array.isArray(a)?s.forEach(function(g){0>a.indexOf(g)&&a.push(g)}):this.Value=s,[2];}})})},o.prototype.RemoveAll=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(){return a=this.Value,a&&Array.isArray(a)?a.splice(0,a.length):this.Value=[],[2]})})},o.prototype.removeSelected=function(){return __awaiter(this,void 0,void 0,function(){var a,s;return __generator(this,function(){return a=this.Value,s=this.SelectedItems.map(function(g){return g._id}),a&&Array.isArray(a)?s.forEach(function(g){var h=a.indexOf(g);0<=h&&a.splice(h,1)}):this.Value=s,[2]})})},o.prototype.fetch=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(u){switch(u.label){case 0:return this.RelationDataSource?[4,this.RelationDataSource.fetch(a)]:[2];case 1:return[2,u.sent()];}})})},o.prototype.create=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(s){switch(s.label){case 0:return this.RelationDataSource?[4,this.RelationDataSource.create()]:[2];case 1:return a=s.sent(),this.ItemsSource.splice(0,0,a),this.SelectItem(a),[2];}})})},o.prototype.compilteTemplate=function(){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(s){switch(s.label){case 0:return this.template?[4,this.compiler.Compile(core_1.Component({selector:"dynamic-temp0",template:this.template}),function(){return function(){}}(),http_1.HttpModule,forms_1.FormsModule,platform_browser_2.BrowserModule,ErrisyUIModule)]:[2];case 1:return a=s.sent(),this.factory=a.factory,this.collection&&Array.isArray(this.collection)?[4,this.buildNewView()]:[3,3];case 2:s.sent(),s.label=3;case 3:return[2];}})})},o.prototype.selectPage=function(a){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){switch(s.label){case 0:return this.selectedPage=a,[4,this.setSkip(a.Skip)];case 1:return s.sent(),[2];}})})},Object.defineProperty(o.prototype,"ItemTemplate",{set:function(s){this._ItemTemplate=s,!this._ItemTemplate&&this.factory&&(this.factory=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ItemTemplateUrl",{get:function(){if(this._modelField&&this._modelField.TemplateUrl)return this._modelField.TemplateUrl},set:function(s){var u=!1;this._modelField&&this._modelField.TemplateUrl&&(u=this._modelField.TemplateUrl!=s,this._modelField.TemplateUrl=s),u&&this.loadTemplate(s)},enumerable:!0,configurable:!0}),o.prototype.loadTemplate=function(a){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(u){switch(u.label){case 0:return s=this,[4,errisy_dynamic_1.NgCompiler.LoadTemplate(a)];case 1:return s.template=u.sent(),[4,this.compilteTemplate()];case 2:return u.sent(),[2];}})})},Object.defineProperty(o.prototype,"ItemTemplateSelector",{set:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ItemsSource",{get:function(){return this.collection},set:function(s){this.collection=s,s&&!this.differ&&(this.differ=this.iterableDiffers.find(s).create(this.changeDetectorRef))},enumerable:!0,configurable:!0}),o.prototype.Remove=function(a){this.collection.splice(a,1)},o.prototype.buildNewView=function(){return __awaiter(this,void 0,void 0,function(){var s,a=this;return __generator(this,function(){return this.viewMap.forEach(function(g){return g.destroy()}),this.viewMap.clear(),this.collection&&"object"==_typeof(this.collection)&&Array.isArray(this.collection)&&(s=this.collection,s.forEach(function(g,h){var C=a.container.createComponent(a.factory);C.instance.Item=g,C.instance.Parent=a,C.instance.Index=h,a.viewMap.set(g,C)})),[2]})})},o.prototype.ngDoCheck=function(){return __awaiter(this,void 0,void 0,function(){var s,u,a=this;return __generator(this,function(g){switch(g.label){case 0:return s=this.Value,this.CurrentValue==s?s&&Array.isArray(s)?this.ValueDiffer.diff(s)?[4,this.refresh()]:[3,2]:[3,3]:[3,6];case 1:g.sent(),g.label=2;case 2:return[3,5];case 3:return this.ItemsSource&&Array.isArray(this.ItemsSource)&&0<this.ItemsSource.length?[4,this.refresh()]:[3,5];case 4:g.sent(),g.label=5;case 5:return[3,10];case 6:return(this.CurrentValue=s,!(s&&Array.isArray(s)))?[3,8]:(this.ValueDiffer=this.iterableDiffers.find(this.CurrentValue).create(this.changeDetectorRef),[4,this.refresh()]);case 7:return g.sent(),[3,10];case 8:return this.ItemsSource&&Array.isArray(this.ItemsSource)&&0<this.ItemsSource.length?[4,this.refresh()]:[3,10];case 9:g.sent(),g.label=10;case 10:return this.factory&&this.container?(this.differ&&(u=this.differ.diff(this.collection),u&&(u.forEachAddedItem(function(h){var C=a.container.createComponent(a.factory);C.instance.Item=h.item,C.instance.Parent=a,C.instance.Index=h.currentIndex,Object.defineProperty(C.instance,"Selected",{get:function(){return a.SelectedItem==h.item}}),Object.defineProperty(C.instance,"MultipleSelected",{get:function(){return a.SelectedItem!=h.item&&0<=a.SelectedItems.indexOf(h.item)}}),a.viewMap.set(h.item,C)}),u.forEachMovedItem(function(h){var C=a.viewMap.get(h.item);C.instance.Index=h.currentIndex}),u.forEachIdentityChange(function(h){var C=a.viewMap.get(h.item);C.instance.Item=h.item,Object.defineProperty(C.instance,"Selected",{get:function(){return a.SelectedItem==h.item}}),Object.defineProperty(C.instance,"MultipleSelected",{get:function(){return a.SelectedItem!=h.item&&0<=a.SelectedItems.indexOf(h.item)}})}),u.forEachRemovedItem(function(h){var C=a.viewMap.get(h.item);a.viewMap.delete(h.item),C.destroy()}))),[2]):[2];}})})},o}(modelbase_1.FieldViewBase);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],RelationField.prototype,"ItemSelected",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],RelationField.prototype,"RelationDataSource",null),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],RelationField.prototype,"QueryFields",null),__decorate([core_1.Input(),__metadata("design:type",Boolean)],RelationField.prototype,"CanCreate",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],RelationField.prototype,"CanDelete",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],RelationField.prototype,"Title",void 0),__decorate([core_1.ViewChild("source"),__metadata("design:type",DataGridComponent)],RelationField.prototype,"SourceGrid",void 0),__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],RelationField.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],RelationField.prototype,"ItemTemplate",null),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],RelationField.prototype,"ItemTemplateUrl",null),__decorate([core_1.Input(),__metadata("design:type",Function),__metadata("design:paramtypes",[Function])],RelationField.prototype,"ItemTemplateSelector",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],RelationField.prototype,"ItemsSource",null),RelationField=__decorate([core_1.Component({selector:"[relation-field]",template:"\n<div>\n    {{Title}}\n</div>\n<div style=\"display: flex; flex-direction: row; flex: 0 0 24px; align-self: stretch; font-weight: normal; font-size: 18px; color: blue;\">\n    <div style=\"flex: 1 1 auto;\">{{TotalNumber}}</div>\n    <svg style=\"flex: 0 0 24px;\" height=\"24\" btn-all (click)=\"AddAll();\"></svg>\n    <svg style=\"flex: 0 0 24px;\" height=\"24\" btn-remove (click)=\"RemoveAll();\"></svg>\n</div>\n<div class=\"flex-row-stretch flex-stretch relation-view\" style=\"font-family: Arial; font-weight: normal; flex-grow: 0; flex-shrink: 0;\" [style.flex-basis]=\"FlexBasis\" [style.width]=\"TotalWidth\">\n    <div #source [DataGrid]=\"RelationDataSource\" [QueryFields]=\"QueryFields\" CanCreate=\"true\" [Title]=\"SourceTitle\" [ItemTemplateUrl]=\"ItemTemplateUrl\" \n        style=\"flex-shrink: 0; flex-grow: 0;\" [style.flex-basis]=\"ViewWidth\" [style.width]=\"ViewWidth\">\n    </div>\n    <div class=\"flex-colomn-stretch flex-stretch info-list\" \n        style=\"flex-shrink: 0; flex-grow: 0;\" [style.flex-basis]=\"ViewWidth\" [style.width]=\"ViewWidth\">\n        <!--this is the local list-->\n        <div style=\"color: #333; font-size: 24px; flex: 0 0 32px;\" class=\"flex-row-stretch flex-center\">\n            <div class=\"flex-row-center flex-center flex-stretch\">\n                {{FieldTitle}}\n            </div>\n        </div>\n        <div style=\"display:flex; flex-direction: row; align-items:stretch; flex: 0 0 24px;\">\n            <input style=\"display: flex; flex: 1 1 auto; min-width: 0px;\" type=\"text\" [(ngModel)]=\"query\" (keydown)=\"queryKeyDown($event);\" />\n            <svg style=\"display: flex; flex: 0 0 24px;\" height=\"24\" btn-search (click)=\"search();\"></svg>\n            <svg *ngIf=\"CanCreate\" style=\"display: flex; flex: 0 0 24px;\" height=\"24\" btn-create (click)=\"create();\"></svg>\n            <svg *ngIf=\"CanDelete\" style=\"display: flex; flex: 0 0 24px;\" height=\"24\" btn-delete (click)=\"removeSelected();\"></svg>\n        </div>\n        <div style=\"display: flex; flex: 1 1 auto; align-items: stretch; flex-direction: column; overflow-x: auto; overflow-y: auto; background-color: white; border: 1px solid #666;\">\n            <div #container hidden></div>\n        </div>\n        <div style=\"display: flex; flex: 0 0 auto; flex-direction: row; font-size: 14px; padding: 2px;\">\n            <div style=\"flex: 0 0 auto;\">Page:</div>\n            <div style=\"flex: 1 1 auto; display: flex; flex-direction: row;\">\n                <div *ngFor=\"let page of Pages\" class=\"datagrid-page\" [class.datagrid-page-checked]=\"page==selectedPage\" (click)=\"selectPage(page);\">{{page.Label}}</div>\n            </div>\n            <div style=\"flex: 0 0 auto; color: black;\">({{Count}})</div>\n        </div>\n    </div>\n</div>\n",providers:[errisy_dynamic_1.NgCompiler]}),__metadata("design:paramtypes",[core_1.Renderer,InfoRowControl,core_1.ChangeDetectorRef,core_1.IterableDiffers,errisy_dynamic_1.NgCompiler])],RelationField),exports.RelationField=RelationField;var SpanEditor=function(){function l(o){this.elementRef=o,this.editorChange=new core_1.EventEmitter,this.span=this.elementRef.nativeElement,this.span.setAttribute("contenteditable","true")}return Object.defineProperty(l.prototype,"editor",{get:function(){return this.value},set:function(a){if(this.value!=a){this.value=a,null==this.value||void 0==this.value?this.value="":"string"!=typeof this.value&&(this.value+=""),this.span.innerHTML=util.escapeHTML(this.value);document}},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"type",{set:function(a){a&&(this.keyFilter="l"===a?function(s){if(s.key)/^([a-z0-9]|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(s.key)||s.preventDefault();else if(s.keyCode){var u=s.keyCode;45==u||47<u&&58>u||65<u&&91>u||96<u&&123>u||8==u||s.preventDefault()}}:"n"===a?function(s){if(s.key)/^(\d|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(s.key)||s.preventDefault();else if(s.keyCode){var u=s.keyCode;45==u||47<u&&58>u||65<u&&91>u||96<u&&123>u||8==u||s.preventDefault()}}:"z"===a?function(s){if(s.key)/^(\d|\-|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(s.key)||s.preventDefault();else if(s.keyCode){var u=s.keyCode;45==u||47<u&&58>u||8==u||s.preventDefault()}}:"r"===a?function(s){if(s.key)/^(\d|\-|\.|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(s.key)||s.preventDefault();else if(s.keyCode){var u=s.keyCode;45==u||47<u&&58>u||46==u||8==u||s.preventDefault()}}:void 0)},enumerable:!0,configurable:!0}),l.prototype.onKeydown=function(o){this.keyFilter&&this.keyFilter(o)},l.prototype.onKeyup=function(){var o=this.span.innerHTML;this.value=util.unescapeHTML(o),this.editorChange.emit(this.value)},l}();__decorate([core_1.Output(),__metadata("design:type",Object)],SpanEditor.prototype,"editorChange",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[])],SpanEditor.prototype,"editor",null),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],SpanEditor.prototype,"type",null),__decorate([core_1.HostListener("keydown",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[KeyboardEvent]),__metadata("design:returntype",void 0)],SpanEditor.prototype,"onKeydown",null),__decorate([core_1.HostListener("keyup"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SpanEditor.prototype,"onKeyup",null),SpanEditor=__decorate([core_1.Directive({selector:"[editor]"}),__metadata("design:paramtypes",[core_1.ElementRef])],SpanEditor),exports.SpanEditor=SpanEditor;var SpanBoxComponent=function(){function l(o,a){this.element=o,this.changeDetectorRef=a,this.style_cursor="text",this.ValueChange=new core_1.EventEmitter(!0)}return l.prototype.ngAfterContentInit=function(){},l.prototype.focusSpan=function(){this.Span.nativeElement.focus(),this.selectAll()},l.prototype.selectAll=function(){var o=document.createRange();o.selectNodeContents(this.Span.nativeElement);var a=window.getSelection();a.removeAllRanges(),a.addRange(o)},l.prototype.onSpanBlur=function(){this.forceNumber&&!/^\-?((\d+)|(\d+\.)|(\d+\.\d+)|(\.\d+))$/.test(this._value)&&(this._value="0",this.ValueChange.emit(0)),this.class_focus=!1},l.prototype.onEditorClick=function(o){o.stopPropagation()},Object.defineProperty(l.prototype,"Value",{set:function(a){if(!this.forceNumber)"string"==typeof a||a?this._value=a+"":(this._value="",this.ValueChange.emit(""),this.changeDetectorRef.detectChanges());else if("number"!=typeof a){if(/^\-?((\d+)|(\d+\.)|(\d+\.\d+)|(\.\d+))$/.test(a)){var s=+a;this._value=s+"",this.ValueChange.emit(s)}else this._value="0",this.ValueChange.emit(0);this.changeDetectorRef.detectChanges()}},enumerable:!0,configurable:!0}),l.prototype.changed=function(o){if(!this.forceNumber)this._value=o,this.ValueChange.emit(o);else if(/^0+$/.test(o));else if(/^\-?((\d+)|(\d+\.)|(\d+\.\d+)|(\.\d+))$/.test(o)){var a=Number.parseFloat(o);this._value=o,this.ValueChange.emit(a)}else this._value="",this.selectAll()},l}();__decorate([core_1.Input(),__metadata("design:type",String)],SpanBoxComponent.prototype,"type",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],SpanBoxComponent.prototype,"forceNumber",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SpanBoxComponent.prototype,"prefix",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SpanBoxComponent.prototype,"suffix",void 0),__decorate([core_1.HostBinding("style.cursor"),__metadata("design:type",Object)],SpanBoxComponent.prototype,"style_cursor",void 0),__decorate([core_1.HostBinding("class.focus"),__metadata("design:type",Boolean)],SpanBoxComponent.prototype,"class_focus",void 0),__decorate([core_1.HostListener("click"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SpanBoxComponent.prototype,"focusSpan",null),__decorate([core_1.ViewChild("editor"),__metadata("design:type",core_1.ElementRef)],SpanBoxComponent.prototype,"Span",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],SpanBoxComponent.prototype,"Value",null),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],SpanBoxComponent.prototype,"ValueChange",void 0),SpanBoxComponent=__decorate([core_1.Component({selector:"spanbox,[spanbox]",template:"\n<span *ngIf=\"prefix\">{{prefix}}</span>\n<span #editor [editor]=\"_value\" [type]=\"type\" (editorChange)=\"changed($event)\" (click)=\"onEditorClick($event)\" (focus)=\"class_focus=true\" (blur)=\"onSpanBlur()\"></span>\n<span *ngIf=\"suffix\">{{suffix}}</span>\n",styles:["spanbox>span,div[spanbox]>span{display: inline-block;}"]}),__metadata("design:paramtypes",[core_1.ElementRef,core_1.ChangeDetectorRef])],SpanBoxComponent),exports.SpanBoxComponent=SpanBoxComponent;var InputBox=function(){return function(){}}();InputBox=__decorate([core_1.Component({selector:"input-box,[input-box]",template:"<span editor [mode]=\"\"></span>"}),__metadata("design:paramtypes",[])],InputBox),exports.InputBox=InputBox;var LogicCheckBox=function(){function l(){this._value=!1,this.ValueChange=new core_1.EventEmitter(!0)}return Object.defineProperty(l.prototype,"Value",{set:function(a){this._value=!!a},enumerable:!0,configurable:!0}),l.prototype.onClick=function(){this._value=!this._value,this.ValueChange.emit(this._value)},l}();__decorate([core_1.HostBinding("class.checked"),__metadata("design:type",Boolean)],LogicCheckBox.prototype,"_value",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],LogicCheckBox.prototype,"Value",null),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],LogicCheckBox.prototype,"ValueChange",void 0),__decorate([core_1.HostListener("click"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],LogicCheckBox.prototype,"onClick",null),LogicCheckBox=__decorate([core_1.Directive({selector:"[logic-checkbox]"}),__metadata("design:paramtypes",[])],LogicCheckBox),exports.LogicCheckBox=LogicCheckBox;var InfoFields=[InfoTableControl,tabview_1.TabViewComponent,InfoRowControl,TextField,SpanField,InfoField,LinkField,ClickField,TextAreaField,NumberField,DateField,TimeField,DateTimeField,MonthField,WeekField,RelationField,openinghours_1.OpeningHoursComponent,openinghours_1.ScheduledHoursComponent,WeekHoursField,ScheduledHoursField,ListViewField,SubmitField,SelectField,CheckBoxField,CheckBoxComponent,PasswordField,CaptchaImageField,AutoCompleteField,ImageUploadComponent,ImageField,ImageListField,tabmanager_1.TabManager,ListViewComponent,ContentComponent,ContentField,SingleOptionField,MultipleOptionField,options_1.SingleOptionGroup,options_1.MultipleOptionGroup,options_1.SingleGroupArray,SpanBoxComponent],DataContainers=[DataGridComponent,InnerWrapper,ItemsControl],Directives=[SpanEditor,LogicCheckBox],Buttons=[buttons_1.ButtonSearch,buttons_1.ButtonCheck,buttons_1.ButtonCreate,buttons_1.ButtonAll,buttons_1.ButtonRemove,buttons_1.ButtonDelete,buttons_1.SingleOption,buttons_1.MultipleOption,FileButton],Pipes=[pipes_1.StringToNumberDate,pipes_1.NumberToStringDate];InfoFields.forEach(function(l,o){l||console.log("InfoFields "+o)}),DataContainers.forEach(function(l,o){l||console.log("DataContainers "+o)}),Buttons.forEach(function(l,o){l||console.log("Buttons "+o)});var ErrisyUIModule=function(){return function(){}}();ErrisyUIModule=__decorate([core_1.NgModule({imports:[platform_browser_2.BrowserModule,forms_1.FormsModule,http_1.HttpModule,errisy_completer_1.CompleterModule,errisy_map_1.ErrisyMapModule],declarations:InfoFields.concat(Directives,DataContainers,Buttons,Pipes),entryComponents:InfoFields.slice(),providers:[compiler_1.COMPILER_PROVIDERS],exports:InfoFields.concat(Directives,DataContainers,Buttons)}),__metadata("design:paramtypes",[])],ErrisyUIModule),exports.ErrisyUIModule=ErrisyUIModule;var UIQuery=function(){function l(){}return l.RegEx=function(o,a){var s=[],u=l.escapeRegEx(a);return o&&Array.isArray(o)&&o.forEach(function(g){var h={};h[g]={$regex:u,$options:"i"},s.push(h)}),0<s.length?{$or:s}:{}},l.escapeRegEx=function(o){return o.replace(/[\.\[\]\(\)\*\+\-\?]/ig,function(a){return"\\"+a})},l}();exports.UIQuery=UIQuery,module&&(module.exports=exports);var InfoRowControl_1,ImageUploadComponent_1,ImageField_1,ImageListField_1,FileButton_1,ContentComponent_1;