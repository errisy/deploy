"use strict";var __extends=function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},Observable_1=require("rxjs/Observable"),tryCatch_1=require("rxjs/util/tryCatch"),errorObject_1=require("rxjs/util/errorObject"),AsyncSubject_1=require("rxjs/AsyncSubject"),BoundCallbackObservable=function(a){function c(e,f,g,h){a.call(this),this.callbackFunc=e,this.selector=f,this.args=g,this.scheduler=h}return __extends(c,a),c.create=function(e,f,g){return void 0===f&&(f=void 0),function(){for(var h=[],i=0;i<arguments.length;i++)h[i-0]=arguments[i];return new c(e,f,h,g)}},c.prototype._subscribe=function(e){var f=this.callbackFunc,g=this.args,h=this.scheduler,i=this.subject;if(!h){if(!i){i=this.subject=new AsyncSubject_1.AsyncSubject;var j=function l(){for(var m=[],n=0;n<arguments.length;n++)m[n-0]=arguments[n];var o=l.source,q=o.selector,r=o.subject;if(q){var s=tryCatch_1.tryCatch(q).apply(this,m);s===errorObject_1.errorObject?r.error(errorObject_1.errorObject.e):(r.next(s),r.complete())}else r.next(1===m.length?m[0]:m),r.complete()};j.source=this;var k=tryCatch_1.tryCatch(f).apply(this,g.concat(j));k===errorObject_1.errorObject&&i.error(errorObject_1.errorObject.e)}return i.subscribe(e)}return h.schedule(c.dispatch,0,{source:this,subscriber:e})},c.dispatch=function(e){var f=this,g=e.source,h=e.subscriber,i=g.callbackFunc,j=g.args,k=g.scheduler,l=g.subject;if(!l){l=g.subject=new AsyncSubject_1.AsyncSubject;var m=function o(){for(var q=[],r=0;r<arguments.length;r++)q[r-0]=arguments[r];var s=o.source,t=s.selector,u=s.subject;if(t){var v=tryCatch_1.tryCatch(t).apply(this,q);v===errorObject_1.errorObject?f.add(k.schedule(dispatchError,0,{err:errorObject_1.errorObject.e,subject:u})):f.add(k.schedule(dispatchNext,0,{value:v,subject:u}))}else{var w=1===q.length?q[0]:q;f.add(k.schedule(dispatchNext,0,{value:w,subject:u}))}};m.source=g;var n=tryCatch_1.tryCatch(i).apply(this,j.concat(m));n===errorObject_1.errorObject&&l.error(errorObject_1.errorObject.e)}f.add(l.subscribe(h))},c}(Observable_1.Observable);exports.BoundCallbackObservable=BoundCallbackObservable;function dispatchNext(a){var c=a.value,e=a.subject;e.next(c),e.complete()}function dispatchError(a){var c=a.err,e=a.subject;e.error(c)}