'use strict';var __extends=this&&this.__extends||function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},Observable_1=require('../Observable'),EmptyObservable_1=require('./EmptyObservable'),isArray_1=require('../util/isArray'),subscribeToResult_1=require('../util/subscribeToResult'),OuterSubscriber_1=require('../OuterSubscriber'),ForkJoinObservable=function(a){function c(e,f){a.call(this),this.sources=e,this.resultSelector=f}return __extends(c,a),c.create=function(){for(var e=[],f=0;f<arguments.length;f++)e[f-0]=arguments[f];if(null===e||0===arguments.length)return new EmptyObservable_1.EmptyObservable;var g=null;return'function'==typeof e[e.length-1]&&(g=e.pop()),1===e.length&&isArray_1.isArray(e[0])&&(e=e[0]),0===e.length?new EmptyObservable_1.EmptyObservable:new c(e,g)},c.prototype._subscribe=function(e){return new ForkJoinSubscriber(e,this.sources,this.resultSelector)},c}(Observable_1.Observable);exports.ForkJoinObservable=ForkJoinObservable;var ForkJoinSubscriber=function(a){function c(e,f,g){a.call(this,e),this.sources=f,this.resultSelector=g,this.completed=0,this.haveValues=0;var h=f.length;this.total=h,this.values=Array(h);for(var j=0;j<h;j++){var k=f[j],l=subscribeToResult_1.subscribeToResult(this,k,null,j);l&&(l.outerIndex=j,this.add(l))}}return __extends(c,a),c.prototype.notifyNext=function(e,f,g,h,j){this.values[g]=f,j._hasValue||(j._hasValue=!0,this.haveValues++)},c.prototype.notifyComplete=function(e){var f=this.destination,g=this,h=g.haveValues,j=g.resultSelector,k=g.values,l=k.length;if(!e._hasValue)return void f.complete();if(this.completed++,this.completed===l){if(h===l){var m=j?j.apply(this,k):k;f.next(m)}f.complete()}},c}(OuterSubscriber_1.OuterSubscriber);