'use strict';var __extends=this&&this.__extends||function(a,c){function f(){this.constructor=a}for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g]);a.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f)},Observable_1=require('../Observable'),tryCatch_1=require('../util/tryCatch'),isFunction_1=require('../util/isFunction'),errorObject_1=require('../util/errorObject'),Subscription_1=require('../Subscription');function isNodeStyleEventEmmitter(a){return!!a&&'function'==typeof a.addListener&&'function'==typeof a.removeListener}function isJQueryStyleEventEmitter(a){return!!a&&'function'==typeof a.on&&'function'==typeof a.off}function isNodeList(a){return!!a&&'[object NodeList]'===a.toString()}function isHTMLCollection(a){return!!a&&'[object HTMLCollection]'===a.toString()}function isEventTarget(a){return!!a&&'function'==typeof a.addEventListener&&'function'==typeof a.removeEventListener}var FromEventObservable=function(a){function c(f,g,h,j){a.call(this),this.sourceObj=f,this.eventName=g,this.selector=h,this.options=j}return __extends(c,a),c.create=function(f,g,h,j){return isFunction_1.isFunction(h)&&(j=h,h=void 0),new c(f,g,j,h)},c.setupSubscription=function(f,g,h,j,k){var l;if(isNodeList(f)||isHTMLCollection(f))for(var m=0,n=f.length;m<n;m++)c.setupSubscription(f[m],g,h,j,k);else if(isEventTarget(f)){f.addEventListener(g,h,k),l=function(){return f.removeEventListener(g,h)}}else if(isJQueryStyleEventEmitter(f)){f.on(g,h),l=function(){return f.off(g,h)}}else if(isNodeStyleEventEmmitter(f)){f.addListener(g,h),l=function(){return f.removeListener(g,h)}}j.add(new Subscription_1.Subscription(l))},c.prototype._subscribe=function(f){var g=this.sourceObj,h=this.eventName,j=this.options,k=this.selector,l=k?function(){for(var m=[],n=0;n<arguments.length;n++)m[n-0]=arguments[n];var o=tryCatch_1.tryCatch(k).apply(void 0,m);o===errorObject_1.errorObject?f.error(errorObject_1.errorObject.e):f.next(o)}:function(m){return f.next(m)};c.setupSubscription(g,h,l,f,j)},c}(Observable_1.Observable);exports.FromEventObservable=FromEventObservable;