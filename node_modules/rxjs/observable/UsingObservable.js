'use strict';var __extends=this&&this.__extends||function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},Observable_1=require('../Observable'),subscribeToResult_1=require('../util/subscribeToResult'),OuterSubscriber_1=require('../OuterSubscriber'),UsingObservable=function(a){function c(e,f){a.call(this),this.resourceFactory=e,this.observableFactory=f}return __extends(c,a),c.create=function(e,f){return new c(e,f)},c.prototype._subscribe=function(e){var i,f=this,g=f.resourceFactory,h=f.observableFactory;try{return i=g(),new UsingSubscriber(e,i,h)}catch(j){e.error(j)}},c}(Observable_1.Observable);exports.UsingObservable=UsingObservable;var UsingSubscriber=function(a){function c(e,f,g){a.call(this,e),this.resource=f,this.observableFactory=g,e.add(f),this.tryUse()}return __extends(c,a),c.prototype.tryUse=function(){try{var e=this.observableFactory.call(this,this.resource);e&&this.add(subscribeToResult_1.subscribeToResult(this,e))}catch(f){this._error(f)}},c}(OuterSubscriber_1.OuterSubscriber);