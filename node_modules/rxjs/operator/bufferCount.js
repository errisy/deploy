"use strict";var __extends=this&&this.__extends||function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},Subscriber_1=require("../Subscriber");function bufferCount(a,c){return void 0===c&&(c=null),this.lift(new BufferCountOperator(a,c))}exports.bufferCount=bufferCount;var BufferCountOperator=function(){function a(c,e){this.bufferSize=c,this.startBufferEvery=e}return a.prototype.call=function(c,e){return e._subscribe(new BufferCountSubscriber(c,this.bufferSize,this.startBufferEvery))},a}(),BufferCountSubscriber=function(a){function c(e,f,g){a.call(this,e),this.bufferSize=f,this.startBufferEvery=g,this.buffers=[[]],this.count=0}return __extends(c,a),c.prototype._next=function(e){var f=this.count+=1,g=this.destination,h=this.bufferSize,j=null==this.startBufferEvery?h:this.startBufferEvery,k=this.buffers,l=k.length,m=-1;0==f%j&&k.push([]);for(var o,n=0;n<l;n++)o=k[n],o.push(e),o.length===h&&(m=n,g.next(o));-1!==m&&k.splice(m,1)},c.prototype._complete=function(){for(var g,e=this.destination,f=this.buffers;0<f.length;)g=f.shift(),0<g.length&&e.next(g);a.prototype._complete.call(this)},c}(Subscriber_1.Subscriber);