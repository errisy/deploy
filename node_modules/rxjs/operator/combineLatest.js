'use strict';var __extends=this&&this.__extends||function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},ArrayObservable_1=require('../observable/ArrayObservable'),isArray_1=require('../util/isArray'),OuterSubscriber_1=require('../OuterSubscriber'),subscribeToResult_1=require('../util/subscribeToResult'),none={};function combineLatest(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var e=null;return'function'==typeof a[a.length-1]&&(e=a.pop()),1===a.length&&isArray_1.isArray(a[0])&&(a=a[0]),a.unshift(this),new ArrayObservable_1.ArrayObservable(a).lift(new CombineLatestOperator(e))}exports.combineLatest=combineLatest;var CombineLatestOperator=function(){function a(c){this.project=c}return a.prototype.call=function(c,e){return e._subscribe(new CombineLatestSubscriber(c,this.project))},a}();exports.CombineLatestOperator=CombineLatestOperator;var CombineLatestSubscriber=function(a){function c(e,f){a.call(this,e),this.project=f,this.active=0,this.values=[],this.observables=[]}return __extends(c,a),c.prototype._next=function(e){this.values.push(none),this.observables.push(e)},c.prototype._complete=function(){var e=this.observables,f=e.length;if(0===f)this.destination.complete();else{this.active=f,this.toRespond=f;for(var h,g=0;g<f;g++)h=e[g],this.add(subscribeToResult_1.subscribeToResult(this,h,h,g))}},c.prototype.notifyComplete=function(){0==(this.active-=1)&&this.destination.complete()},c.prototype.notifyNext=function(e,f,g){var k=this.values,l=k[g],m=this.toRespond?l===none?--this.toRespond:this.toRespond:0;k[g]=f,0===m&&(this.project?this._tryProject(k):this.destination.next(k.slice()))},c.prototype._tryProject=function(e){var f;try{f=this.project.apply(this,e)}catch(g){return void this.destination.error(g)}this.destination.next(f)},c}(OuterSubscriber_1.OuterSubscriber);exports.CombineLatestSubscriber=CombineLatestSubscriber;