'use strict';var __extends=this&&this.__extends||function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},isArray_1=require('../util/isArray'),ArrayObservable_1=require('../observable/ArrayObservable'),OuterSubscriber_1=require('../OuterSubscriber'),subscribeToResult_1=require('../util/subscribeToResult');function race(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return 1===a.length&&isArray_1.isArray(a[0])&&(a=a[0]),a.unshift(this),raceStatic.apply(this,a)}exports.race=race;function raceStatic(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];if(1===a.length)if(isArray_1.isArray(a[0]))a=a[0];else return a[0];return new ArrayObservable_1.ArrayObservable(a).lift(new RaceOperator)}exports.raceStatic=raceStatic;var RaceOperator=function(){function a(){}return a.prototype.call=function(c,e){return e._subscribe(new RaceSubscriber(c))},a}();exports.RaceOperator=RaceOperator;var RaceSubscriber=function(a){function c(e){a.call(this,e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return __extends(c,a),c.prototype._next=function(e){this.observables.push(e)},c.prototype._complete=function(){var e=this.observables,f=e.length;if(0===f)this.destination.complete();else{for(var g=0;g<f;g++){var h=e[g],j=subscribeToResult_1.subscribeToResult(this,h,h,g);this.subscriptions&&(this.subscriptions.push(j),this.add(j))}this.observables=null}},c.prototype.notifyNext=function(e,f,g){if(!this.hasFirst){this.hasFirst=!0;for(var k=0;k<this.subscriptions.length;k++)if(k!==g){var l=this.subscriptions[k];l.unsubscribe(),this.remove(l)}this.subscriptions=null}this.destination.next(f)},c}(OuterSubscriber_1.OuterSubscriber);exports.RaceSubscriber=RaceSubscriber;