"use strict";var __extends=function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},Subject_1=require("rxjs/Subject"),tryCatch_1=require("rxjs/util/tryCatch"),errorObject_1=require("rxjs/util/errorObject"),OuterSubscriber_1=require("rxjs/OuterSubscriber"),subscribeToResult_1=require("rxjs/util/subscribeToResult");function repeatWhen(a){return this.lift(new RepeatWhenOperator(a,this))}exports.repeatWhen=repeatWhen;var RepeatWhenOperator=function(){function a(c,e){this.notifier=c,this.source=e}return a.prototype.call=function(c,e){return e._subscribe(new RepeatWhenSubscriber(c,this.notifier,this.source))},a}(),RepeatWhenSubscriber=function(a){function c(e,f,g){a.call(this,e),this.notifier=f,this.source=g}return __extends(c,a),c.prototype.complete=function(){if(!this.isStopped){var e=this.notifications,f=this.retries,g=this.retriesSubscription;if(!f){if(e=new Subject_1.Subject,f=tryCatch_1.tryCatch(this.notifier)(e),f===errorObject_1.errorObject)return a.prototype.complete.call(this);g=subscribeToResult_1.subscribeToResult(this,f)}else this.notifications=null,this.retriesSubscription=null;this.unsubscribe(),this.closed=!1,this.notifications=e,this.retries=f,this.retriesSubscription=g,e.next()}},c.prototype._unsubscribe=function(){var e=this,f=e.notifications,g=e.retriesSubscription;f&&(f.unsubscribe(),this.notifications=null),g&&(g.unsubscribe(),this.retriesSubscription=null),this.retries=null},c.prototype.notifyNext=function(){var j=this,k=j.notifications,l=j.retries,m=j.retriesSubscription;this.notifications=null,this.retries=null,this.retriesSubscription=null,this.unsubscribe(),this.isStopped=!1,this.closed=!1,this.notifications=k,this.retries=l,this.retriesSubscription=m,this.source.subscribe(this)},c}(OuterSubscriber_1.OuterSubscriber);