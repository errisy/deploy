"use strict";var __extends=this&&this.__extends||function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},Subscriber_1=require("../Subscriber");function retry(a){return void 0===a&&(a=-1),this.lift(new RetryOperator(a,this))}exports.retry=retry;var RetryOperator=function(){function a(c,e){this.count=c,this.source=e}return a.prototype.call=function(c,e){return e._subscribe(new RetrySubscriber(c,this.count,this.source))},a}(),RetrySubscriber=function(a){function c(e,f,g){a.call(this,e),this.count=f,this.source=g}return __extends(c,a),c.prototype.error=function(e){if(!this.isStopped){var f=this,g=f.source,h=f.count;if(0===h)return a.prototype.error.call(this,e);-1<h&&(this.count=h-1),this.unsubscribe(),this.isStopped=!1,this.closed=!1,g.subscribe(this)}},c}(Subscriber_1.Subscriber);