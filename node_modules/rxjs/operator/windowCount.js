'use strict';var __extends=this&&this.__extends||function(a,e){function f(){this.constructor=a}for(var g in e)e.hasOwnProperty(g)&&(a[g]=e[g]);a.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)},Subscriber_1=require('../Subscriber'),Subject_1=require('../Subject');function windowCount(a,e){return void 0===e&&(e=0),this.lift(new WindowCountOperator(a,e))}exports.windowCount=windowCount;var WindowCountOperator=function(){function a(e,f){this.windowSize=e,this.startWindowEvery=f}return a.prototype.call=function(e,f){return f._subscribe(new WindowCountSubscriber(e,this.windowSize,this.startWindowEvery))},a}(),WindowCountSubscriber=function(a){function e(f,g,h){a.call(this,f),this.destination=f,this.windowSize=g,this.startWindowEvery=h,this.windows=[new Subject_1.Subject],this.count=0,f.next(this.windows[0])}return __extends(e,a),e.prototype._next=function(f){for(var g=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,h=this.destination,j=this.windowSize,k=this.windows,l=k.length,m=0;m<l&&!this.closed;m++)k[m].next(f);var n=this.count-j+1;if(0<=n&&0==n%g&&!this.closed&&k.shift().complete(),0==++this.count%g&&!this.closed){var o=new Subject_1.Subject;k.push(o),h.next(o)}},e.prototype._error=function(f){var g=this.windows;if(g)for(;0<g.length&&!this.closed;)g.shift().error(f);this.destination.error(f)},e.prototype._complete=function(){var f=this.windows;if(f)for(;0<f.length&&!this.closed;)f.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(Subscriber_1.Subscriber);