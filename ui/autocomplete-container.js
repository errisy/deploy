"use strict";var __decorate=this&&this.__decorate||function(a,b,f,g){var l,h=arguments.length,j=3>h?b:null===g?g=Object.getOwnPropertyDescriptor(b,f):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(a,b,f,g);else for(var m=a.length-1;0<=m;m--)(l=a[m])&&(j=(3>h?l(j):3<h?l(b,f,j):l(b,f))||j);return 3<h&&j&&Object.defineProperty(b,f,j),j},__metadata=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)},core_1=require("@angular/core"),common_1=require("@angular/common"),options_class_1=require("./options.class"),position_1=require("./position"),AutocompleteContainer=function(){function a(b,f){this.element=b,this._matches=[],Object.assign(this,f)}return Object.defineProperty(a.prototype,"matches",{get:function(){return this._matches},set:function(b){this._matches=b,0<this._matches.length&&(this._active=this._matches[0])},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"field",{set:function(b){this._field=b},enumerable:!0,configurable:!0}),a.prototype.position=function(b){this.display="block",this.top="0px",this.left="0px";var f=position_1.positionService.positionElements(b.nativeElement,this.element.nativeElement.children[0],this.placement,!1);this.top=f.top+"px",this.left=f.left+"px"},a.prototype.selectActiveMatch=function(){this.selectMatch(this._active)},a.prototype.prevActiveMatch=function(){var b=this.matches.indexOf(this._active);this._active=this.matches[0>b-1?this.matches.length-1:b-1]},a.prototype.nextActiveMatch=function(){var b=this.matches.indexOf(this._active);this._active=this.matches[b+1>this.matches.length-1?0:b+1]},a.prototype.selectActive=function(b){this._active=b},a.prototype.isActive=function(b){return this._active===b},a.prototype.selectMatch=function(b,f){return void 0===f&&(f=null),f&&(f.stopPropagation(),f.preventDefault()),this.parent.changeModel(b),this.parent.autocompleteOnSelect.emit({item:b}),!1},a.prototype.hightlight=function(b,f){var j,l,g=("object"==typeof b&&this._field?b[this._field]:b).toString(),h=g.toLowerCase();if("object"==typeof f)for(var m=f.length,n=0;n<m;n+=1)j=h.indexOf(f[n]),l=f[n].length,0<=j&&0<l&&(g=g.substring(0,j)+"<strong>"+g.substring(j,j+l)+"</strong>"+g.substring(j+l),h=h.substring(0,j)+"        "+" ".repeat(l)+"         "+h.substring(j+l));else f&&(j=h.indexOf(f),l=f.length,0<=j&&0<l&&(g=g.substring(0,j)+"<strong>"+g.substring(j,j+l)+"</strong>"+g.substring(j+l)));return g},a=__decorate([core_1.Component({selector:"autocomplete-container",directives:[common_1.CORE_DIRECTIVES],template:"\n                  <ul class=\"dropdown-menu\"\n                      [ngStyle]=\"{top: top, left: left, display: display}\"\n                      style=\"display: block\">\n                    <li *ngFor=\"#match of matches\"\n                        [class.active]=\"isActive(match)\"\n                        (mouseenter)=\"selectActive(match)\">\n                        <a href=\"#\" (click)=\"selectMatch(match, $event)\" tabindex=\"-1\" [innerHtml]=\"hightlight(match, query)\"></a>\n                    </li>\n                  </ul>\n              ",encapsulation:core_1.ViewEncapsulation.None}),__metadata("design:paramtypes",[core_1.ElementRef,options_class_1.AutocompleteOptions])],a),a}();exports.AutocompleteContainer=AutocompleteContainer;